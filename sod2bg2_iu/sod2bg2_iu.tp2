//SoD2BG2EE Item Upgrade

BACKUP ~sod2bg2_iu/backup~
SUPPORT ~https://www.gibberlings3.net/forums/forum/214-sod-to-bg2ee-item-upgrade/~

VERSION ~v2.0.0~

README ~sod2bg2_iu/readme.html~

ASK_EVERY_COMPONENT

LANGUAGE ~English~ ~english~ ~sod2bg2_iu/language/english/english.tra~


/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Siege of Dragonspear-BG2:EE Item Upgrade         \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\

BEGIN @9000
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003
REQUIRE_PREDICATE NOT MOD_IS_INSTALLED ~cdtweaks/setup-cdtweaks.tp2~ ~1230~ @9038
PRINT @9001

INCLUDE ~sod2bg2_iu/lib/functions.tpa~		//adding functions
INCLUDE ~sod2bg2_iu/lib/classspelltool.tpa~		//adding functions

////////////////////
//Adding Resources//
////////////////////
ACTION_IF GAME_IS ~bg2ee~ BEGIN
COPY ~sod2bg2_iu/sodresource/bam~ ~override~
COPY ~sod2bg2_iu/sodresource/eff~ ~override~
COPY ~sod2bg2_iu/sodresource/wav~ ~override~
COPY ~sod2bg2_iu/sodresource/vvc~ ~override~
END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~mdrda1.bam~ BEGIN //Checks for bams required for drowned dead
	COPY ~sod2bg2_iu/anim/drowned/bam~ ~override~
	END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~drown01.wav~ BEGIN //Checks for wavs required for drowned dead
	COPY ~sod2bg2_iu/anim/drowned/wav~ ~override~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgica1.bam~ BEGIN //Checks for bams required for ice golem
		COPY ~sod2bg2_iu/anim/icegolem/bam~ ~override~
		END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~icegol01.wav~ BEGIN //Checks for wavs required for ice golem
		COPY ~sod2bg2_iu/anim/icegolem/wav~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~melwa1.bam~ BEGIN //Checks for bams required for iwd water elemental
			COPY ~sod2bg2_iu/anim/waterele/bam~ ~override~
			END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~watere01.wav~ BEGIN //Checks for wavs required for iwd water elemental
			COPY ~sod2bg2_iu/anim/waterele/wav~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~weird01.wav~ BEGIN //Checks for wavs required for bg water elemental
				COPY ~sod2bg2_iu/anim/watweird/wav~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~mzo2a1.bam~ BEGIN //Checks for bams required for iwd yellow zombie
					COPY ~sod2bg2_iu/anim/zombie/yellow/bam~ ~override~
					END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~zomwor01.wav~ BEGIN //Checks for wavs required for iwd yellow zombie
					COPY ~sod2bg2_iu/anim/zombie/yellow/wav~ ~override~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwilg1.bam~ BEGIN //Checks for bams required for will-o-wisp
						COPY ~sod2bg2_iu/anim/willowisp/bam~ ~override~
						END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~wisp03a.wav~ BEGIN //Checks for wavs required for will-o-wisp
						COPY ~sod2bg2_iu/anim/willowisp/wav~ ~override~
						END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~mdtra1.bam~ BEGIN //Checks for bams required for dark treant
							COPY ~sod2bg2_iu/anim/treant/bam~ ~override~
							END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~tree0a1.wav~ BEGIN //Checks for wavs required for dark treant
							COPY ~sod2bg2_iu/anim/treant/wav~ ~override~
							END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwiga1.bam~ BEGIN //Checks for bams required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/wight_gray/bam~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~wight01.wav~ BEGIN //Checks for wavs required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/wight_gray/wav~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_sm01.wav~ BEGIN //Checks for shared wavs required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/shared/wav~ ~override~
								END

COPY ~sod2bg2_iu/bam~ ~override~
COPY ~sod2bg2_iu/eff~ ~override~
COPY ~sod2bg2_iu/vvc~ ~override~
COPY ~sod2bg2_iu/wav~ ~override~
COPY ~sod2bg2_iu/vef~ ~override~
COPY ~sod2bg2_iu/itm/randomtreasure~ ~override~


///////////////////////
// Adding Projectiles//
///////////////////////

ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpfir.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshrod.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshout.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdagg1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksnow.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwave.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkaxel.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwhirl.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwind.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicel.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicely.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicelx.pro~
	COPY_EXISTING ~dtkicely.pro~ ~override~
	WRITE_SHORT 0x21a ~%dtkicelx%~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdrain.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkjest.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkchaos.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkexalt.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc3.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmagsp.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkaxham.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkbiter.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkthrs1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkthrs2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfball.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkhoar1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkhoar2.pro~
	COPY_EXISTING ~dtkhoar1.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkhoar2%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkffblt.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcorro.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdarkn.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfaeri.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshblt.pro~	//Shining Bolt - dont mix up with Shadow Bolt projectiles
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkgshd.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkgshd2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksbltx.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdflam.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkedis.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfblx.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcquag.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcqug2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcata.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcata2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmael.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmael2.pro~
	COPY_EXISTING ~dtkmael.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkmael2%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksuns.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkholo.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcrus.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkantix.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkantiy.pro~
	COPY_EXISTING ~dtkantix.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkantiy%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfwhi.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkscor.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksilbr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwdbre.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkblubr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshabr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvenbr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkblabr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdevd.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkkfrz.pro~


//////////////////////////
//Adding Creatures  //////
//////////////////////////
COPY ~sod2bg2_iu/cre/dtkbrsk1.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk2.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld1.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrsk3.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk4.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld2.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrsk5.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk6.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld3.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrska.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskb.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskc.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskd.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrske.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskf.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskg.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskh.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrski.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskj.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskk.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskl.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
   
COPY ~sod2bg2_iu/cre/dtkgbear.cre~ ~override~
   SAY NAME1 @7004
   SAY NAME2 @7004

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdankhsu.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bdankhsu.cre~ ~override~
   SAY NAME1 @7002
   SAY NAME2 @7002
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddanc01.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bddanc01.cre~ ~override~
   SAY NAME1 @7003
   SAY NAME2 @7003
END

COPY_EXISTING ~bddanc01.cre~ ~override~
	WRITE_BYTE 0x270 4
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddanc02.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bddanc02.cre~ ~override~
   SAY NAME1 @7003
   SAY NAME2 @7003
END

COPY_EXISTING ~bddanc02.cre~ ~override~		//sets summoned creature to ally for dancing lights to function as intended
	WRITE_BYTE 0x270 4
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~remorha.cre~ BEGIN // check if exists
COPY ~sod2bg2_iu/iwdresource/bam/remorhaz~ ~override~	//BAM files required for Remorhaz animation
COPY ~sod2bg2_iu/iwdresource/wav/remorhaz~ ~override~	//WAV files required for Remorhaz sounds
COPY ~sod2bg2_iu/iwdresource/itm/remorha.itm~ ~override~	//Attack item for Remorhaz
COPY ~sod2bg2_iu/iwdresource/cre/remorha.cre~ ~override~	//Remorhaz
   SAY NAME1 @7006
   SAY NAME2 @7006
   WRITE_ASCII 0x248 gpshout
   WRITE_ASCII 0x268 wtasight
   LPF ADD_CRE_EFFECT INT_VAR opcode = 101 target = 1 parameter2 = 40 timing = 1 probability1 = 100 END
		COPY ~sod2bg2_iu/iwdresource/cre/remorha.cre~ ~override/dtkremor.cre~	//Remorhaz
		   SAY NAME1 @7006
		   SAY NAME2 @7006
		   WRITE_ASCII 0x248 gpshout
		   WRITE_ASCII 0x268 wtasight
		   LPF ADD_CRE_EFFECT INT_VAR opcode = 101 target = 1 parameter2 = 40 timing = 1 probability1 = 100 END
		   REMOVE_CRE_ITEM ~cdrem~	//removes shell from inventory
END

COMPILE ~sod2bg2_iu/scripts/dtkduer1.baf~
COPY ~sod2bg2_iu/cre/dtkduer1.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer1
   
COMPILE ~sod2bg2_iu/scripts/dtkduer2.baf~
COPY ~sod2bg2_iu/cre/dtkduer2.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer2
   
COMPILE ~sod2bg2_iu/scripts/dtkduer3.baf~
COPY ~sod2bg2_iu/cre/dtkduer3.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer3
   
COMPILE ~sod2bg2_iu/scripts/dtktanar.baf~
COPY ~sod2bg2_iu/cre/dtktanar.cre~ ~override~	//Tanar'ri Slaver
   SAY NAME1 @7009
   SAY NAME2 @7009
   WRITE_ASCII 0x248 dtktanar

COMPILE ~sod2bg2_iu/scripts/dtkdshm.baf~   
COPY ~sod2bg2_iu/cre/dtkdshm.cre~ ~override~	//Shadow Fiend
   SAY NAME1 @7010
   SAY NAME2 @7010
   WRITE_ASCII 0x248 dtkdshm

COPY ~sod2bg2_iu/2da/dtkslig.2da~ ~override~   
COPY ~sod2bg2_iu/cre/dtkslig.cre~ ~override~	//Slime Golem
   SAY NAME1 @7011
   SAY NAME2 @7011

COPY ~sod2bg2_iu/cre/dtktren1.cre~ ~override~	//9HD Dark Treant
   SAY NAME1 @7012
   SAY NAME2 @7012
	   COPY ~sod2bg2_iu/cre/dtktren2.cre~ ~override~	//10HD Dark Treant
	   SAY NAME1 @7012
	   SAY NAME2 @7012
			COPY ~sod2bg2_iu/cre/dtktren3.cre~ ~override~	//11HD Dark Treant
			SAY NAME1 @7012
			SAY NAME2 @7012

COPY ~sod2bg2_iu/spl/dtkputz.spl~ ~override~	//Putrid Zombie Spell			
COPY ~sod2bg2_iu/cre/dtkputz1.cre~ ~override~	//Putrid Zombie
   SAY NAME1 @7013
   SAY NAME2 @7013
		COPY ~sod2bg2_iu/cre/dtkputz2.cre~ ~override~	//Putrid Zombie
		SAY NAME1 @7013
		SAY NAME2 @7013
			COPY ~sod2bg2_iu/cre/dtkputz3.cre~ ~override~	//Putrid Zombie
		    SAY NAME1 @7013
		    SAY NAME2 @7013

COMPILE ~sod2bg2_iu/scripts/dtkchar1.baf~			
COPY ~sod2bg2_iu/cre/dtkchar1.cre~ ~override~	//7HD Charged Wight
   SAY NAME1 @7014
   SAY NAME2 @7014
   WRITE_ASCII 0x268 dtkchar1
		COPY ~sod2bg2_iu/cre/dtkchar2.cre~ ~override~	//9HD Charged Wight
		SAY NAME1 @7014
		SAY NAME2 @7014
		WRITE_ASCII 0x268 dtkchar1
			COPY ~sod2bg2_iu/cre/dtkchar3.cre~ ~override~	//11HD Charged Wight
		    SAY NAME1 @7014
		    SAY NAME2 @7014
			WRITE_ASCII 0x268 dtkchar1

COPY ~sod2bg2_iu/itm/creitems/dtkshdel.itm~ ~override~		//Shadow Elemental attack
SAY NAME1 @5065
SAY NAME2 @5065
COPY ~sod2bg2_iu/cre/dtkshdel.cre~ ~override~		//Shadow Elemental - Berserk
   SAY NAME1 @7015
   SAY NAME2 @7015
	   COPY ~sod2bg2_iu/cre/dtkelsh1.cre~ ~override~		//Shadow Elemental - 12HD
	   SAY NAME1 @7015
	   SAY NAME2 @7015
		   COPY ~sod2bg2_iu/cre/dtkelsh2.cre~ ~override~		//Shadow Elemental - 16HD
		   SAY NAME1 @7015
		   SAY NAME2 @7015
			   COPY ~sod2bg2_iu/cre/dtkelsh3.cre~ ~override~		//Shadow Elemental - 24HD
			   SAY NAME1 @7015
			   SAY NAME2 @7015

			
//////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////
////Modifying Existing Scripts to free up "key" items for later use as components ////
//////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////


ACTION_IF FILE_EXISTS_IN_GAME ~lichtoo.bcs~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/scripts/dtklicht.baf~ ~override~	//new script for Diedrex's Tower to not take tooth.
	COPY_EXISTING ~ar2200.are~ ~override~
		WRITE_ASCII 0x59c0 ~dtklicht~
		WRITE_ASCII 0x5a84 ~dtklicht~
		END
   

//////////////////////////
//////////////////////////
//Adding SoD Spells //////
//////////////////////////
//////////////////////////

///////////////////////////////////////////////
//////////////////Dancing Lights///////////////
///////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_DANCING_LIGHTS~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkdance.spl~ 2 1 WIZARD_DANCING_LIGHTS
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3019  // Spell Name
	SAY NAME2 @3019
	SAY UNIDENTIFIED_DESC @3020  // Spell description
	SAY DESC @3020
	WRITE_ASCII 0x3a dtkdancc
	    LPF ALTER_SPELL_HEADER INT_VAR header = 0 STR_VAR icon = dtkdancb END
    END

COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdance.itm~
    SAY NAME2 @3019
    SAY DESC @3020
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT4 target_hdr = 4 range = 30 price = 350 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
		
		COMPILE ~sod2bg2_iu/scripts/bddanc01.baf~ // Adding creature script required for spell
		
ACTION_IF GAME_IS ~eet~ BEGIN	// modifies existing scroll and spell for EET games
  ADD_SPELL ~sod2bg2_iu/spl/dtkdance.spl~ 2 2 WIZARD_DANCING_LIGHTS		//adding first as different level to remove existing - this fixes spell for sorc spell progression
  ADD_SPELL ~sod2bg2_iu/spl/dtkdance.spl~ 2 1 WIZARD_DANCING_LIGHTS		//adding second time - removes previous and restores correct level and allows sorc to learn
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3019  // Spell Name
	SAY NAME2 @3019
	SAY UNIDENTIFIED_DESC @3020  // Spell description
	SAY DESC @3020
	WRITE_ASCII 0x3a dtkdancc
	    LPF ALTER_SPELL_HEADER INT_VAR header = 0 STR_VAR icon = dtkdancb END
			COPY_EXISTING ~bdscrl1a.itm~ ~override~
				WRITE_ASCII 0x3a dtkdanca
				LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 STR_VAR icon = dtkdanca END
				LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 STR_VAR resource = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 147 STR_VAR resource = EVAL ~%current_spell_res%~ END
				END

ACTION_IF GAME_IS ~eet~ BEGIN	// placing scrolls for EET games
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
				COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
				ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
					COPY_EXISTING ~ohbmhsm.sto~ ~override~	//Book Merchant
					ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
						COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
						ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2	
							COPY_EXISTING ~bpding01.sto~ ~override~	//Dinguer the Mad
							ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2	
								EXTEND_BOTTOM ~ar0602.bcs~ ~sod2bg2_iu/scripts/ar0602a.baf~	//Add scoll to bookshelf
									EXTEND_BOTTOM ~ar5405.bcs~ ~sod2bg2_iu/scripts/ar5405a.baf~	//Add scoll to treasure chest
										EXTEND_BOTTOM ~ar1301.bcs~ ~sod2bg2_iu/scripts/ar1301a.baf~	//Add scoll to treasure chest
											COPY_EXISTING ~baeloth.cre~ ~override~
											ADD_CRE_ITEM ~bdscrl1a~ #0 #0 #0 ~NONE~ ~INV~		//add to inventory
												COPY_EXISTING ~jayes.sto~ ~override~	//Jayes
												ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1
													COPY_EXISTING ~suelf10.sto~ ~override~	//Temple of Rillifane
													ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2
														COPY_EXISTING ~bernard.sto~ ~override~	//Copper Coronet
														ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1													
											END
							
ACTION_IF GAME_IS ~bg2ee~ BEGIN	// placing scrolls for BG2EE games
	COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
	ADD_STORE_ITEM ~dtkdance.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~ohbmhsm.sto~ ~override~	//Book Merchant
		ADD_STORE_ITEM ~dtkdance.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
			ADD_STORE_ITEM ~dtkdance.itm~ #0 #0 #0 ~IDENTIFIED~ #2
				COPY_EXISTING ~jayes.sto~ ~override~	//Jayes
				ADD_STORE_ITEM ~dtkdance.itm~ #0 #0 #0 ~IDENTIFIED~ #1
					COPY_EXISTING ~suelf10.sto~ ~override~	//Temple of Rillifane
					ADD_STORE_ITEM ~dtkdance.itm~ #0 #0 #0 ~IDENTIFIED~ #2
						EXTEND_BOTTOM ~ar0602.bcs~ ~sod2bg2_iu/scripts/ar0602b.baf~	//Add scoll to bookshelf
							EXTEND_BOTTOM ~ar5405.bcs~ ~sod2bg2_iu/scripts/ar5405b.baf~	//Add scoll to treasure chest
								EXTEND_BOTTOM ~ar1301.bcs~ ~sod2bg2_iu/scripts/ar1301b.baf~	//Add scoll to chest
									COPY_EXISTING ~bernard.sto~ ~override~	//Copper Coronet
									ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1	
						END


///////////////////////////////////////////////////////
/////////////////Darkness 15' Radius///////////////////
///////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_DARKNESS_15_FOOT~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkdarkn.spl~ 2 2 WIZARD_DARKNESS_15_FOOT
    LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3021 // Spell Name
	SAY NAME2 @3021
	SAY UNIDENTIFIED_DESC @3022  // Spell description
	SAY DESC @3022
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
	  COPY ~sod2bg2_iu/spl/dtkdarkn.spl~ ~override~		//second copy for item use, prevents problems, allows variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
		SAY NAME1 @3021 // Spell Name
		SAY NAME2 @3021
		SAY UNIDENTIFIED_DESC @3022  // Spell description
		SAY DESC @3022
		LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = dtkdarkn END
		END
	
COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdarkn.itm~
    SAY NAME2 @3021
    SAY DESC @3022
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT4 target_hdr = 4 range = 30 price = 450 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

ACTION_IF GAME_IS ~eet~ BEGIN //Modifies existing for EET games
  ADD_SPELL ~sod2bg2_iu/spl/dtkdarkn.spl~ 2 3 WIZARD_DARKNESS_15_FOOT	//adding first as different level to remove existing - this fixes spell for sorc spell progression
  ADD_SPELL ~sod2bg2_iu/spl/dtkdarkn.spl~ 2 2 WIZARD_DARKNESS_15_FOOT	//adding second time - removes previous and restores correct level and allows sorc to learn
    LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3021 // Spell Name
	SAY NAME2 @3021
	SAY UNIDENTIFIED_DESC @3022  // Spell description
	SAY DESC @3022
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
	  COPY ~sod2bg2_iu/spl/dtkdarkn.spl~ ~override~		//second copy for item use, prevents problems, allows variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
		SAY NAME1 @3021 // Spell Name
		SAY NAME2 @3021
		SAY UNIDENTIFIED_DESC @3022  // Spell description
		SAY DESC @3022
		LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = dtkdarkn END
			COPY_EXISTING ~bdscrl2a.itm~ ~override~
				WRITE_ASCII 0x3a dtkdarka
				LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 STR_VAR icon = dtkdarka END
				LPF ALTER_ITEM_HEADER INT_VAR header = 2 STR_VAR icon = dtkdarka END
				LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 STR_VAR resource = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 147 STR_VAR resource = EVAL ~%current_spell_res%~ END
				END	
		
ACTION_IF GAME_IS ~eet~ BEGIN	// placing scrolls for EET games
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
				COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
				ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
					COPY_EXISTING ~ohbmhsm.sto~ ~override~	//Book Merchant
					ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
						COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
						ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2
							COPY_EXISTING ~bpding01.sto~ ~override~	//Dinguer the Mad
							ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2							
								EXTEND_BOTTOM ~ar0602.bcs~ ~sod2bg2_iu/scripts/ar0602c.baf~	//Add scoll to bookshelf
									EXTEND_BOTTOM ~ar1303.bcs~ ~sod2bg2_iu/scripts/ar1303a.baf~	//Add scoll to chest
										COPY_EXISTING ~baeloth.cre~ ~override~
										ADD_CRE_ITEM ~bdscrl2a~ #0 #0 #0 ~NONE~ ~INV~		//add to inventory
											COPY_EXISTING ~tranzi.cre~ ~override~
											ADD_CRE_ITEM ~bdscrl2a~ #0 #0 #0 ~NONE~ ~INV~		//add to inventory
												COPY_EXISTING ~jayes.sto~ ~override~	//Jayes
												ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1
													COPY_EXISTING ~suelf10.sto~ ~override~	//Temple of Rillifane
													ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2
														COPY_EXISTING ~bernard.sto~ ~override~	//Copper Coronet
														ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1
										END
								
ACTION_IF GAME_IS ~bg2ee~ BEGIN	// placing scrolls for BG2EE games
	COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
	ADD_STORE_ITEM ~dtkdarkn.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~ohbmhsm.sto~ ~override~	//Book Merchant
		ADD_STORE_ITEM ~dtkdarkn.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
			ADD_STORE_ITEM ~dtkdarkn.itm~ #0 #0 #0 ~IDENTIFIED~ #2
				COPY_EXISTING ~jayes.sto~ ~override~	//Jayes
				ADD_STORE_ITEM ~dtkdarkn.itm~ #0 #0 #0 ~IDENTIFIED~ #1
					COPY_EXISTING ~suelf10.sto~ ~override~	//Temple of Rillifane
					ADD_STORE_ITEM ~dtkdarkn.itm~ #0 #0 #0 ~IDENTIFIED~ #1
						EXTEND_BOTTOM ~ar0602.bcs~ ~sod2bg2_iu/scripts/ar0602d.baf~	//Add scoll to bookshelf
							EXTEND_BOTTOM ~ar1303.bcs~ ~sod2bg2_iu/scripts/ar1303b.baf~	//Add scoll to chest
								COPY_EXISTING ~bernard.sto~ ~override~	//Copper Coronet
								ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #1
						END

//////////////////////////////////////////////////////			
/////////////////Faerie Fire//////////////////////////
//////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_FAERIE_FIRE~) BEGIN

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@5066) STR_VAR bam_file = dtkfaerp RET icon END
	ADD_SPELL ~sod2bg2_iu/spl/dtkfaeri.spl~ 1 1 CLERIC_FAERIE_FIRE
	LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkfaeri%" STR_VAR icon = dtkfaerb END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3023 // Spell Name
		SAY NAME2 @3023
		SAY UNIDENTIFIED_DESC @3024  // Spell description
		SAY DESC @3024
		WRITE_ASCII 0x3a dtkfaerc
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3023) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 206 STR_VAR resource = EVAL ~%current_spell_res%~ END
						LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
		END
		
COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkfaeri.itm~
    SAY NAME2 @3023
    SAY DESC @3024
    LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 30 price = 375 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
		
ACTION_IF GAME_IS ~eet~ BEGIN //Modifies existing scroll and spell for EET games
	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@5066) STR_VAR bam_file = dtkfaerp RET icon END
	ADD_SPELL ~sod2bg2_iu/spl/dtkfaeri.spl~ 1 2 CLERIC_FAERIE_FIRE		//adding to different level to clear spell.ids reference - fixes priest spell table so they can use
	ADD_SPELL ~sod2bg2_iu/spl/dtkfaeri.spl~ 1 1 CLERIC_FAERIE_FIRE		//adding second time to restore correct level 
	LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkfaeri%" STR_VAR icon = dtkfaerb END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3023 // Spell Name
		SAY NAME2 @3023
		SAY UNIDENTIFIED_DESC @3024  // Spell description
		SAY DESC @3024
		WRITE_ASCII 0x3a dtkfaerc
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3023) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 206 STR_VAR resource = EVAL ~%current_spell_res%~ END
						LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
							COPY_EXISTING ~bdscrl1b.itm~ ~override~
								WRITE_ASCII 0x3a dtkfaera
								LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 STR_VAR icon = dtkfaera END
								LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 range = 30 STR_VAR resource = EVAL ~%current_spell_res%~ END
								END	

ACTION_IF GAME_IS ~eet~ BEGIN	// placing scrolls for EET games
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
				COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
				ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
					COPY_EXISTING ~ohbmolza.sto~ ~override~	//Molzahn of Tymora
					ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2
						COPY_EXISTING ~ohnprie1.sto~ ~override~	//Molzahn of Tymora
						ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2
							COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
							ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2
								COPY_EXISTING ~bpding01.sto~ ~override~	//Dinguer the Mad
								ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2
									COPY_EXISTING ~bdpolvi.sto~ ~override~	//Crusader Priest Polvi
									ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2	
										COPY_EXISTING ~sahpr1.sto~ ~override~	//Temple of Sekloha
										ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2	
							END
						
ACTION_IF GAME_IS ~bg2ee~ BEGIN	// placing scrolls for BG2EE games
	COPY_EXISTING ~scrolls.sto~ ~override~	//Lady Yuth
	ADD_STORE_ITEM ~dtkfaeri.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~ohbmolza.sto~ ~override~	//Molzahn of Tymora
		ADD_STORE_ITEM ~dtkfaeri.itm~ #0 #0 #0 ~IDENTIFIED~ #2
			COPY_EXISTING ~ohnprie1.sto~ ~override~	//Molzahn of Tymora
			ADD_STORE_ITEM ~dtkfaeri.itm~ #0 #0 #0 ~IDENTIFIED~ #2
				COPY_EXISTING ~ohnscrme.sto~ ~override~	//Merchant
				ADD_STORE_ITEM ~dtkfaeri.itm~ #0 #0 #0 ~IDENTIFIED~ #2
					COPY_EXISTING ~sahpr1.sto~ ~override~	//Temple of Sekloha
					ADD_STORE_ITEM ~dtkfaeri.itm~ #0 #0 #0 ~IDENTIFIED~ #2					
						END


///////////////////////////////////////////////////////////
///////////////////////Shining Bolt///////////////////////
//////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~INNATE_SHINING_BOLT~) BEGIN

	ADD_SPELL ~sod2bg2_iu/spl/bdcaela4.spl~ 4 1 INNATE_SHINING_BOLT
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkshblt%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3025 // Spell Name
		SAY NAME2 @3025
		SAY UNIDENTIFIED_DESC @3026  // Spell description
		SAY DESC @3026
		END
	COPY_EXISTING ~spin678.spl~ ~override~	//Adds spell to reward given to Anomen for completing quest
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 147 target = 1 timing = 1 probability1 = 100 STR_VAR resource = EVAL ~%current_spell_res%~ END
		BUT_ONLY

//////////////////////////		
//////////////////////////
//Adding New Spells //////
//////////////////////////
//////////////////////////

////////////////////////////////////////////
/////////////Grasping Shadows///////////////
////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_GRASPING_SHADOWS~) BEGIN

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3044) STR_VAR bam_file = dtkgshdp RET icon END	//grasping shadows
	ADD_SPELL ~sod2bg2_iu/spl/dtkgshd.spl~ 1 4 CLERIC_GRASPING_SHADOWS
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3044 // Spell Name
		SAY NAME2 @3044
		SAY UNIDENTIFIED_DESC @3045  // Spell description
		SAY DESC @3045
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			COPY ~sod2bg2_iu/spl/dtkgshd2.spl~ ~override~	//second portion for visual effect
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd2%" END	
			SAY NAME1 @3044 // Spell Name
			SAY NAME2 @3044
			SAY UNIDENTIFIED_DESC @3045  // Spell description
			SAY DESC @3045
				COPY ~sod2bg2_iu/spl/dtkgshd.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3044 // Spell Name
				SAY NAME2 @3044
				SAY UNIDENTIFIED_DESC @3045  // Spell description
				SAY DESC @3045
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd%" END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 102 parameter2 = icon END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3044) END

END


///////////////////////////////////////////////////////////
/////////////////Caustic Quagmire//////////////////////////
///////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CAUSTIC_QUAGMIRE~) BEGIN

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3042) STR_VAR bam_file = dtkcqugp RET icon END
	ADD_SPELL ~sod2bg2_iu/spl/dtkcquag.spl~ 1 4 CLERIC_CAUSTIC_QUAGMIRE
	LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcquag%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3042 // Spell Name
		SAY NAME2 @3042
		SAY UNIDENTIFIED_DESC @3043  // Spell description
		SAY DESC @3043
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			COPY ~sod2bg2_iu/spl/dtkcqugx.spl~ ~override~
			SAY NAME1 @3042 // Spell Name
			SAY NAME2 @3042
			SAY UNIDENTIFIED_DESC @3043  // Spell description
			SAY DESC @3043
				COPY ~sod2bg2_iu/spl/dtkcqugy.spl~ ~override~
				SAY NAME1 @3042 // Spell Name
				SAY NAME2 @3042
				SAY UNIDENTIFIED_DESC @3043  // Spell description
				SAY DESC @3043
					COPY ~sod2bg2_iu/spl/dtkcqugz.spl~ ~override~
					LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcqug2%" END
					SAY NAME1 @3042 // Spell Name
					SAY NAME2 @3042
					SAY UNIDENTIFIED_DESC @3043  // Spell description
					SAY DESC @3043
						COPY ~sod2bg2_iu/spl/dtkcquag.spl~ ~override~		//second copy for item use, avoid conflicts and allows for variations
						LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcquag%" END
						SAY NAME1 @3042 // Spell Name
						SAY NAME2 @3042
						SAY UNIDENTIFIED_DESC @3043  // Spell description
						SAY DESC @3043
						LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
	END

////////////////////////////////////////////
////////////Conjure Death///////////////////
////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CONJURE_DEATH~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcdea1.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtkcdea2.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtkcdea3.2da~ ~override~

  ADD_SPELL ~sod2bg2_iu/spl/dtkcdeat.spl~ 2 6 WIZARD_CONJURE_DEATH
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3002  // Spell Name
	SAY NAME2 @3002
	SAY UNIDENTIFIED_DESC @3003  // Spell description
	SAY DESC @3003
    END

COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcdeat.itm~
    SAY NAME2 @3002
    SAY DESC @3003
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 35 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

////////////////////////////////////////////		
/////////////Thunder Thrust/////////////////
////////////////////////////////////////////
		
ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_THUNDER_THRUST~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkthrst.spl~ 2 5 WIZARD_THUNDER_THRUST
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3005  // Spell Name
	SAY NAME2 @3005
	SAY UNIDENTIFIED_DESC @3006  // Spell description
	SAY DESC @3006
		COPY ~sod2bg2_iu/spl/dtkthrst.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3005  // Spell Name
			SAY NAME2 @3005
			SAY UNIDENTIFIED_DESC @3006  // Spell description
			SAY DESC @3006
    END
	
COPY ~sod2bg2_iu/spl/dtktrstx.spl~ ~override~	//Component needed for Thunder Thrust
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkthrs1%" END
COPY ~sod2bg2_iu/spl/dtktrsty.spl~ ~override~	//Component needed for Thunder Thrust
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkthrs2%" END
  
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkthrst.itm~
    SAY NAME2 @3005
    SAY DESC @3006
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 80 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 END

////////////////////////////////////////////////////
//////////////Trollkiller's Fireball////////////////
////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_TROLLKILLERS_FIREBALL~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkfball.spl~ 2 4 WIZARD_TROLLKILLERS_FIREBALL
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkfball%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3008  // Spell Name
	SAY NAME2 @3008
	SAY UNIDENTIFIED_DESC @3009  // Spell description
	SAY DESC @3009
    END
	
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4027) STR_VAR bam_file = dtkshrdd RET icon END
COPY ~sod2bg2_iu/spl/dtkfbal2.spl~ ~override~	//Trollkiller's Fireball - static charge
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4027) END
  
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkfball.itm~
    SAY NAME2 @3008
    SAY DESC @3009
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 40 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

////////////////////////////////////////
////////////Hoar of Frost///////////////
////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_HOAR_OF_FROST~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4001) STR_VAR bam_file = dtkfroze RET icon END
  ADD_SPELL ~sod2bg2_iu/spl/dtkhoarf.spl~ 1 7 CLERIC_HOAR_OF_FROST
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkhoar1%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3010  // Spell Name
	SAY NAME2 @3010
	SAY UNIDENTIFIED_DESC @3011  // Spell description
	SAY DESC @3011
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
		COPY ~sod2bg2_iu/spl/dtkhoarf.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkhoar1%" END
			SAY NAME1 @3010  // Spell Name
			SAY NAME2 @3010
			SAY UNIDENTIFIED_DESC @3011  // Spell description
			SAY DESC @3011
			LPF ALTER_EFFECT INT_VAR match_opcode = 12 match_parameter1 = 14 parameter1 = 0 dicenumber = 8 dicesize = 5 END
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
				
//////////////////////////different spell below to take advantage of pre-loaded new portrait icon that is shared so we dont have to add it twice
				COPY ~sod2bg2_iu/spl/dtkicel.spl~ ~override~
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkicel%" END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 205 parameter2 = icon END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
    END
	
  COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkhoarf.itm~
    SAY NAME2 @3010
    SAY DESC @3011
    LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 12 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END


///////////////////////////////////
////////Penetrating Cold///////////
///////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_PENETRATING_COLD~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkpenc.spl~ 1 7 CLERIC_PENETRATING_COLD
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3050  // Spell Name
	SAY NAME2 @3050
	SAY UNIDENTIFIED_DESC @3051  // Spell description
	SAY DESC @3051
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1266 parameter1 = RESOLVE_STR_REF(@4001) END
		  COPY ~sod2bg2_iu/spl/dtkpenc2.spl~ ~override~		
		  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc2%" END
			SAY NAME1 @3050  // Spell Name
			SAY NAME2 @3050
			SAY UNIDENTIFIED_DESC @3051  // Spell description
			SAY DESC @3051
				  COPY ~sod2bg2_iu/spl/dtkpenc3.spl~ ~override~	
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc3%" END
					SAY NAME1 @3050  // Spell Name
					SAY NAME2 @3050
					SAY UNIDENTIFIED_DESC @3051  // Spell description
					SAY DESC @3051

		COPY ~sod2bg2_iu/spl/dtkpenc.spl~ ~override~		//second copy for item use, prevents issues, allows for variances
		  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc%" END
		  	SAY NAME1 @3050  // Spell Name
			SAY NAME2 @3050
			SAY UNIDENTIFIED_DESC @3051  // Spell description
			SAY DESC @3051
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1266 parameter1 = RESOLVE_STR_REF(@4001) END
			
END


////////////////////////////
////////Corrosion///////////
////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CORROSION~) BEGIN
  LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4023) STR_VAR bam_file = dtkcorrp RET icon END
  ADD_SPELL ~sod2bg2_iu/spl/dtkcorro.spl~ 2 7 WIZARD_CORROSION
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcorro%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3012  // Spell Name
	SAY NAME2 @3012
	SAY UNIDENTIFIED_DESC @3013  // Spell description
	SAY DESC @3013
    END
	
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcorro.itm~
    SAY NAME2 @3012
    SAY DESC @3013
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

//////////////////////////////////////////////////////////////////
////////////////////////Infernal Bone Shield//////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_INFERNAL_BONE_SHIELD~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3029) STR_VAR bam_file = dtkdebnp RET icon END 
ADD_SPELL ~sod2bg2_iu/spl/dtkdebn.spl~ 2 4 WIZARD_INFERNAL_BONE_SHIELD	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3029
	SAY NAME2 @3029
	SAY UNIDENTIFIED_DESC @3030
	SAY DESC @3030
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
	END
		COPY ~sod2bg2_iu/spl/dtkdebnx.spl~ ~override~	
		SAY NAME1 @3029
		SAY NAME2 @3029
		SAY UNIDENTIFIED_DESC @3030
		SAY DESC @3030
			COPY ~sod2bg2_iu/spl/dtkdebn.spl~ ~override~	//second copy for item use, prevents issues
			SAY NAME1 @3029
			SAY NAME2 @3029
			SAY UNIDENTIFIED_DESC @3030
			SAY DESC @3030
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdebn.itm~
				SAY NAME2 @3029
				SAY DESC @3030
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 5 range = 40 price = 1700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 1 END

///////////////////////////////////////////////////////			
////////////////////////Fell Rage//////////////////////
///////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FELL_RAGE~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3031) STR_VAR bam_file = dtkfergp RET icon END 
ADD_SPELL ~sod2bg2_iu/spl/dtkferg.spl~ 2 5 WIZARD_FELL_RAGE
	SPRINT current_spell_res "%DEST_RES%"	
  	SAY NAME1 @3031
	SAY NAME2 @3031
	SAY UNIDENTIFIED_DESC @3032
	SAY DESC @3032
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35544 parameter1 = RESOLVE_STR_REF(@4057) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17392 parameter1 = RESOLVE_STR_REF(@4058) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37801 parameter1 = RESOLVE_STR_REF(@4059) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = RESOLVE_STR_REF(@4060) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = RESOLVE_STR_REF(@4061) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = RESOLVE_STR_REF(@4056) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = RESOLVE_STR_REF(@4018) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14043 parameter1 = RESOLVE_STR_REF(@4062) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1280 parameter1 = RESOLVE_STR_REF(@4017) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37603 parameter1 = RESOLVE_STR_REF(@4063) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37604 parameter1 = RESOLVE_STR_REF(@4064) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14102 parameter1 = RESOLVE_STR_REF(@4065) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = RESOLVE_STR_REF(@4066) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = RESOLVE_STR_REF(@4065) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 STR_VAR resource = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 33 STR_VAR resource = EVAL ~%current_spell_res%~ END
		END
			COPY ~sod2bg2_iu/spl/dtkferg.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3031
			SAY NAME2 @3031
			SAY UNIDENTIFIED_DESC @3032
			SAY DESC @3032
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
			LPF DELETE_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 END
				COPY ~sod2bg2_iu/spl/dtkferg.spl~ ~override/dtkferg2.spl~	//third copy for item use, prevents issues, allows for variances
				SAY NAME1 @3031
				SAY NAME2 @3031
				SAY UNIDENTIFIED_DESC @3032
				SAY DESC @3032
				LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				LPF DELETE_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 3 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 328 match_parameter2 = 35 END
					COPY ~sod2bg2_iu/spl/dtkfergx.spl~ ~override~	//spell component required for melee hit effect
					SAY NAME1 @3031
					SAY NAME2 @3031
					SAY UNIDENTIFIED_DESC @3032
					SAY DESC @3032
						COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkferg.itm~
						SAY NAME2 @3031
						SAY DESC @3032
						LPF dtk_scroll INT_VAR opcode = 148 unusable0 = BIT2 + BIT7 +BIT9 + BIT10 + BIT11 + BIT12 +BIT14 + BIT17 + BIT20 + BIT21 + BIT22 + BIT29 + BIT30 unusable2 = BIT6 target_hdr = 1 range = 40 price = 1900 STR_VAR spell = EVAL ~%current_spell_res%~ END
						LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 2 END

///////////////////////////////////////////////////////////
//////////////////////Shadow Bolt\\\\\\\\\\\\\\\\\\\\\\\\\\
///////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SHADOW_BOLT~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtksblt.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtksblt2.pro~

  // ADD_PROJECTILE won't add multiple versions of the same projectile, but it's needed for this spell's special projectile chain - do it manually
  OUTER_FOR (index = (dtksblt2) ; index < (dtksblt2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtksblt2~
  
  END

  ADD_SPELL ~sod2bg2_iu/spl/dtksblt.spl~ 1 5 CLERIC_SHADOW_BOLT
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3033
	SAY NAME2 @3033
	SAY UNIDENTIFIED_DESC @3034
	SAY DESC @3034
		LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtksblt + 4) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtksblt + 4) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			COPY ~sod2bg2_iu/spl/dtksblt.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3033
				SAY NAME2 @3033
				SAY UNIDENTIFIED_DESC @3034
				SAY DESC @3034
					LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtksblt + 4) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtksblt + 4) END
						COPY ~sod2bg2_iu/spl/dtksblt2.spl~ ~override~	//second spell component for area effect
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksbltx%" END
						SAY NAME1 @3033
						SAY NAME2 @3033
						SAY UNIDENTIFIED_DESC @3034
						SAY DESC @3034
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1100 parameter1 = RESOLVE_STR_REF(@4024) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1110 parameter1 = RESOLVE_STR_REF(@4067) END

						
  COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtksblt.itm~
    SAY NAME2 @3033
    SAY DESC @3034
    LPF dtk_scroll INT_VAR opcode = 146 target_hdr = 1 range = 100 price = 1500 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 18 END
	
						
END



/////////////////////////////////////////////////////////////////////////
//////////////////////Ko'Dezza's Multi-Fireball\\\\\\\\\\\\\\\\\\\\\\\\\\
/////////////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_MULTI_FIREBALL~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfbl.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfbl2.pro~
  
  OUTER_FOR (index = (dtkdfbl2) ; index < (dtkdfbl2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtkdfbl2~
  
  END


  ADD_SPELL ~sod2bg2_iu/spl/dtkdfbl.spl~ 2 7 WIZARD_MULTI_FIREBALL
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3040
	SAY NAME2 @3040
	SAY UNIDENTIFIED_DESC @3041
	SAY DESC @3041
			LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkdfbl + 1) END	//14
			LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkdfbl + 1) END	//15
			LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkdfbl + 1) END	//16
			LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkdfbl + 1) END	//17
			LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkdfbl + 2) END	//18
			LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkdfbl + 2) END	//19
			LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkdfbl + 2) END	//20
			LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkdfbl + 2) END	//21
			LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkdfbl + 3) END	//22
			LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkdfbl + 3) END	//23
			LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkdfbl + 3) END	//24
				COPY ~sod2bg2_iu/spl/dtkdfbl.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3040
					SAY NAME2 @3040
					SAY UNIDENTIFIED_DESC @3041
					SAY DESC @3041
						LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkdfbl + 1) END	//14
						LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkdfbl + 1) END	//15
						LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkdfbl + 1) END	//16
						LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkdfbl + 1) END	//17
						LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkdfbl + 2) END	//18
						LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkdfbl + 2) END	//19
						LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkdfbl + 2) END	//20
						LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkdfbl + 2) END	//21
						LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkdfbl + 3) END	//22
						LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkdfbl + 3) END	//23
						LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkdfbl + 3) END	//24
							COPY ~sod2bg2_iu/spl/dtkdfbl2.spl~ ~override~	//second spell component for area effect - required due to inability to have multiple area effect projectiles
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdfblx%" END
							SAY NAME1 @3040
							SAY NAME2 @3040
							SAY UNIDENTIFIED_DESC @3041
							SAY DESC @3041

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdfbl.itm~
    SAY NAME2 @3040
    SAY DESC @3041
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 40 price = 12000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 14 END
		
END


//////////////////////////////////////////////////////////////////
//////////////////////Ko'Dezza's Slime Golem//////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_SLIME_GOLEM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkslig.spl~ 2 5 WIZARD_SLIME_GOLEM	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3046
	SAY NAME2 @3046
	SAY UNIDENTIFIED_DESC @3047
	SAY DESC @3047
		COPY ~sod2bg2_iu/spl/dtkslig.spl~ ~override~	//second copy for item use, prevents issues
		SAY NAME1 @3046
		SAY NAME2 @3046
		SAY UNIDENTIFIED_DESC @3047
		SAY DESC @3047
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkslig.itm~
				SAY NAME2 @3046
				SAY DESC @3047
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 100 price = 7700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


//////////////////////////////////////////////////////////////////
/////////////////////////////Cataclysm////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CATACLYSM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkcata.spl~ 2 8 WIZARD_CATACLYSM
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3048
	SAY NAME2 @3048
	SAY UNIDENTIFIED_DESC @3049
	SAY DESC @3049
		COPY ~sod2bg2_iu/spl/dtkcata.spl~ ~override~	//second copy for item use, prevents issues
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata%" END
		SAY NAME1 @3048
		SAY NAME2 @3048
		SAY UNIDENTIFIED_DESC @3049
		SAY DESC @3049
			COPY ~sod2bg2_iu/spl/dtkcata2.spl~ ~override~	//second spell component for visual effect
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata2%" END
			SAY NAME1 @3048
			SAY NAME2 @3048
			SAY UNIDENTIFIED_DESC @3049
			SAY DESC @3049
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcata.itm~
				SAY NAME2 @3048
				SAY DESC @3049
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT0 target_hdr = 4 range = 100 price = 7700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


//////////////////////////////////////////////////////////////////
/////////////////////////////Maelstrom////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_MAELSTROM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkmael.spl~ 2 8 WIZARD_MAELSTROM
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkmael%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3052
	SAY NAME2 @3052
	SAY UNIDENTIFIED_DESC @3053
	SAY DESC @3053
	COPY ~sod2bg2_iu/spl/dtkmael2.spl~ ~override~	//secondary component 
		SAY NAME1 @3052
		SAY NAME2 @3052
		SAY UNIDENTIFIED_DESC @3053
		SAY DESC @3053
			COPY ~sod2bg2_iu/spl/dtkmael.spl~ ~override~	
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkmael%" END
			SAY NAME1 @3052
			SAY NAME2 @3052
			SAY UNIDENTIFIED_DESC @3053
			SAY DESC @3053
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkmael.itm~
				SAY NAME2 @3052
				SAY DESC @3053
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 100 price = 8900 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

///////////////////////////////////
////////Shar's Embrace/////////////
///////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SHAR_EMBRACE~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkeshr.spl~ 1 6 CLERIC_SHAR_EMBRACE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3056  // Spell Name
	SAY NAME2 @3056
	SAY UNIDENTIFIED_DESC @3057  // Spell description
	SAY DESC @3057
		COPY ~sod2bg2_iu/spl/dtkeshr2.spl~ ~override~		//secondary component
		SAY NAME1 @3056  // Spell Name
		SAY NAME2 @3056
		SAY UNIDENTIFIED_DESC @3057  // Spell description
		SAY DESC @3057
			COPY ~sod2bg2_iu/spl/dtkeshr3.spl~ ~override~		//tertiary component
			SAY NAME1 @3056  // Spell Name
			SAY NAME2 @3056
			SAY UNIDENTIFIED_DESC @3057  // Spell description
			SAY DESC @3057
				COPY ~sod2bg2_iu/spl/dtkeshr.spl~ ~override~		//secondary copy for item use, prevent's issues allows for variances
				SAY NAME1 @3056  // Spell Name
				SAY NAME2 @3056
				SAY UNIDENTIFIED_DESC @3057  // Spell description
				SAY DESC @3057
		
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Holocaust////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_HOLOCAUST~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkholo.spl~ 2 8 WIZARD_HOLOCAUST
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkholo%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3058
	SAY NAME2 @3058
	SAY UNIDENTIFIED_DESC @3059
	SAY DESC @3059
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 321 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkholo.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkholo%" END
		SAY NAME1 @3058
		SAY NAME2 @3058
		SAY UNIDENTIFIED_DESC @3059
		SAY DESC @3059
			COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkholo.itm~
			SAY NAME2 @3058
			SAY DESC @3059
			LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 100 price = 8666 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Ent Summoning////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_ENT_SUMMON~) BEGIN

COPY ~sod2bg2_iu/2da/dtktren1.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtktren2.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtktren3.2da~ ~override~

ADD_SPELL ~sod2bg2_iu/spl/dtktren.spl~ 1 5 CLERIC_ENT_SUMMON
	  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3060
	SAY NAME2 @3060
	SAY UNIDENTIFIED_DESC @3061
	SAY DESC @3061
		COPY ~sod2bg2_iu/spl/dtktren.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		SAY NAME1 @3060
		SAY NAME2 @3060
		SAY UNIDENTIFIED_DESC @3061
		SAY DESC @3061
			COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtktren.itm~
			SAY NAME2 @3060
			SAY DESC @3061
			LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 2500 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Crushing Earth///////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CRUSHING_EARTH~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkcrus.spl~ 1 6 CLERIC_CRUSHING_EARTH
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcrus%" END
	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3062
	SAY NAME2 @3062
	SAY UNIDENTIFIED_DESC @3063
	SAY DESC @3063
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkcrus1.spl~ ~override~	//secondary component
		SAY NAME1 @3062
		SAY NAME2 @3062
		SAY UNIDENTIFIED_DESC @3063
		SAY DESC @3063
			COPY ~sod2bg2_iu/spl/dtkcrus2.spl~ ~override~	//tertiary component
			SAY NAME1 @3062
			SAY NAME2 @3062
			SAY UNIDENTIFIED_DESC @3063
			SAY DESC @3063
				COPY ~sod2bg2_iu/spl/dtkcrus.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcrus%" END
				SAY NAME1 @3062
				SAY NAME2 @3062
				SAY UNIDENTIFIED_DESC @3063
				SAY DESC @3063
					COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkcrus.itm~
					SAY NAME2 @3062
					SAY DESC @3063
					LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 3500 STR_VAR spell = EVAL ~%current_spell_res%~ END
					LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
		END
		

//////////////////////////////////////////////////////////////////
///////////////////Ko'Dezza's Caustic Shell///////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CAUSTIC_SHELL~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@5031) STR_VAR bam_file = dtkcausp RET icon END
ADD_SPELL ~sod2bg2_iu/spl/dtkcaus.spl~ 2 3 WIZARD_CAUSTIC_SHELL	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3064
	SAY NAME2 @3064
	SAY UNIDENTIFIED_DESC @3065
	SAY DESC @3065
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		COPY ~sod2bg2_iu/spl/dtkcaus2.spl~ ~override~	//secondary component
		SAY NAME1 @3064
		SAY NAME2 @3064
		SAY UNIDENTIFIED_DESC @3065
		SAY DESC @3065
			COPY ~sod2bg2_iu/spl/dtkcaus.spl~ ~override~	//second copy for item use, prevents issues
			SAY NAME1 @3064
			SAY NAME2 @3064
			SAY UNIDENTIFIED_DESC @3065
			SAY DESC @3065
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcaus.itm~
				SAY NAME2 @3064
				SAY DESC @3065
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 5 range = 40 price = 1337 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 1 END		
				
END

//////////////////////////////////////////////////////////////////
/////////////////////////Antipode/////////////////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_ANTIPODE~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkanti1.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkanti2.pro~
  

  ADD_SPELL ~sod2bg2_iu/spl/dtkanti.spl~ 2 6 WIZARD_ANTIPODE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3066
	SAY NAME2 @3066
	SAY UNIDENTIFIED_DESC @3067
	SAY DESC @3067
	LPF ALTER_SPELL_HEADER INT_VAR projectile = (dtkanti1 + 1) END
				COPY ~sod2bg2_iu/spl/dtkanti.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3066
					SAY NAME2 @3066
					SAY UNIDENTIFIED_DESC @3067
					SAY DESC @3067
					LPF ALTER_SPELL_HEADER INT_VAR projectile = (dtkanti1 + 1) END
							COPY ~sod2bg2_iu/spl/dtkanti2.spl~ ~override~	//second spell component for area effect - required due to inability to have multiple area effect projectiles
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkantix%" END
							SAY NAME1 @3066
							SAY NAME2 @3066
							SAY UNIDENTIFIED_DESC @3067
							SAY DESC @3067

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkanti.itm~
    SAY NAME2 @3066
    SAY DESC @3067
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 40 price = 12000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 16 END
		
END


//////////////////////////////////////////////////////////////////
/////////////////////////Flame Vortice////////////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FLAME_VORTICE~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkfwhi.spl~ 2 6 WIZARD_FLAME_VORTICE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3068
	SAY NAME2 @3068
	SAY UNIDENTIFIED_DESC @3069
	SAY DESC @3069
	LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkfwhi END
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 206 STR_VAR resource = EVAL ~%current_spell_res%~ END
				COPY ~sod2bg2_iu/spl/dtkfwhi.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3068
					SAY NAME2 @3068
					SAY UNIDENTIFIED_DESC @3069
					SAY DESC @3069
					LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkfwhi END

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkfwhi.itm~
    SAY NAME2 @3068
    SAY DESC @3069
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 6000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 parameter1 = 16 END
		
END


/////////////////////////////////////////////////////////////////////////
//////////////////////Sundering Vitriol\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
/////////////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SUNDERING_VITRIOL~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvit.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvit2.pro~
  
  OUTER_FOR (index = (dtkvit2) ; index < (dtkvit2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtkvit2~
  
  END


  ADD_SPELL ~sod2bg2_iu/spl/dtkvit.spl~ 1 2 CLERIC_SUNDERING_VITRIOL
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3070
	SAY NAME2 @3070
	SAY UNIDENTIFIED_DESC @3071
	SAY DESC @3071
			LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkvit + 1) END	//6
			LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkvit + 1) END	//7
			LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkvit + 1) END	//8
			LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkvit + 1) END	//9
			LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkvit + 2) END	//10
			LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkvit + 2) END	//11
			LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkvit + 2) END	//12
			LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkvit + 2) END	//13
			LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkvit + 3) END	//14
			LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkvit + 3) END	//15
			LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkvit + 3) END	//16
			LPF ALTER_SPELL_HEADER INT_VAR header = 15 projectile = (dtkvit + 4) END	//17
			LPF ALTER_SPELL_HEADER INT_VAR header = 16 projectile = (dtkvit + 4) END	//18
			LPF ALTER_SPELL_HEADER INT_VAR header = 17 projectile = (dtkvit + 4) END	//19
			LPF ALTER_SPELL_HEADER INT_VAR header = 18 projectile = (dtkvit + 5) END	//20
			LPF ALTER_SPELL_HEADER INT_VAR header = 19 projectile = (dtkvit + 5) END	//21
			LPF ALTER_SPELL_HEADER INT_VAR header = 20 projectile = (dtkvit + 5) END	//22
			LPF ALTER_SPELL_HEADER INT_VAR header = 21 projectile = (dtkvit + 6) END	//23
			LPF ALTER_SPELL_HEADER INT_VAR header = 22 projectile = (dtkvit + 6) END	//24
			LPF ALTER_SPELL_HEADER INT_VAR header = 23 projectile = (dtkvit + 6) END	//25
				LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
					COPY ~sod2bg2_iu/spl/dtkvit.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
						SAY NAME1 @3070
						SAY NAME2 @3070
						SAY UNIDENTIFIED_DESC @3071
						SAY DESC @3071
							LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkvit + 1) END	//6
							LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkvit + 1) END	//7
							LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkvit + 1) END	//8
							LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkvit + 1) END	//9
							LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkvit + 2) END	//10
							LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkvit + 2) END	//11
							LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkvit + 2) END	//12
							LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkvit + 2) END	//13
							LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkvit + 3) END	//14
							LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkvit + 3) END	//15
							LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkvit + 3) END	//16
							LPF ALTER_SPELL_HEADER INT_VAR header = 15 projectile = (dtkvit + 4) END	//17
							LPF ALTER_SPELL_HEADER INT_VAR header = 16 projectile = (dtkvit + 4) END	//18
							LPF ALTER_SPELL_HEADER INT_VAR header = 17 projectile = (dtkvit + 4) END	//19
							LPF ALTER_SPELL_HEADER INT_VAR header = 18 projectile = (dtkvit + 5) END	//20
							LPF ALTER_SPELL_HEADER INT_VAR header = 19 projectile = (dtkvit + 5) END	//21
							LPF ALTER_SPELL_HEADER INT_VAR header = 20 projectile = (dtkvit + 5) END	//22
							LPF ALTER_SPELL_HEADER INT_VAR header = 21 projectile = (dtkvit + 6) END	//23
							LPF ALTER_SPELL_HEADER INT_VAR header = 22 projectile = (dtkvit + 6) END	//24
							LPF ALTER_SPELL_HEADER INT_VAR header = 23 projectile = (dtkvit + 6) END	//25
	
END


////////////////////////////////////////////////////////////////
///////////////////////Devouring Darkness///////////////////////
////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_DEVOURING_DARKNESS~) BEGIN   //remarked out as this spell is intended to be exclusive to Viconia

	ADD_SPELL ~sod2bg2_iu/spl/dtkdevd.spl~ 1 7 CLERIC_DEVOURING_DARKNESS
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdevd%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3072 // Spell Name
		SAY NAME2 @3072
		SAY UNIDENTIFIED_DESC @3073  // Spell description
		SAY DESC @3073
			LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 30 parameter1 = RESOLVE_STR_REF(@4065) END
			LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 0 parameter1 = RESOLVE_STR_REF(@4068) END
				COPY ~sod2bg2_iu/spl/dtkdevd.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3072
				SAY NAME2 @3072
				SAY UNIDENTIFIED_DESC @3073
				SAY DESC @3073
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdevd%" END
					LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 30 parameter1 = RESOLVE_STR_REF(@4065) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 0 parameter1 = RESOLVE_STR_REF(@4068) END	

		END 



////////////////////////////////////////////////////////////////
////////////////Ko'Dezza's Frozen Death/////////////////////////
////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FROZEN_DEATH~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcosh.2da~ ~override~

  ADD_SPELL ~sod2bg2_iu/spl/dtkkfrz.spl~ 2 9 WIZARD_FROZEN_DEATH
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3074
	SAY NAME2 @3074
	SAY UNIDENTIFIED_DESC @3075
	SAY DESC @3075
	LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkkfrz END
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkkfrz.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3074
			SAY NAME2 @3074
			SAY UNIDENTIFIED_DESC @3075
			SAY DESC @3075
			LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkkfrz END

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkkfrz.itm~
    SAY NAME2 @3074
    SAY DESC @3075
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 25000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 parameter1 = 16 END
		
END


//////////////////////////////////////////////////////////////////
//////////////////Conjure Shadow Elemental////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CONJURE_SHADOW_ELEMENTAL~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcosh.2da~ ~override~


ADD_SPELL ~sod2bg2_iu/spl/dtkcosh.spl~ 1 6 CLERIC_CONJURE_SHADOW_ELEMENTAL
	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3076
	SAY NAME2 @3076
	SAY UNIDENTIFIED_DESC @3077
	SAY DESC @3077
		COPY ~sod2bg2_iu/spl/dtkcosh.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		SAY NAME1 @3076
		SAY NAME2 @3076
		SAY UNIDENTIFIED_DESC @3077
		SAY DESC @3077
			COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkcosh.itm~
			SAY NAME2 @3076
			SAY DESC @3077
			LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 3500 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


////////////////////////////////
//Adding New Spell Scoll  //////
////////////////////////////////
  
COPY ~sod2bg2_iu/itm/scrolls/dtkascrl.itm~ ~override~ 
  SAY NAME1 @3004
  SAY NAME2 @3004
  SAY UNIDENTIFIED_DESC @3007
  SAY DESC @3007


//////////////////////////
//Adding SoD Item Spells//
//////////////////////////

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbow04.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdbow04.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrd04.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdbrd04.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4004) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhalb01.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdhalb01.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdnighte.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdnighte.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4005) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsper1a.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsper1a.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4006) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsper1b.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsper1b.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4007) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdstrdrn.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdstrdrn.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 14042 parameter1 = RESOLVE_STR_REF(@4008) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1452 parameter1 = RESOLVE_STR_REF(@4009) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h02.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h02.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4010) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h08.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h08.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h21.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h21.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4011) END
END  

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdxbow01.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdxbow01.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdcrimsn.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdcrimsn.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4029) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h22.spl~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/spl/bdsw1h22.spl~ ~override~
	SAY NAME1 @4030  // Spell Name
		COPY ~sod2bg2_iu/spl/bdsevrnc.spl~ ~override~
			LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4031) END
END
			
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun04.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdblun04.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4035) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddagg05.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bddagg05.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdshld02.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdshld02.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac01.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdbrac01.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4015) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac15.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdbrac15.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdclck03.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdclck03.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdfester.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdfester.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4039) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdarow01.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdarow01.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4040) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhamm06.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdhamm06.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhamm6b.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdhamm6b.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h03.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h03.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h3b.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h3b.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdfractl.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdfractl.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4041) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h25.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw1h25.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4042) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdtrlstr.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdtrlstr.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4009) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw2h02.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw2h02.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw2h03.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdsw2h03.spl~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddoom.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bddoom.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4043) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsonef.spl~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/spl/bdstonef.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4075) END
END

/////////////////////////////
//Adding SoD items///////////
/////////////////////////////

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun04.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/martyr/bdblun04.itm~ ~override~	  //Martyr's Morningstar +2
  SAY NAME1 @2716
  SAY NAME2 @2321
  SAY UNIDENTIFIED_DESC @2718
  SAY DESC @2322
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbolt02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/icebolt/bdbolt02.itm~ ~override~	  //Bolt of Ice +1
  SAY NAME2 @2319
  SAY DESC @2320
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbolt01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/firebolt/bdbolt01.itm~ ~override~	  //Bolt of Fire +1
  SAY NAME2 @2317
  SAY DESC @2318
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bull09.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/elecbull/bull09.itm~ ~override~	  //Bullet of Electricity +1
  SAY NAME2 @2315
  SAY DESC @2316
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bull08.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/icebull/bull08.itm~ ~override~	  //Bullet of Ice +1
  SAY NAME2 @2313
  SAY DESC @2314
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bull07.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/firebull/bull07.itm~ ~override~	  //Bullet of Fire +1
  SAY NAME2 @2311
  SAY DESC @2312
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h22.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/severance/bdsw1h22.itm~ ~override~	  //Severance +2
  SAY NAME2 @2257
  SAY DESC @2258
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h01.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/crimsondawn/bdsw1h01.itm~ ~override~	//Crimson Dawn +2
  SAY NAME1 @2253
  SAY NAME2 @2254
  SAY UNIDENTIFIED_DESC @2255
  SAY DESC @2256
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h02.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/acid/bdsw1h02.itm~ ~override~ 	//Tongue of Acid +3
WRITE_ASCII 0x3a dtktocid	//new icon for tongue of acid
WRITE_ASCII 0x72 dtktocid
  SAY NAME1 @2000
  SAY NAME2 @2001
  SAY DESC @2002
END
		ACTION_IF FILE_EXISTS_IN_GAME ~bdsw1h02.itm~ BEGIN // check if already present for EET games  
		COPY_EXISTING ~bdsw1h02.itm~ ~override~ 	//Tongue of Acid +3
		WRITE_ASCII 0x3a dtktocid	//new icon for tongue of acid
		WRITE_ASCII 0x72 dtktocid
	END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdleat05.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/drag/bdleat05.itm~ ~override~ //Dragonscale Armor(Green)
  SAY NAME1 @2007
  SAY NAME2 @2008
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2010
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdboot01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/softft/bdboot01.itm~ ~override~ //Soft Feet
  SAY NAME1 @2011
  SAY NAME2 @2012
  SAY DESC @2013
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm01.itm~ BEGIN // check if already present for EET games 
COPY ~sod2bg2_iu/itm/crown/bdhelm01.itm~ ~override~ //Crown of Lies
  SAY NAME1 @2016
  SAY NAME2 @2017
  SAY UNIDENTIFIED_DESC @2018
  SAY DESC @2019
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhamm01.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/sunder/bdhamm01.itm~ ~override~ //Sundermaul +3
  SAY NAME2 @2041
  SAY DESC @2042
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdboot03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/starboot/bdboot03.itm~ ~override~	//Star-Strewn Boots
  SAY NAME1 @2011 
  SAY NAME2 @2047
  SAY DESC @2048
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/stalkg/bdbrac05.itm~ ~override~ //Stalker's Gauntlets
  SAY NAME2 @2071
  SAY DESC @2072
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbelt01.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/luckbelt/bdbelt01.itm~ ~override~	//Cloverleaf
  SAY NAME2 @2085
  SAY DESC @2086
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun06.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/cursestaff/bdblun06.itm~ ~override~	//The Uncursed Staff +1
  SAY NAME2 @2087
  SAY DESC @2088
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun07.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/backwhack/bdblun07.itm~ ~override~	//Backwhacker +2
  SAY NAME2 @2089
  SAY DESC @2090
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbow04.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/bansheebow/bdbow04.itm~ ~override~	//Bow of the Banshee +2
  SAY NAME2 @2091
  SAY DESC @2092
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/nimblef/bdbrac03.itm~ ~override~	//Nimblefinger Gloves
  SAY NAME2 @2093
  SAY DESC @2094
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrd04.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/bagpipe/bdbrd04.itm~ ~override~	//Screaming Bagpipes
  SAY NAME1 @2095
  SAY NAME2 @2096
  SAY UNIDENTIFIED_DESC @2097
  SAY DESC @2098
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbull02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/darkbull/bdbull02.itm~ ~override~	//Bullet of Darkness +3
  SAY NAME2 @2099
  SAY DESC @2100
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdarow02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/voidarrow/bdarow02.itm~ ~override~	//Void-Tipped Arrow +3
  SAY NAME2 @2101
  SAY DESC @2102
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdclck06.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/cloakarcan/bdclck06.itm~ ~override~	//Cloak of Minor Arcana
  SAY NAME2 @2103
  SAY DESC @2104
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddagg01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/eledagg/bddagg01.itm~ ~override~	//Element's Fury +2
  SAY NAME2 @2105
  SAY DESC @2106
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhalb01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/stormpike/bdhalb01.itm~ ~override~	//Storm Pike +2
  SAY NAME2 @2107
  SAY DESC @2108
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdioun01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/trollblood/bdioun01.itm~ ~override~	//Trollblood Ioun Stone
  SAY NAME1 @2408
  SAY NAME2 @2109
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2110
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdscaleg.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/greenscale/bdscaleg.itm~ ~override~ 	//Green Dragon Scales
  SAY NAME1 @2111
  SAY NAME2 @2112
  SAY UNIDENTIFIED_DESC @2113
  SAY DESC @2114
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdscaleg.itm~ BEGIN // check if already present for EET games
COPY_EXISTING ~bdscaleg.itm~ ~override~ 	//Green Dragon Scales
  SAY NAME1 @2111
  SAY NAME2 @2112
  SAY UNIDENTIFIED_DESC @2113
  SAY DESC @2114
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdshld03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/egons/bdshld03.itm~ ~override~	//Shield of Egons +2
  SAY NAME2 @2115
  SAY DESC @2116
END

//ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdshld05.itm~ BEGIN // check if already present for EET games - deprecated
//COPY ~sod2bg2_iu/itm/dragshld/bdshld05.itm~ ~override~	//Dragonscale Shield +3
  //SAY NAME2 @2117
  //SAY DESC @2118
//END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdkeyr.sto~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/sto/bdkeyr.sto~ ~override~		//Store reuired for Keyring
  SAY NAME2 @2121
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdkeyr.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/keyring/bdkeyr.itm~ ~override~	//Keyring
  SAY NAME2 @2121
  SAY DESC @2122
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdxbow01.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/astralxbow/bdxbow01.itm~ ~override~	//Astral Crossbow +2
  SAY NAME2 @2161
  SAY DESC @2162
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsper01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/shadowspear/bdsper01.itm~ ~override~	//Shadowed Spear +2
  SAY NAME2 @2163
  SAY DESC @2164
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrd01.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/forestqn/bdbrd01.itm~ ~override~ //Forest Queen's Benediction
  SAY NAME1 @2195
  SAY NAME2 @2196
  SAY UNIDENTIFIED_DESC @2197
  SAY DESC @2198
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/jester/bdbrac02.itm~ ~override~  //Jester's Bracers
  SAY NAME2 @2199
  SAY DESC @2200
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbrac02.eff~ BEGIN // check if already present for EET games
COPY_EXISTING ~bdbrac02.eff~ ~override~	//Corny jokes effect for Jester's Bracers
  SET strref = RESOLVE_STR_REF (@10000)
  WRITE_LONG 0x60 strref
  SET strref = RESOLVE_STR_REF (@10001)
  SET strref = RESOLVE_STR_REF (@10002)
  SET strref = RESOLVE_STR_REF (@10003)
  SET strref = RESOLVE_STR_REF (@10004)
  SET strref = RESOLVE_STR_REF (@10005)
  SET strref = RESOLVE_STR_REF (@10006)
  SET strref = RESOLVE_STR_REF (@10007)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdleat07.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/nightarm/bdleat07.itm~ ~override~ //The Night's Embrace +3
  SAY NAME2 @2201
  SAY DESC @2202
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdring10.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/ringpurity/bdring10.itm~ ~override~ 	//Ring of Purity
  SAY NAME2 @2207
  SAY DESC @2208
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h08.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/dervish/bdsw1h08.itm~ ~override~ 	//Dervish Crescent +2
  SAY NAME1 @2672
  SAY NAME2 @2211
  SAY UNIDENTIFIED_DESC @2673
  SAY DESC @2212
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm15.itm~ BEGIN // check if already present for EET games  
COPY ~sod2bg2_iu/itm/focusband/bdhelm15.itm~ ~override~	//Headband of Focus
  SAY NAME1 @2215
  SAY NAME2 @2216
  SAY UNIDENTIFIED_DESC @2217
  SAY DESC @2218
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm12.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/wizzard/bdhelm12.itm~ ~override~	//Wizzard Hat
  SAY NAME1 @2219
  SAY NAME2 @2220
  SAY UNIDENTIFIED_DESC @2221
  SAY DESC @2222
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddagg05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/aciddagg/bddagg05.itm~ ~override~	//Acid-Etched Dagger +2
  SAY NAME2 @2341
  SAY DESC @2342
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdshld02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/suncatcher/bdshld02.itm~ ~override~	//The Suncatcher +2
  SAY NAME1 @2449
  SAY NAME2 @2343
  SAY UNIDENTIFIED_DESC @2450
  SAY DESC @2344
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm04.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/guarddevil/bdhelm04.itm~ ~override~	//The Guardian Devil
  SAY NAME1 @2720
  SAY NAME2 @2345
  SAY UNIDENTIFIED_DESC @2722
  SAY DESC @2346
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdmisc10.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/reedecho/bdmisc10.itm~ ~override~	//Reed of Echoes
  SAY NAME1 @2347
  SAY NAME2 @2348
  SAY UNIDENTIFIED_DESC @2349
  SAY DESC @2350
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdstaf03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/echofiend/bdstaf03.itm~ ~override~	//Echo of the Fiend +3
  SAY NAME2 @2351
  SAY DESC @2352
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdamul01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/whisperamul/bdamul01.itm~ ~override~	//Amulet of Whispers
  SAY NAME2 @2353
  SAY DESC @2354
  	LPF ALTER_EFFECT INT_VAR match_opcode = 206 parameter1 = RESOLVE_STR_REF(@4038) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdamul03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/ankhegamul/bdamul03.itm~ ~override~	//Amulet of Abnormally Awesome Ankheg Summoning
  SAY NAME2 @2355
  SAY DESC @2356
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdamul07.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/embracamul/bdamul07.itm~ ~override~	//Locket of Embracing
  SAY NAME2 @2357
  SAY DESC @2358
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdamul08.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/modronheart/bdamul08.itm~ ~override~	//Modron Heart
  SAY NAME2 @2359
  SAY DESC @2360
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdax1h03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/chillaxe/bdax1h03.itm~ ~override~	//Chill Axe
  SAY NAME2 @2361
  SAY DESC @2362
  	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4003) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbelt03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/roguebelt/bdbelt03.itm~ ~override~	//Belt of the Cunning Rogue
  SAY NAME2 @2363
  SAY DESC @2364
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/mocudgel/bdblun01.itm~ ~override~	//Mosela's Cudgel +2
  SAY NAME2 @2365
  SAY DESC @2366
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/hydra/bdblun05.itm~ ~override~	//The Hydra +2
  SAY NAME2 @2367
  SAY DESC @2368
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdblun09.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/blazeglory/bdblun09.itm~ ~override~	//Blazing Glory +3
  SAY NAME2 @2369
  SAY DESC @2370
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdboot12.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/sidestep/bdboot12.itm~ ~override~	//Sidestep Slippers
  SAY NAME2 @2371
  SAY DESC @2372
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbow05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/savage/bdbow05.itm~ ~override~	//Savage Shortbow +2
  SAY NAME2 @2373
  SAY DESC @2374
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/shuttered/bdbrac01.itm~ ~override~	//Bracers of the Shuttered Lid
  SAY NAME2 @2375
  SAY DESC @2376
	LPF ALTER_EFFECT INT_VAR match_opcode = 206 parameter1 = RESOLVE_STR_REF(@4038) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrac15.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/perserv/bdbrac15.itm~ ~override~	//Bracers of Perseverance
  SAY NAME2 @2377
  SAY DESC @2378
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdbrd02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/breeze/bdbrd02.itm~ ~override~	//Flute of the Immaculate Breeze
  SAY NAME1 @2347
  SAY NAME2 @2379
  SAY UNIDENTIFIED_DESC @2349
  SAY DESC @2380
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdchan06.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/stalwart/bdchan06.itm~ ~override~	//Stalwart Scales +2
  SAY NAME2 @2381
  SAY DESC @2382
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdclck02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/sable/bdclck02.itm~ ~override~	//Sable Cloak
  SAY NAME2 @2383
  SAY DESC @2384
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdclck03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/capelet/bdclck03.itm~ ~override~	//Sable Cloak
  SAY NAME2 @2385
  SAY DESC @2386
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhalb02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/fester/bdhalb02.itm~ ~override~	//Festering Spear +1
  SAY NAME2 @2387
  SAY DESC @2388
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdarow01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/antimagicar/bdarow01.itm~ ~override~	//Arrow of Antimagic +1
  SAY NAME2 @2389
  SAY DESC @2390
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhamm06.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/dreadhamm/bdhamm06.itm~ ~override~	//Dread Hammer +2
  SAY NAME2 @2391
  SAY DESC @2392
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/btankard/bdhelm05.itm~ ~override~	//Battle Tankard
  SAY NAME1 @2720
  SAY NAME2 @2393
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2394
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm06.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/peacock/bdhelm06.itm~ ~override~	//Peacock Cap
  SAY NAME2 @2395
  SAY DESC @2396
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm07.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/equus/bdhelm07.itm~ ~override~	//Helm of Equus
  SAY NAME1 @2720
  SAY NAME2 @2397
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2398
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdhelm10.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/unwavering/bdhelm10.itm~ ~override~	//Helm of Unwavering Purpose
  SAY NAME1 @2720
  SAY NAME2 @2399
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2400
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdioun02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/bloodioun/bdioun02.itm~ ~override~	//Blood Red Ioun Stone
  SAY NAME1 @2408
  SAY NAME2 @2409
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2411
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdleat03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/raconteur/bdleat03.itm~ ~override~	//Raconteur's Regalia
  SAY NAME2 @2412
  SAY DESC @2413
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdmisc05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/purestone/bdmisc05.itm~ ~override~	//Purification Stone
  SAY NAME1 @2408
  SAY NAME2 @2414
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2415
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdmisc34.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/bearskin/bdmisc34.itm~ ~override~	//Fine Bearskin
  SAY NAME1 @2416
  SAY NAME2 @2416
  SAY UNIDENTIFIED_DESC @2417
  SAY DESC @2417
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdplat01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/daerplate/bdplat01.itm~ ~override~	//Daeros's Full Plate +1
  SAY NAME2 @2418
  SAY DESC @2419
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdplat03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/boneplate/bdplat03.itm~ ~override~	//Bloody Bone Plate +2
  SAY NAME1 @2420
  SAY NAME2 @2421
  SAY DESC @2422
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdrobe01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/robeaptitude/bdrobe01.itm~ ~override~	//Robe of Acane Aptitude
  SAY NAME2 @2423
  SAY DESC @2424
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdrobe04.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/clericrobe/bdrobe04.itm~ ~override~	//Cleric's Vestments
  SAY NAME1 @2425
  SAY NAME2 @2425
  SAY UNIDENTIFIED_DESC @2426
  SAY DESC @2426
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsilk01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/spidersilk/bdsilk01.itm~ ~override~	//Spider Silk
  SAY NAME1 @2429
  SAY NAME2 @2429
  SAY UNIDENTIFIED_DESC @2430
  SAY DESC @2430
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdslng01.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/firefly/bdslng01.itm~ ~override~	//Firefly +2
  SAY NAME2 @2431
  SAY DESC @2432
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/eadro/bdsw1h03.itm~ ~override~	//Eadro's Blade +1
  SAY NAME2 @2433
  SAY DESC @2434
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h14.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/fractal/bdsw1h14.itm~ ~override~	//Fractal Blade +3
  SAY NAME2 @2435
  SAY DESC @2436
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1h25.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/spellbreaker/bdsw1h25.itm~ ~override~	//Fractal Blade +3
  SAY NAME2 @2437
  SAY DESC @2438
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw1hx5.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/giftdemon/bdsw1hx5.itm~ ~override~	//Gift of the Demon +1
  SAY NAME2 @2441
  SAY DESC @2442
END

COPY_EXISTING ~bdsw1hx5.itm~ ~override~
	WRITE_SHORT 0x42 100

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw2h02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/trollsword/bdsw2h02.itm~ ~override~	//Sword of Troll Decapitation +1
  SAY NAME2 @2443
  SAY DESC @2444
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsw2h03.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/swordruin/bdsw2h03.itm~ ~override~	//Sword of Ruin +2
  SAY NAME2 @2445
  SAY DESC @2446
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdxbow02.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/itm/harold/bdxbow02.itm~ ~override~	//Harold +2
  SAY NAME2 @2447
  SAY DESC @2448
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdclck05.itm~ BEGIN // check if already present for EET games
COPY ~sod2bg2_iu/sodresource/bam/ibdclk05.bam~ ~override~		
COPY ~sod2bg2_iu/itm/gargcloak/bdclck05.itm~ ~override~		//Cloak of the Gargoyle
  SAY NAME1 @2508
  SAY NAME2 @2738
  SAY UNIDENTIFIED_DESC @2509
  SAY DESC @2739
END


/////////////////////////////
//Adding IWD items///////////
/////////////////////////////

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandmis.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandmis.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandmis.itm~ ~override~	//Pemby's Wand of Many Missiles
  SAY NAME1 @2455	
  SAY NAME2 @2456
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2458
  WRITE_ASCII 0x58 dtkcwan1
  WRITE_BYTE 0x94 50
  LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
  END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandarm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandarm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandarm.itm~ ~override~	//Wand of Armory
  SAY NAME1 @2455	
  SAY NAME2 @2459
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2460
  WRITE_ASCII 0x58 dtkcwan2
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandtrp.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandtrp.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/wav/#eff_p03.wav~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandtrp.itm~ ~override~	//Wand of Trap Detection
  SAY NAME1 @2455	
  SAY NAME2 @2461
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2462
  WRITE_ASCII 0x58 dtkcwan3
  WRITE_BYTE 0x94 50
  LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~sash.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/isash.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/sash.itm~ ~override~	//Shimmering Sash
  SAY NAME1 @2463	
  SAY NAME2 @2464
  SAY UNIDENTIFIED_DESC @2465
  SAY DESC @2466
  WRITE_ASCII 0x58 dtkcsash
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~vexed3.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ivexed.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/seeall.itm~ ~override~
COPY_EXISTING ~bl3-12m4.itm~ ~override~
	WRITE_ASCII 0x76 imisc72
COPY ~sod2bg2_iu/iwdresource/cre/vexing3.cre~ ~override~	//Chalimandren
	SAY NAME1 @7005
	SAY NAME2 @7005
		COMPILE ~sod2bg2_iu/iwdresource/baf/bavex3.baf~ // Script for Chalimandren
COPY ~sod2bg2_iu/iwdresource/itm/vexed3.itm~ ~override~	//Vexed Armor
  SAY NAME1 @2467	
  SAY NAME2 @2468
  SAY UNIDENTIFIED_DESC @2469
  SAY DESC @2470
  WRITE_ASCII 0x58 dtkcvexd
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohbrac01.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/eff/ohbrac01.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohbrac01.itm~ ~override~	//The Flaming Fists of Lin Mei
  SAY NAME1 @2471	
  SAY NAME2 @2472
  SAY UNIDENTIFIED_DESC @2473
  SAY DESC @2474
  WRITE_ASCII 0x58 pbrac26
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohbrac02.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/spl/ohbrac02.spl~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohbrac02.itm~ ~override~	//Sarutobi's Stone Breakers
  SAY NAME1 @2471	
  SAY NAME2 @2475
  SAY UNIDENTIFIED_DESC @2473
  SAY DESC @2476
  WRITE_ASCII 0x58 pbrac22
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~amulbro.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iamulbro.bam~ ~override~
COPY ~sod2bg2_iu/sodresource/bam/bdcamul4.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/amulbro.itm~ ~override~	//Clasp of Bron's Cloak
  SAY NAME1 @2477	
  SAY NAME2 @2478
  SAY UNIDENTIFIED_DESC @2479
  SAY DESC @2480
  WRITE_ASCII 0x58 bdcamul4
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~kossuth.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ikoss.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/kossuth.itm~ ~override~	//Kossuth's Blood
  SAY NAME1 @2477	
  SAY NAME2 @2481
  SAY UNIDENTIFIED_DESC @2479
  SAY DESC @2482
  WRITE_ASCII 0x58 1cband06
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ogi.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iogi.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ogi.itm~ ~override~	//Ogi-Luc's Great Robe
  SAY NAME1 @2483	
  SAY NAME2 @2484
  SAY UNIDENTIFIED_DESC @2485
  SAY DESC @2486
  WRITE_ASCII 0x58 cclck12
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~usltr3a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/usltr3a.itm~ ~override~	//Shadowed Studded Leather +2
  SAY NAME1 @2487	
  SAY NAME2 @2488
  SAY UNIDENTIFIED_DESC @2489
  SAY DESC @2490
  WRITE_ASCII 0x3a ileat15
  WRITE_ASCII 0x58 cleat15
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 22 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 114 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 27 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u1hax3a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/u1hax3a.itm~ ~override~	//Poisonous Battle Axe +2
  SAY NAME1 @2491	
  SAY NAME2 @2492
  SAY UNIDENTIFIED_DESC @2493
  SAY DESC @2494
  WRITE_ASCII 0x58 cax1h01
  WRITE_LONG 0x98 (BIT0)
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4013) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u1hax2a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/u1hax2a.itm~ ~override~	//Charged Battle Axe +2
  SAY NAME1 @2491	
  SAY NAME2 @2495
  SAY UNIDENTIFIED_DESC @2493
  SAY DESC @2496
  WRITE_ASCII 0x58 cax1h01
  WRITE_LONG 0x98 (BIT0)
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4017) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bootfox.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibootfox.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bootfox.itm~ ~override~	//Boots of the Fox
  SAY NAME1 @2011	
  SAY NAME2 @2497
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2499
  WRITE_ASCII 0x58 cboot06
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bootfor.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibootfor.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bootfor.itm~ ~override~	//Boots of the Forgotten Ones
  SAY NAME1 @2011	
  SAY NAME2 @2500
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2501
  WRITE_ASCII 0x58 cboot04
  WRITE_LONG 0x1e (BIT6 + BIT11 + BIT13 + BIT16 + BIT17 + BIT18 + BIT19 + BIT22 + BIT29)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~shboots.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/shboots.itm~ ~override~	//Shadowed Boots
  SAY NAME1 @2011	
  SAY NAME2 @2502
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2503
  WRITE_ASCII 0x58 cboot05
  WRITE_LONG 0x1e (BIT6 + BIT7 + BIT8 + BIT11 + BIT12 + BIT13 + BIT14 + BIT15 + BIT18 + BIT20)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bowmess.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibowmess.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bowmess.itm~ ~override~	//Messenger of Sseth
  SAY NAME1 @2504	
  SAY NAME2 @2505
  SAY UNIDENTIFIED_DESC @2506
  SAY DESC @2507
  WRITE_ASCII 0x58 cbow17
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~glimglm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iglimglm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/glimglm.itm~ ~override~	//Glimglam's Cloak +1
  SAY NAME1 @2508	
  SAY NAME2 @2509
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2511
  WRITE_ASCII 0x58 ohhcclk
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cloaksc.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/icloaksc.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cloaksc.itm~ ~override~	//Cloak of Scintillating Colors
  SAY NAME1 @2508	
  SAY NAME2 @2512
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2513
  WRITE_ASCII 0x58 ohrcclk3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdwuff.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdwuff.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdwuff.itm~ ~override~	//Cloak of the Winter Wolf
  SAY NAME1 @2508	
  SAY NAME2 @2514
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2515
  WRITE_ASCII 0x58 dtkcwuff
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~auril.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iauril.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/auril.itm~ ~override~	//Breath of Auril +3
  SAY NAME1 @2516	
  SAY NAME2 @2517
  SAY UNIDENTIFIED_DESC @2518
  SAY DESC @2519
  WRITE_ASCII 0x58 cdagg17
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~gauntem.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/igauntem.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/gauntem.itm~ ~override~	//Gauntlets of Elven Might
  SAY NAME1 @2520	
  SAY NAME2 @2521
  SAY UNIDENTIFIED_DESC @2522
  SAY DESC @2523
  WRITE_ASCII 0x58 cbrac18
  WRITE_LONG 0x1e (BIT18)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohioun03.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ohioun03.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohioun03.itm~ ~override~	//Clear Ioun Stone
  SAY NAME1 @2524	
  SAY NAME2 @2525
  SAY UNIDENTIFIED_DESC @2526
  SAY DESC @2527
  WRITE_ASCII 0x58 chelm20
  WRITE_SHORT 0x1c 72
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohioun02.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ohioun02.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohioun02.itm~ ~override~	//Scarlet/Blue Ioun Stone
  SAY NAME1 @2524	
  SAY NAME2 @2528
  SAY UNIDENTIFIED_DESC @2526
  SAY DESC @2529
  WRITE_ASCII 0x58 phelm23
  WRITE_SHORT 0x1c 72
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u2ham5a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/imaul.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/u2ham5a.itm~ ~override~	//Demon's Breath +3
  SAY NAME1 @2530	
  SAY NAME2 @2531
  SAY UNIDENTIFIED_DESC @2532
  SAY DESC @2533
  WRITE_ASCII 0x58 chamm09
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~uhalb4a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ihalb02.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/uhalb4a.itm~ ~override~	//Doom Halberd +3
  SAY NAME1 @2534	
  SAY NAME2 @2535
  SAY UNIDENTIFIED_DESC @2536
  SAY DESC @2537
  WRITE_ASCII 0x58 chalb03
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~whtash.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwhtash.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/whtash.itm~ ~override~	//The Spear of White Ash +3
  SAY NAME1 @2538	
  SAY NAME2 @2539
  SAY UNIDENTIFIED_DESC @2540
  SAY DESC @2541
  WRITE_ASCII 0x58 csper03
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ubswd4b.itm~ BEGIN // check if already present to prevent conflicts
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4044) STR_VAR bam_file = dtkphase RET icon END
COPY ~sod2bg2_iu/iwdresource/eff/phased.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ubswd4b.itm~ ~override~	//Bastard Sword of Greater Phasing +3
  SAY NAME1 @2542	
  SAY NAME2 @2543
  SAY UNIDENTIFIED_DESC @2544
  SAY DESC @2545
  WRITE_ASCII 0x58 csw1h03
  WRITE_LONG 0x98 (BIT0)
    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4044) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~tongue.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/itongue.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/tongue.itm~ ~override~	//The Salamander's Tongue +3
  SAY NAME1 @2546
  SAY NAME2 @2547
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2549
  WRITE_ASCII 0x58 cdagg13
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzm5mh.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/izzm5mh.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzm5mhh.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzm5mhd.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/zzm5mh.itm~ ~override~	//Misery's Herald +3
  SAY NAME1 @2550
  SAY NAME2 @2551
  SAY UNIDENTIFIED_DESC @2552
  SAY DESC @2553
  WRITE_ASCII 0x58 cblun03
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bess.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibess.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bess.itm~ ~override~	//The Love of Black Bess +3
  SAY NAME1 @2554
  SAY NAME2 @2555
  SAY UNIDENTIFIED_DESC @2556
  SAY DESC @2557
  WRITE_ASCII 0x58 cblun04
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ BEGIN	//sw1h45 exists as a different item in EET and BG2, this is used instead of file name check to counter it
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~idpro237.pro~ BEGIN // check if already present
	ADD_PROJECTILE ~sod2bg2_iu/iwdresource/pro/idpro237.pro~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~curseh.vvc~ BEGIN // check if already present
		COPY ~sod2bg2_iu/iwdresource/vvc/curseh.vvc~ ~override~
		COPY ~sod2bg2_iu/iwdresource/bam/area1x.bam~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_p99.wav~ BEGIN // check if already present
			COPY ~sod2bg2_iu/iwdresource/wav/#eff_p99.wav~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~#bless.vvc~ BEGIN // check if already present
				COPY ~sod2bg2_iu/iwdresource/vvc/#bless.vvc~ ~override~
				COPY ~sod2bg2_iu/iwdresource/bam/curseh.bam~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_p32.wav~ BEGIN // check if already present
					COPY ~sod2bg2_iu/iwdresource/wav/#eff_p32.wav~ ~override~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_e04.wav~ BEGIN // check if already present
						COPY ~sod2bg2_iu/iwdresource/wav/#eff_e04.wav~ ~override~
						END
							COPY ~sod2bg2_iu/iwdresource/spl/sppr112.spl~ ~override/dtkdglor.spl~	//Darkend Glory +2
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%idpro237%" STR_VAR icon = dtkcursb END
							SAY NAME1 @3027 // Spell Name
							SAY NAME2 @3027
							SAY UNIDENTIFIED_DESC @3028  // Spell description
							SAY DESC @3028
							WRITE_ASCII 0x3a dtkcursc
							LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4045) END
								COPY ~sod2bg2_iu/iwdresource/itm/sw1h45.itm~ ~override/dtkdglor.itm~	//Darkened Glory +2 - file name changed to avoid conflicts
								  SAY NAME1 @2558
								  SAY NAME2 @2559
								  SAY UNIDENTIFIED_DESC @2560
								  SAY DESC @2561
								  WRITE_ASCII 0x58 csw1h49
								  WRITE_ASCII 0x3a dtkdglor
								  WRITE_ASCII 0x76 dtkdglor
								  WRITE_LONG 0x98 (BIT0)
								  LPF ALTER_EFFECT INT_VAR match_opcode = 341 STR_VAR resource = dtkdglor END									
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~lucky.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ilucky.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/lucky.itm~ ~override/dtklucky.itm~	//The Lucky Scimitar +2 / Changed to +3
  SAY NAME1 @2562
  SAY NAME2 @2563
  SAY UNIDENTIFIED_DESC @2564
  SAY DESC @2565
  WRITE_ASCII 0x58 csw1h15
  WRITE_LONG 0x98 (BIT0)
  WRITE_LONG 0x60 3
  WRITE_BYTE 0x86 3
  WRITE_BYTE 0x8c 3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzs6sc.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/izzs6sc.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzs6sch.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzs6scd.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/zzs6sc.itm~ ~override/dtkespid.itm~	//Evil Spider Crusher of Doom +2 / Changed to +3
  SAY NAME1 @2566
  SAY NAME2 @2567
  SAY UNIDENTIFIED_DESC @2568
  SAY DESC @2569
  WRITE_ASCII 0x58 cblun15
  WRITE_LONG 0x98 (BIT0)
  WRITE_LONG 0x60 3
  WRITE_BYTE 0x86 3
  WRITE_BYTE 0x8c 3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~helmdef.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/helmdef.itm~ ~override~	//Helm of the Trusted Defender
  SAY NAME1 @2570	
  SAY NAME2 @2571
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2573
  WRITE_ASCII 0x58 chelm07
  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = RESOLVE_STR_REF(@4056) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = RESOLVE_STR_REF(@4018) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdrem.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdrem.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/bam/cdremg.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdrem.itm~ ~override~	//Remorhaz Shell
  SAY NAME1 @2574	
  SAY NAME2 @2574
  SAY UNIDENTIFIED_DESC @2575
  SAY DESC @2575
  WRITE_ASCII 0x58 cmisc12
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdrelm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdrelm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override~	//Remorhaz Shell Helm
  SAY NAME1 @2570	
  SAY NAME2 @2576
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2577
  WRITE_ASCII 0x58 chelm01
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
	  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh1.itm~	//Remorhaz Shell Helm - cirlet variant
	  WRITE_ASCII 0x22 JB
	  WRITE_LONG 0x1e 0
	  SAY NAME1 @2404	
	  SAY NAME2 @2578
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2579
	  WRITE_ASCII 0x58 cmiscaa
	  WRITE_ASCII 0x3a dtkremh1
	  WRITE_SHORT 0x4c 5
	  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 parameter2 = 52 END
		  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh2.itm~	//Remorhaz Shell Helm - dragon-horned variant1
		  WRITE_ASCII 0x22 H1
		  SAY NAME1 @2570	
		  SAY NAME2 @2576
		  SAY UNIDENTIFIED_DESC @2572
		  SAY DESC @2577
		  WRITE_ASCII 0x58 chelm02
		  WRITE_ASCII 0x3a dtkremh2
		  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
		  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
		  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 50 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
		  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
			  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh3.itm~	//Remorhaz Shell Helm - dragon-winged variant
			  WRITE_ASCII 0x22 J2
			  SAY NAME1 @2570	
			  SAY NAME2 @2576
			  SAY UNIDENTIFIED_DESC @2572
			  SAY DESC @2577
			  WRITE_ASCII 0x58 chelm05c
			  WRITE_ASCII 0x3a dtkremh3
			  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
			  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
				  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh4.itm~	//Remorhaz Shell Helm - curled-horn variant
				  WRITE_ASCII 0x22 H3
				  SAY NAME1 @2570	
				  SAY NAME2 @2576
				  SAY UNIDENTIFIED_DESC @2572
				  SAY DESC @2577
				  WRITE_ASCII 0x58 chelm04
				  WRITE_ASCII 0x3a dtkremh4
				  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
				  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
					  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh5.itm~	//Remorhaz Shell Helm - horned-plume variant
					  WRITE_ASCII 0x22 J9
					  SAY NAME1 @2570	
					  SAY NAME2 @2576
					  SAY UNIDENTIFIED_DESC @2572
					  SAY DESC @2577
					  WRITE_ASCII 0x58 chelm06
					  WRITE_ASCII 0x3a dtkremh5
					  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
					  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
					  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 104 timing = 2 target = 1 probability1 = 100 END
						  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh6.itm~	//Remorhaz Shell Helm - winged-plume variant
						  WRITE_ASCII 0x22 JA
						  SAY NAME1 @2570	
						  SAY NAME2 @2576
						  SAY UNIDENTIFIED_DESC @2572
						  SAY DESC @2577
						  WRITE_ASCII 0x58 chelm05b
						  WRITE_ASCII 0x3a dtkremh6
						  LPF DELETE_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 END
						  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 104 timing = 2 target = 1 probability1 = 100 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 49 parameter1 = 98 timing = 2 target = 1 probability1 = 100 END
							  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh7.itm~	//Remorhaz Shell Helm - centurion-plume variant
							  WRITE_ASCII 0x22 H5
							  SAY NAME1 @2570	
							  SAY NAME2 @2576
							  SAY UNIDENTIFIED_DESC @2572
							  SAY DESC @2577
							  WRITE_ASCII 0x58 chelm05
							  WRITE_ASCII 0x3a dtkremh7
							  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
							  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
							  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 98 timing = 2 target = 1 probability1 = 100 END
								  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh8.itm~	//Remorhaz Shell Helm - plain-horned variant
								  WRITE_ASCII 0x22 J6
								  SAY NAME1 @2570	
								  SAY NAME2 @2576
								  SAY UNIDENTIFIED_DESC @2572
								  SAY DESC @2577
								  WRITE_ASCII 0x58 dtkremhm
								  WRITE_ASCII 0x3a dtkremh8
								  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
								  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
								  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~helmpat.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ihelmpat.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/helmpat.itm~ ~override~	//Patriot Helm
  SAY NAME1 @2570	
  SAY NAME2 @2583
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2584
  WRITE_ASCII 0x58 chelm05
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~band04.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/itm/circletmagi/band04.itm~ ~override~	//Circlet of the Archmagi
	  SAY NAME1 @2404	
	  SAY NAME2 @2585
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2586
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~band03.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/itm/eilisboon/band03.itm~ ~override~	//Eilistraee's Boon +1
	  SAY NAME1 @2404	
	  SAY NAME2 @2587
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2588
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~ulring.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iulring.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ulring.itm~ ~override~	//Ulcaster Academy Ring
	  SAY NAME1 @2589	
	  SAY NAME2 @2593
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2594
	  WRITE_LONG 0x1e (BIT7 + BIT9 + BIT10 + BIT11 + BIT12 + BIT14 + BIT17 + BIT20 + BIT21 + BIT22 + BIT29 + BIT30)
	  WRITE_ASCII 0x58 cring10
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~dbone.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/idbone.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/dbone.itm~ ~override~	//Ring of Dwarven Bone
	  SAY NAME1 @2589	
	  SAY NAME2 @2595
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2596
	  WRITE_ASCII 0x58 cring29
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~ringed.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iringed.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ringed.itm~ ~override~	//Edion's Ring of Wizardry
	  SAY NAME1 @2589	
	  SAY NAME2 @2597
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2598
	  WRITE_ASCII 0x58 cring38
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END	//Prevents multiple rings of wizardry
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
	END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ringkon.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iringkon.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ringkon.itm~ ~override~	//Kontik's Ring of Wizardry
	  SAY NAME1 @2589	
	  SAY NAME2 @2590
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2592
	  WRITE_ASCII 0x58 cring35
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END	//Prevents multiple rings of wizardry
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
	END
		ACTION_IF FILE_EXISTS_IN_GAME ~bdring08.itm~ BEGIN // check if already present for EET games
			COPY_EXISTING ~bdring08.itm~ ~override~	//Prevents multiple rings of wizardry
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
				END
					ACTION_IF FILE_EXISTS_IN_GAME ~ring08.itm~ BEGIN // check if already present for EET games
						COPY_EXISTING ~ring08.itm~ ~override~	//Prevents multiple rings of wizardry
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
							END
								ACTION_IF FILE_EXISTS_IN_GAME ~ohringwi.itm~ BEGIN // check if already present for EET games
									COPY_EXISTING ~ohringwi.itm~ ~override~	//Prevents multiple rings of wizardry
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
										END
			
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~shadows.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ishadows.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/shadows.itm~ ~override~	//Ring of Shadows
	  SAY NAME1 @2589	
	  SAY NAME2 @2599
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2600
	  WRITE_ASCII 0x58 cring27
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~lyre.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ilyre.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/lyre.itm~ ~override~	//Lyre of Progression
	  SAY NAME1 @2601	
	  SAY NAME2 @2602
	  SAY UNIDENTIFIED_DESC @2603
	  SAY DESC @2604
	  WRITE_ASCII 0x58 cmisc3o
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bardic.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ibardic.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/wav/#valhala.wav~ ~override~
	COMPILE ~sod2bg2_iu/iwdresource/baf/gnbzkwar.baf~
	COPY ~sod2bg2_iu/iwdresource/cre/berserk.cre~ ~override~
	SAY NAME1 @7007
	SAY NAME2 @7007
	COPY ~sod2bg2_iu/iwdresource/itm/bardic.itm~ ~override~	//Bardic Horn of Valhalla
	  SAY NAME1 @2605	
	  SAY NAME2 @2606
	  SAY UNIDENTIFIED_DESC @2607
	  SAY DESC @2608
	  WRITE_ASCII 0x58 cmisc73
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~shawm.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ishawm.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/wav/#owain.wav~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/shawm.itm~ ~override~	//Owain's Lullabye
	  SAY NAME1 @2609	
	  SAY NAME2 @2610
	  SAY UNIDENTIFIED_DESC @2611
	  SAY DESC @2612
	  WRITE_ASCII 0x58 dtkshawm
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~waukeen.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iwaukeen.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/waukeen.itm~ ~override~	//Waukeen's Defender +2
	  SAY NAME1 @2613	
	  SAY NAME2 @2614
	  SAY UNIDENTIFIED_DESC @2615
	  SAY DESC @2616
	  WRITE_ASCII 0x58 cshld28
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsumst.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ibdsumst.bam~ ~override~
	COPY ~sod2bg2_iu/2da/dtksumst.2da~ ~override~
	COPY ~sod2bg2_iu/spl/dtksums1.spl~ ~override~
		SAY NAME1 @5046
		SAY NAME2 @5046
	COPY ~sod2bg2_iu/spl/dtksums2.spl~ ~override~
		SAY NAME1 @5048
		SAY NAME2 @5048
	COPY ~sod2bg2_iu/spl/dtksums3.spl~ ~override~
		SAY NAME1 @5047
		SAY NAME2 @5048
	COPY ~sod2bg2_iu/iwdresource/itm/bdsumst.itm~ ~override~	//The Summoner's Staff +3
	  SAY NAME1 @2617	
	  SAY NAME2 @2618
	  SAY UNIDENTIFIED_DESC @2619
	  SAY DESC @2620
	  WRITE_ASCII 0x58 cstaf17
	  LPF ALTER_EFFECT INT_VAR opcode = 214 STR_VAR resource = dtksumst END
		  COPY ~sod2bg2_iu/iwdresource/itm/bdsumstx.itm~ ~override~	//The Summoner's Staff +3 (used up)
		  SAY NAME1 @2617	
		  SAY NAME2 @2618
		  SAY UNIDENTIFIED_DESC @2619
		  SAY DESC @2621
		  WRITE_ASCII 0x58 cstaf17
	END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzd5woh.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/izzd5woh.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/eff/zzd5wohh.eff~ ~override~
	COPY ~sod2bg2_iu/iwdresource/eff/zzd5wohd.eff~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/zzd5woh.itm~ ~override~	//Wind of Heaven +4, +5 vs. Elementals
	  SAY NAME1 @2622	
	  SAY NAME2 @2623
	  SAY UNIDENTIFIED_DESC @2624
	  SAY DESC @2625
	  WRITE_ASCII 0x58 csw1h20
	END	
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~waukeen.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iwaukeen.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/waukeen.itm~ ~override~	//Waukeen's Defender +2
	  SAY NAME1 @2613	
	  SAY NAME2 @2614
	  SAY UNIDENTIFIED_DESC @2615
	  SAY DESC @2616
	  WRITE_ASCII 0x58 cshld28
	END

//////////////////////////////////////////////
//////////////////////////////////////////////
//Adding new spell effects for new items//////
//////////////////////////////////////////////
//////////////////////////////////////////////


COPY ~sod2bg2_iu/spl/dtkbln1a.spl~ ~override~
   
COPY ~sod2bg2_iu/spl/dtkbdrgp.spl~ ~override~
   SAY NAME1 @4033  // Spell Name
   SAY NAME2 @4033
	
COPY ~sod2bg2_iu/spl/dtknecro.spl~ ~override~
	SAY NAME1 @4026
	SAY NAME2 @4026	// Spell Name

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4002) STR_VAR bam_file = dtkanmgp RET icon END
COPY ~sod2bg2_iu/spl/dtkanmag.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 206 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4012) END

COPY ~sod2bg2_iu/spl/dtkbldvx.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4011) END

COPY ~sod2bg2_iu/spl/dtkchaos.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkchaos%" END

COPY ~sod2bg2_iu/spl/dtkdeafn.spl~ ~override~

COPY ~sod2bg2_iu/spl/dtkderv1.spl~ ~override~

COPY ~sod2bg2_iu/spl/dtkdrain.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdrain%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4008) END

COPY ~sod2bg2_iu/spl/dtkicely.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkicely%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4010) END

COPY ~sod2bg2_iu/spl/dtkjestp.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4013) END

COPY ~sod2bg2_iu/spl/dtkknife.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkjest%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 17396 parameter1 = RESOLVE_STR_REF(@4014) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 14674 parameter1 = RESOLVE_STR_REF(@4015) END

COPY ~sod2bg2_iu/spl/dtkluck.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4016) END

COPY ~sod2bg2_iu/spl/dtkprfir.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpfir%" END
	SAY NAME1 @3015
	SAY NAME2 @3015

COPY ~sod2bg2_iu/spl/dtkshout.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkshout%" END

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4000) STR_VAR bam_file = dtkshrdd RET icon END   // adding potrait icon for spell
COPY ~sod2bg2_iu/spl/dtkshrd.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 94 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4000) END

COPY ~sod2bg2_iu/spl/dtkshrdb.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkshrod%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 94 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4000) END

COPY ~sod2bg2_iu/spl/dtksnow.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksnow%" END

COPY ~sod2bg2_iu/spl/dtkstrvx.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 14674 parameter1 = RESOLVE_STR_REF(@4015) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 14042 parameter1 = RESOLVE_STR_REF(@4008) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1452 parameter1 = RESOLVE_STR_REF(@4009) END

COPY ~sod2bg2_iu/spl/dtktyr1.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkexalt%" END

COPY ~sod2bg2_iu/spl/dtkwave.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkwave%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1280 parameter1 = RESOLVE_STR_REF(@4017) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 20438 parameter1 = RESOLVE_STR_REF(@4018) END

COPY ~sod2bg2_iu/spl/dtkwfog.spl~ ~override~
	SAY NAME1 @3017
	SAY NAME2 @3017
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4010) END

COPY ~sod2bg2_iu/spl/dtkwhirl.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkwhirl%" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4017) END

COPY ~sod2bg2_iu/spl/dtkxbow1.spl~ ~override~

COPY ~sod2bg2_iu/spl/dtkmagsp.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkmagsp%" END

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4021) STR_VAR bam_file = dtkmagpp RET icon END
COPY ~sod2bg2_iu/spl/dtkmagsb.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 36 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4021) END

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4025) STR_VAR bam_file = dtksufop RET icon END
COPY ~sod2bg2_iu/spl/dtksuffo.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 41 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 3421 parameter1 = RESOLVE_STR_REF(@4025) END

COPY ~sod2bg2_iu/spl/dtkswd9.spl~ ~override~
	SAY NAME1 @4030  // Spell Name
	
COPY ~sod2bg2_iu/spl/dtkswd8a.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4029) END

COPY ~sod2bg2_iu/spl/dtkdflam.spl~ ~override~	
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdflam%" END
  	SAY NAME1 @5025
	SAY NAME2 @5025
	
COPY ~sod2bg2_iu/spl/dtkskald.spl~ ~override~	
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4017) END
  
COPY ~sod2bg2_iu/spl/dtkdvis.spl~ ~override~	//night-time spell for shadow vision effect
COPY ~sod2bg2_iu/spl/dtkdvis2.spl~ ~override~	//night-time spell for shadow vision effect
COPY ~sod2bg2_iu/spl/dtkdvis3.spl~ ~override~	//night-time spell for shadow vision effect

COPY ~sod2bg2_iu/spl/dtkdshm.spl~ ~override~	//Demi-Shadow Monsters for Imbued Shadow gem/Varscona +5
	SAY NAME1 @3035
	SAY NAME2 @3035
	SAY UNIDENTIFIED_DESC @3036
	SAY DESC @3036

COPY ~sod2bg2_iu/spl/dtkedis.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkedis%" END
	SAY NAME1 @3037
	SAY NAME2 @3037
	
COPY ~sod2bg2_iu/spl/dtksfrm.spl~ ~override~
	SAY NAME1 @3038
	SAY NAME2 @3038
	SAY UNIDENTIFIED_DESC @3039
	SAY DESC @3039
	  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3038) END

COPY ~sod2bg2_iu/spl/dtksuns.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksuns%" END
	SAY NAME1 @3054
	SAY NAME2 @3054
	SAY UNIDENTIFIED_DESC @3055
	SAY DESC @3055
	  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4015) END
		COPY ~sod2bg2_iu/spl/dtksuns2.spl~ ~override~

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4076) STR_VAR bam_file = dtklofrp RET icon END   // adding potrait icon for spell
COPY ~sod2bg2_iu/spl/dtkscor.spl~ ~override~	//Scorching Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkscor%" END
  	SAY NAME1 @5053
	SAY NAME2 @5053
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		
COPY ~sod2bg2_iu/spl/dtksilbr.spl~ ~override~	//Shimmering Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksilbr%" END
  	SAY NAME1 @5056
	SAY NAME2 @5056

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4077) STR_VAR bam_file = dtklocrp RET icon END   // adding potrait icon for spell	
COPY ~sod2bg2_iu/spl/dtkwdbre.spl~ ~override~	//Arctic Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkwdbre%" END
  	SAY NAME1 @5057
	SAY NAME2 @5057
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4078) STR_VAR bam_file = dtkloerp RET icon END   // adding potrait icon for spell	
COPY ~sod2bg2_iu/spl/dtkblubr.spl~ ~override~	//Shocking Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkblubr%" END
  	SAY NAME1 @5058
	SAY NAME2 @5058
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		
COPY ~sod2bg2_iu/spl/dtkshabr.spl~ ~override~	//Shadow Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkshabr%" END
  	SAY NAME1 @5059
	SAY NAME2 @5059

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4080) STR_VAR bam_file = dtklopor RET icon END   // adding potrait icon for spell	
COPY ~sod2bg2_iu/spl/dtkvenbr.spl~ ~override~	//Venemous Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkvenbr%" END
  	SAY NAME1 @5060
	SAY NAME2 @5060
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4079) STR_VAR bam_file = dtkloarp RET icon END   // adding potrait icon for spell	
COPY ~sod2bg2_iu/spl/dtkblabr.spl~ ~override~	//Caustic Breath
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkblabr%" END
  	SAY NAME1 @5061
	SAY NAME2 @5061
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		
COPY ~sod2bg2_iu/spl/dtklea2.spl~ ~override~	//Shadow Mirror Image
  	SAY NAME1 @5062
	SAY NAME2 @5062
		LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@5063) END


////////////////////////////////////////////
// Adding New Items/////////////////////////
////////////////////////////////////////////

COPY ~sod2bg2_iu/itm/frostfirebolt/dtkbol1.itm~ ~override~	  //Bolt of Frostfire +2
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkffblt%" END
  SAY NAME2 @2337
  SAY DESC @2338

COPY ~sod2bg2_iu/itm/heartwood/dtkrng2d.itm~ ~override~	  //Heartwood Ring of Frost
  SAY NAME2 @2335
  SAY DESC @2336
  
COPY ~sod2bg2_iu/itm/heartwood/dtkrng2c.itm~ ~override~	  //Heartwood Ring of Earth
  SAY NAME2 @2333
  SAY DESC @2334
  
COPY ~sod2bg2_iu/itm/heartwood/dtkrng2b.itm~ ~override~	  //Heartwood Ring of Wind
  SAY NAME2 @2331
  SAY DESC @2332
  
COPY ~sod2bg2_iu/itm/heartwood/dtkrng2a.itm~ ~override~	  //Heartwood Ring of Fire
  SAY NAME2 @2329
  SAY DESC @2330
 
COPY ~sod2bg2_iu/itm/heartwood/dtkrng2e.itm~ ~override~	  //Heartwood Ring of Water
  SAY NAME2 @2668
  SAY DESC @2669
  
COPY ~sod2bg2_iu/itm/martyr2/dtkbln1a.itm~ ~override~	  //Martyr's Morningstar +5
  SAY NAME1 @2716
  SAY NAME2 @2325
  SAY UNIDENTIFIED_DESC @2718
  SAY DESC @2326
  
COPY ~sod2bg2_iu/itm/martyr1/dtkbln1.itm~ ~override~	  //Martyr's Morningstar +3
  SAY NAME1 @2716
  SAY NAME2 @2323
  SAY UNIDENTIFIED_DESC @2718
  SAY DESC @2324

COPY ~sod2bg2_iu/itm/ccdraglshd/dtklea3g.itm~ ~override~	  //Chromatic Crimson Dragonscale (Shadow Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2309
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2310
  
COPY ~sod2bg2_iu/itm/ccdraglwht/dtklea3c.itm~ ~override~	  //Chromatic Crimson Dragonscale (White Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2307
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2308
  
COPY ~sod2bg2_iu/itm/ccdraglsil/dtklea3d.itm~ ~override~	  //Chromatic Crimson Dragonscale (Silver Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2305
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2306
  
COPY ~sod2bg2_iu/itm/ccdraglred/dtklea3a.itm~ ~override~	  //Scarlet Viridescent Dragonscale (Red Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2303
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2304
  
COPY ~sod2bg2_iu/itm/ccdraglgrn/dtklea3e.itm~ ~override~	  //Carmine Viridian Dragonscale (Green Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2301
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2302
  
COPY ~sod2bg2_iu/itm/ccdraglblu/dtklea3b.itm~ ~override~	  //Chromatic Crimson Dragonscale (Blue Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2299
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2300
  
COPY ~sod2bg2_iu/itm/ccdraglblk/dtklea3f.itm~ ~override~	  //Chromatic Crimson Dragonscale (Black Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2297
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2298
  
COPY ~sod2bg2_iu/itm/csdragpwht/dtkplt3c.itm~ ~override~	  //Chromatic Shadow Dragon Plate (White Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2295
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2296
  
COPY ~sod2bg2_iu/itm/csdragpsil/dtkplt3d.itm~ ~override~	  //Chromatic Shadow Dragon Plate (Silver Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2293
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2294
  
COPY ~sod2bg2_iu/itm/csdragpred/dtkplt3a.itm~ ~override~	  //Chromatic Shadow Dragon Plate (Red Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2291
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2292
  
COPY ~sod2bg2_iu/itm/csdragpgrn/dtkplt3e.itm~ ~override~	  //Viridescent Shadow Dragon Plate (Green Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2289
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2290
  
COPY ~sod2bg2_iu/itm/csdragpblk/dtkplt3f.itm~ ~override~	  //Chromatic Shadow Dragon Plate (Black Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2287
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2288
  
COPY ~sod2bg2_iu/itm/csdragpblu/dtkplt3b.itm~ ~override~	  //Chromatic Shadow Dragon Plate (Blue Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2285
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2286
  
COPY ~sod2bg2_iu/itm/vsdragp/dtkplt3.itm~ ~override~	  //Verdant Shadow Dragon Plate
  SAY NAME1 @2007	
  SAY NAME2 @2283
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2284
  
COPY ~sod2bg2_iu/itm/vcdragl/dtklea3.itm~ ~override~	  //Verdant Crimson Dragonscale
  SAY NAME1 @2007	
  SAY NAME2 @2281
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2282
  
COPY ~sod2bg2_iu/itm/ccdragpscarlet/dtkplt1g.itm~ ~override~	  //Scarlet Viridian Dragon Plate
  SAY NAME1 @2007	
  SAY NAME2 @2279
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2280
  
COPY ~sod2bg2_iu/itm/csdragblack/dtklea1f.itm~ ~override~	  //Chromatic Shadow Dragonscale(black scales)
  SAY NAME1 @2007	
  SAY NAME2 @2277
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2278
  
COPY ~sod2bg2_iu/itm/ccdragpblack/dtkplt1f.itm~ ~override~	  //Chromatic Crimson Dragon Plate(black scales)
  SAY NAME1 @2007	
  SAY NAME2 @2275
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2276
  
COPY ~sod2bg2_iu/itm/gdragplate/dtkgdrgp.itm~ ~override~	  //Green Dragon Plate
  SAY NAME1 @2007	
  SAY NAME2 @2273
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2274
  
COPY ~sod2bg2_iu/itm/bdragarm2/dtkbdrgl.itm~ ~override~	  //Black Dragonscale Armor +4 - leather appearance
  SAY NAME1 @2007	
  SAY NAME2 @2271
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2272
  
COPY ~sod2bg2_iu/itm/bdragarm2/dtkbdrgc.itm~ ~override~	  //Black Dragonscale Armor +4 - chain appearance
  SAY NAME1 @2007	
  SAY NAME2 @2271
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2272
  
COPY ~sod2bg2_iu/itm/bdragshield/dtkbdrgs.itm~ ~override~	  //Dragonscale Shield +3 (Black Scales)
  SAY NAME2 @2269
  SAY DESC @2270
  
COPY ~sod2bg2_iu/itm/bdragarm/dtkbdrgp.itm~ ~override~	  //Black Dragon Plate +3
  SAY NAME1 @2007	
  SAY NAME2 @2267
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2268
  
COPY ~sod2bg2_iu/itm/severance2/dtkswd9a.itm~ ~override~	  //Severance +5
  SAY NAME2 @2265
  SAY DESC @2266
  
COPY ~sod2bg2_iu/itm/crimsondawn2/dtkswd8a.itm~ ~override~	//Crimson Dawn +5
  SAY NAME1 @2253
  SAY NAME2 @2263
  SAY UNIDENTIFIED_DESC @2255
  SAY DESC @2264
  
COPY ~sod2bg2_iu/itm/severance1/dtkswd9.itm~ ~override~	  //Severance +3
  SAY NAME2 @2261
  SAY DESC @2262

COPY ~sod2bg2_iu/itm/crimsondawn1/dtkswd8.itm~ ~override~	//Crimson Dawn +3
  SAY NAME1 @2253
  SAY NAME2 @2259
  SAY UNIDENTIFIED_DESC @2255
  SAY DESC @2260
  
COPY ~sod2bg2_iu/itm/drgblood/dtkdgbld.itm~ ~override~	//Shadow Dragon's Blood
  SAY NAME1 @2247
  SAY NAME2 @2247
  SAY UNIDENTIFIED_DESC @2248
  SAY DESC @2248
  
COPY ~sod2bg2_iu/itm/drgblood/dtkdgbl2.itm~ ~override~	//Dragon's Blood
  SAY NAME1 @2670
  SAY NAME2 @2670
  SAY UNIDENTIFIED_DESC @2671
  SAY DESC @2671

COPY ~sod2bg2_iu/itm/creitems/dtkskla1.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2244
COPY ~sod2bg2_iu/itm/creitems/dtkskla2.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2245
COPY ~sod2bg2_iu/itm/creitems/dtkskla3.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2246
  
COPY ~sod2bg2_iu/itm/creitems/dtkskls3.itm~ ~override~	//shield for skeleton summon
  SAY NAME2 @2243
  
COPY ~sod2bg2_iu/itm/creitems/dtksklh1.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh2.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh3.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh4.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh5.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh6.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh7.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh8.itm~ ~override~	//helmet for skeleton summon

COPY ~sod2bg2_iu/itm/creitems/dtkdrsw1.itm~ ~override~	//attack for drowned-in-blood summon
	SAY NAME1 @5051
	SAY NAME2 @5051

COPY ~sod2bg2_iu/itm/creitems/dtkslig1.itm~ ~override~	//attack for slime golem
	SAY NAME1 @5051
	SAY NAME2 @5051

COPY ~sod2bg2_iu/itm/creitems/dtktren1.itm~ ~override~	//ring for dark treant
COPY ~sod2bg2_iu/itm/creitems/dtktren2.itm~ ~override~	//attack for dark treant
	SAY NAME1 @5051
	SAY NAME2 @5051
	
COPY ~sod2bg2_iu/itm/creitems/dtkputzw.itm~ ~override~	//attack for putrid zombie
	SAY NAME1 @5051
	SAY NAME2 @5051
	
COPY ~sod2bg2_iu/itm/creitems/dtkcharw.itm~ ~override~	//attack for charged ghoul
	SAY NAME1 @5051
	SAY NAME2 @5051

COPY ~sod2bg2_iu/itm/acid4/dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
  SAY NAME1 @2000
  SAY NAME2 @2003
  SAY DESC @2004

COPY ~sod2bg2_iu/itm/acid5/dtkswd1a.itm~ ~override~ 	//Tongue of Burning Acid +5
  SAY NAME1 @2000
  SAY NAME2 @2005
  SAY DESC @2006

COPY ~sod2bg2_iu/itm/softft1/dtkboot1.itm~ ~override~ 	//Quicksilver Sabatons
  SAY NAME1 @2011
  SAY NAME2 @2014
  SAY DESC @2015

COPY ~sod2bg2_iu/itm/crownt/dtkcrwn1.itm~ ~override~ //Crown of Truths
  SAY NAME1 @2016
  SAY NAME2 @2020
  SAY DESC @2021


ACTION_IF FILE_EXISTS_IN_GAME ~bdhelm09.itm~ BEGIN // check if already present
COPY_EXISTING ~bdhelm09.itm~ ~override~	//Fixing description image for Helmet of Dumathoin
  WRITE_ASCII 0x58 dtkhdum1
  END
  
COPY ~sod2bg2_iu/itm/helmduma/dtkhelm1.itm~ ~override~ //Horned Helm of Dumathoin
  SAY NAME1 @2720
  SAY NAME2 @2022
  SAY UNIDENTIFIED_DESC @2723
  SAY DESC @2023

COPY ~sod2bg2_iu/itm/aeyes/dtkamul1.itm~ ~override~ //Archer's Eagle Eyes
  SAY NAME2 @2024
  SAY DESC @2025

COPY ~sod2bg2_iu/itm/bbelt/dtkblt01.itm~ ~override~ //Belt of the Blademaster
  SAY NAME2 @2026
  SAY DESC @2027

COPY ~sod2bg2_iu/itm/biter/dtkdart1.itm~ ~override~ //Biter +3
  SAY NAME2 @2028
  SAY DESC @2029
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkbiter%" END

COPY ~sod2bg2_iu/itm/voidsw/dtkswd02.itm~ ~override~ //Vampiric Voidsword +5
  SAY NAME2 @2030
  SAY DESC @2031

COPY ~sod2bg2_iu/itm/voidham/dtkham01.itm~ ~override~ //Vampiric Voidhammer +5
  SAY NAME2 @2032
  SAY DESC @2033

COPY ~sod2bg2_iu/itm/bardhat/dtkhat01.itm~ ~override~ //Melodius Bard Hat
  SAY NAME1 @2034
  SAY NAME2 @2035
  SAY DESC @2036

COPY ~sod2bg2_iu/itm/frobe/dtkrobe1.itm~ ~override~ //Robe of Roaring Flames
  SAY NAME2 @2037
  SAY DESC @2038

COPY ~sod2bg2_iu/itm/buckler/dtkshld1.itm~ ~override~ //Mirrored Buckler of the Fist +2
  SAY NAME2 @2039
  SAY DESC @2040
  	SET projectile = EVAL "%dtkdagg1%"
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkaxel%"
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtkaxham%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect


COPY ~sod2bg2_iu/itm/sunder5/dtkham02.itm~ ~override~  //Sundermaul +5
  SAY NAME2 @2043
  SAY DESC @2044

COPY ~sod2bg2_iu/itm/flameswd/dtkswd03.itm~ ~override~ //The Scorched Earth +3
  SAY NAME1 @2000
  SAY NAME2 @2045
  SAY DESC @2046

COPY ~sod2bg2_iu/itm/starboot1/dtkboot2.itm~ ~override~	//Star-Strewn Boots of Antimagic
  SAY NAME1 @2011 
  SAY NAME2 @2049
  SAY DESC @2050

COPY ~sod2bg2_iu/itm/vcdragp/dtkplat1.itm~ ~override~ //Verdant Crimson Dragon Plate
  SAY NAME1 @2007
  SAY NAME2 @2051
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2052

COPY ~sod2bg2_iu/itm/vsdragl/dtkleat1.itm~ ~override~ //Verdant Shadow Dragonscale
  SAY NAME1 @2007
  SAY NAME2 @2053
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2054

COPY ~sod2bg2_iu/itm/ccdragpb/dtkplt1b.itm~ ~override~ //Chromatic Crimson Dragon Plate (Blue Scales)
  SAY NAME1 @2007
  SAY NAME2 @2055
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2056

COPY ~sod2bg2_iu/itm/ccdragps/dtkplt1a.itm~ ~override~ //Chromatic Crimson Dragon Plate (Shadow Scales)
  SAY NAME1 @2007
  SAY NAME2 @2057
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2058

COPY ~sod2bg2_iu/itm/ccdragpw/dtkplt1c.itm~ ~override~ //Chromatic Crimson Dragon Plate (White Scales)
  SAY NAME1 @2007
  SAY NAME2 @2059
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2060

COPY ~sod2bg2_iu/itm/ccdragpsil/dtkplt1d.itm~ ~override~ //Chromatic Crimson Dragon Plate (Silver Scales)
  SAY NAME1 @2007
  SAY NAME2 @2061
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2062

COPY ~sod2bg2_iu/itm/csdraglb/dtklea1b.itm~ ~override~ //Chromatic Shadow Dragonscale (Blue Scales)
  SAY NAME1 @2007
  SAY NAME2 @2063
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2064

COPY ~sod2bg2_iu/itm/csdraglr/dtklea1a.itm~ ~override~ //Chromatic Shadow Dragonscale (Red Scales)
  SAY NAME1 @2007
  SAY NAME2 @2065
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2066

COPY ~sod2bg2_iu/itm/csdraglw/dtklea1c.itm~ ~override~ //Chromatic Shadow Dragonscale (White Scales)
  SAY NAME1 @2007
  SAY NAME2 @2067
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2068

COPY ~sod2bg2_iu/itm/csdraglsil/dtklea1d.itm~ ~override~ //Chromatic Shadow Dragonscale (Silver Scales)
  SAY NAME1 @2007
  SAY NAME2 @2069
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2070

COPY ~sod2bg2_iu/itm/stalkg1/dtkbrac1.itm~ ~override~ //Stalker's Bracers of Blinding Strike
  SAY NAME2 @2073
  SAY DESC @2074

COPY ~sod2bg2_iu/itm/ruby/dtkruby.itm~ ~override~	//Heart of Flame
  SAY NAME1 @2075
  SAY NAME2 @2076
  SAY UNIDENTIFIED_DESC @2077
  SAY DESC @2078

COPY ~sod2bg2_iu/itm/topaz/dtktopaz.itm~ ~override~	//Eye of Ichor
  SAY NAME1 @2075
  SAY NAME2 @2079
  SAY UNIDENTIFIED_DESC @2077
  SAY DESC @2080

COPY ~sod2bg2_iu/itm/frost/dtkfrost.itm~ ~override~	//Soul of Frost
  SAY NAME1 @2075
  SAY NAME2 @2081
  SAY UNIDENTIFIED_DESC @2077
  SAY DESC @2082 

COPY ~sod2bg2_iu/itm/flameswd1/dtkswd3a.itm~ ~override~	//The Scorched Earth +5
  SAY NAME1 @2000
  SAY NAME2 @2083
  SAY DESC @2084

COPY ~sod2bg2_iu/itm/luckbelt1/dtkblt02.itm~ ~override~	//Tymora's Cinch
  SAY NAME2 @2123
  SAY DESC @2124

COPY ~sod2bg2_iu/itm/cursestaff1/dtkstaf1.itm~ ~override~	//Uncursed Staff of Antipode
  SAY NAME2 @2125
  SAY DESC @2126

COPY ~sod2bg2_iu/itm/backwhack1/dtkclub1.itm~ ~override~	//Nasty Backwhacker +4
  SAY NAME2 @2127
  SAY DESC @2128

COPY ~sod2bg2_iu/itm/bansheebow1/dtkbow01.itm~ ~override~	//Bow of the Wailing Banshee +4
  SAY NAME2 @2129
  SAY DESC @2130

COPY ~sod2bg2_iu/itm/nimblef1/dtkglov1.itm~ ~override~	//Adventurer's Nimble Gloves of Guarding
  SAY NAME2 @2131
  SAY DESC @2132

COPY ~sod2bg2_iu/itm/voidquiv/dtkquiv1.itm~ ~override~	//Quiver of Void-Tipped Arrows +3
  SAY NAME2 @2133
  SAY DESC @2134

COPY ~sod2bg2_iu/itm/darkbag/dtkquiv2.itm~ ~override~	//Bag of Darkness +3
  SAY NAME2 @2135
  SAY DESC @2136

COPY ~sod2bg2_iu/itm/cloakarcan1/dtkclk01.itm~ ~override~	//Illusory Cloak of Arcana
  SAY NAME2 @2137
  SAY DESC @2138

COPY ~sod2bg2_iu/itm/eledagg1/dtktdag1.itm~ ~override~	//Element's Fury +3
  SAY NAME1 @2546	
  SAY NAME2 @2139
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2140
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkdagg1%" END

COPY ~sod2bg2_iu/itm/eledagg2d/dtktdag2.itm~ ~override~	//Element's Fury +4 - ice
  SAY NAME1 @2546
  SAY NAME2 @2141
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2142
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkdagg1%" END
  
COPY ~sod2bg2_iu/itm/eledagg2a/dtktdag3.itm~ ~override~	//Element's Fury +4 - fire
  SAY NAME1 @2546
  SAY NAME2 @2141
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2653
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkdagg1%" END
  
COPY ~sod2bg2_iu/itm/eledagg2b/dtktdag4.itm~ ~override~	//Element's Fury +4 - acid
  SAY NAME1 @2546
  SAY NAME2 @2141
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2654
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkdagg1%" END
  
COPY ~sod2bg2_iu/itm/eledagg2c/dtktdag5.itm~ ~override~	//Element's Fury +4 - electricity
  SAY NAME1 @2546
  SAY NAME2 @2141
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2655
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkdagg1%" END

COPY ~sod2bg2_iu/itm/maelaxe/dtkaxe01.itm~ ~override~	//Maelstrom Axe +3
  SAY NAME1 @2660
  SAY NAME2 @2143
  SAY UNIDENTIFIED_DESC @2661
  SAY DESC @2144
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkaxel%" END

COPY ~sod2bg2_iu/itm/maelpike/dtkhalb1.itm~ ~override~	//Maelstrom Pike +4
  SAY NAME1 @2664
  SAY NAME2 @2145
  SAY UNIDENTIFIED_DESC @2665
  SAY DESC @2146

COPY ~sod2bg2_iu/itm/maelaxe1/dtkaxe02.itm~ ~override~	//Maelstrom Axe +4
  SAY NAME1 @2660
  SAY NAME2 @2147
  SAY UNIDENTIFIED_DESC @2661
  SAY DESC @2148
  LPF ALTER_ITEM_HEADER INT_VAR header = 1 projectile = EVAL "%dtkaxham%" END
  
COPY ~sod2bg2_iu/itm/maelaxe2/dtkaxe2a.itm~ ~override~	//Maelstrom Axe +5
  SAY NAME1 @2660
  SAY NAME2 @2662
  SAY UNIDENTIFIED_DESC @2661
  SAY DESC @2663
  LPF ALTER_ITEM_HEADER INT_VAR header = 1 projectile = EVAL "%dtkaxham%" END


COPY ~sod2bg2_iu/itm/maelpike1/dtkhalb2.itm~ ~override~	//Maelstrom Pike +5
  SAY NAME1 @2664
  SAY NAME2 @2149
  SAY UNIDENTIFIED_DESC @2665
  SAY DESC @2150
  
COPY ~sod2bg2_iu/itm/maelpike2/dtkhalb3.itm~ ~override~	//Maelstrom Pike +6
  SAY NAME1 @2664
  SAY NAME2 @2666
  SAY UNIDENTIFIED_DESC @2665
  SAY DESC @2667

COPY ~sod2bg2_iu/itm/trollblood1/dtkioun1.itm~ ~override~	//Trollkiller's Ioun Stone
  SAY NAME1 @2408
  SAY NAME2 @2151
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2152
    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4032) END
	
COPY ~sod2bg2_iu/itm/trollblood2/dtkioun2.itm~ ~override~	//Trollkiller's Vigorous Ioun Stone
  SAY NAME1 @2408
  SAY NAME2 @2153
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2154
      LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4032) END

COPY ~sod2bg2_iu/itm/egons1/dtkshld2.itm~ ~override~	//Bulwark of Egons +3
  SAY NAME2 @2155
  SAY DESC @2156

COPY ~sod2bg2_iu/itm/vex1/dtkswd04.itm~ ~override~	//Vexation +5
  SAY NAME2 @2157
  SAY DESC @2158

COPY ~sod2bg2_iu/itm/egons2/dtkshd2a.itm~ ~override~	//Bulwark of Egons +4
  SAY NAME2 @2159
  SAY DESC @2160

COPY ~sod2bg2_iu/itm/emerald/dtkemrld.itm~ ~override~	//Breath of Wind
  SAY NAME1 @2075
  SAY NAME2 @2165
  SAY UNIDENTIFIED_DESC @2077
  SAY DESC @2166

COPY ~sod2bg2_iu/itm/astralxbow1/dtkxbow1.itm~ ~override~	//Astral Crossbow +4
  SAY NAME2 @2167
  SAY DESC @2168

COPY ~sod2bg2_iu/itm/shadowspear1/dtksper1.itm~ ~override~	//Shadowed Spear of the Tempest +4
  SAY NAME2 @2169
  SAY DESC @2170
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkwind%" END

COPY ~sod2bg2_iu/itm/shadowspear2/dtkspr1a.itm~ ~override~	//Shadowed Spear of the Tempest +6
  SAY NAME2 @2171
  SAY DESC @2172
  LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkwind%" END

COPY ~sod2bg2_iu/itm/ccdragpgrn/dtkplt1e.itm~ ~override~	//Carmine Viridian Dragon Plate
  SAY NAME1 @2007
  SAY NAME2 @2173
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2174

COPY ~sod2bg2_iu/itm/csdraglgrn/dtklea1e.itm~ ~override~	//Umbral Viridian Dragonscale
  SAY NAME1 @2007
  SAY NAME2 @2175
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2176

COPY ~sod2bg2_iu/itm/gdragarm/dtkleat2.itm~ ~override~	//Green Dragonscale Armor +4 - leather appearance
  SAY NAME1 @2007
  SAY NAME2 @2178
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2180
  
COPY ~sod2bg2_iu/itm/gdragarm/dtklea2a.itm~ ~override~	//Green Dragonscale Armor +4 - chain appearance
  SAY NAME1 @2007
  SAY NAME2 @2178
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2180

COPY ~sod2bg2_iu/itm/dragblade/dtkswd05.itm~ ~override~	//Silver Dragon Blade +4
  SAY NAME2 @2181
  SAY DESC @2182

COPY ~sod2bg2_iu/itm/dragblade1/dtkswd5a.itm~ ~override~	//Silver Dragon Blade +5
  SAY NAME2 @2183
  SAY DESC @2184

COPY ~sod2bg2_iu/itm/blackscale/dtkscal1.itm~ ~override~ 	//Black Dragon Scales
  SAY NAME1 @2187
  SAY NAME2 @2188
  SAY UNIDENTIFIED_DESC @2189
  SAY DESC @2190

COPY ~sod2bg2_iu/itm/acid4a/dtkswd1b.itm~ ~override~	//Tongue of Acid +4
  SAY NAME2 @2191
  SAY DESC @2192

COPY ~sod2bg2_iu/itm/acid5a/dtkswd1c.itm~ ~override~	//Tongue of Acid +5
  SAY NAME2 @2193
  SAY DESC @2194

COPY ~sod2bg2_iu/itm/nightarm1/dtklea02.itm~ ~override~ //The Night's Embrace +7 - (Leather appearance variant)
  SAY NAME2 @2203
  SAY DESC @2204
	  COPY ~sod2bg2_iu/itm/nightarm1/dtkleat3.itm~ ~override~ //The Night's Embrace +7 - (CHain appearance variant)
	  SAY NAME2 @2203
	  SAY DESC @2204
  
COPY ~sod2bg2_iu/itm/jester1/dtkbrac2.itm~ ~override~ 	//Wicked Jester's Bracers
  SAY NAME2 @2205
  SAY DESC @2206

COPY ~sod2bg2_iu/itm/ringpurity1/dtkring1.itm~ ~override~ 	//Holy Ring of Purity
  SAY NAME2 @2209
  SAY DESC @2210

COPY ~sod2bg2_iu/itm/dervish1/dtkswd06.itm~ ~override~ 	//Dervish Crescent of Speed +3
  SAY NAME1 @2672
  SAY NAME2 @2213
  SAY UNIDENTIFIED_DESC @2673
  SAY DESC @2214

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4074) STR_VAR bam_file = dtkdvisp RET icon END
COPY ~sod2bg2_iu/itm/varscona1/dtkswd07.itm~ ~override~	//Varscona +3
  SAY NAME1 @2000
  SAY NAME2 @2223
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2224
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1474 parameter1 = RESOLVE_STR_REF(@4024) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 12015 parameter1 = RESOLVE_STR_REF(@4072) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17399 parameter1 = RESOLVE_STR_REF(@4073) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 108 parameter2 = icon END
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1100 parameter1 = RESOLVE_STR_REF(@4024) END
		COPY ~sod2bg2_iu/itm/varscona2/dtkswd7a.itm~ ~override~	//Varscona +4 - added immediately after to take advantage of new pre-loaded portrait icon
		  SAY NAME1 @2000
		  SAY NAME2 @2225
		  SAY UNIDENTIFIED_DESC @2581
		  SAY DESC @2226
			LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1474 parameter1 = RESOLVE_STR_REF(@4024) END
			LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 12015 parameter1 = RESOLVE_STR_REF(@4072) END
			LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17399 parameter1 = RESOLVE_STR_REF(@4073) END
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 108 parameter2 = icon END
				LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41495 parameter1 = RESOLVE_STR_REF(@4067) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40968 parameter1 = RESOLVE_STR_REF(@4068) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40969 parameter1 = RESOLVE_STR_REF(@4069) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40979 parameter1 = RESOLVE_STR_REF(@4070) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41616 parameter1 = RESOLVE_STR_REF(@4071) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1100 parameter1 = RESOLVE_STR_REF(@4024) END
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1110 parameter1 = RESOLVE_STR_REF(@4067) END
				COPY ~sod2bg2_iu/itm/varscona3/dtkswd7b.itm~ ~override~	//Varscona +5 - added immediately after to take advantage of new pre-loaded portrait icon
				  SAY NAME1 @2000
				  SAY NAME2 @2648
				  SAY UNIDENTIFIED_DESC @2581
				  SAY DESC @2649
					LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1474 parameter1 = RESOLVE_STR_REF(@4024) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 12015 parameter1 = RESOLVE_STR_REF(@4072) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17399 parameter1 = RESOLVE_STR_REF(@4073) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 108 parameter2 = icon END
						LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41495 parameter1 = RESOLVE_STR_REF(@4067) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40968 parameter1 = RESOLVE_STR_REF(@4068) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40969 parameter1 = RESOLVE_STR_REF(@4069) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40979 parameter1 = RESOLVE_STR_REF(@4070) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41616 parameter1 = RESOLVE_STR_REF(@4071) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1100 parameter1 = RESOLVE_STR_REF(@4024) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1110 parameter1 = RESOLVE_STR_REF(@4067) END

COPY ~sod2bg2_iu/itm/stonefire/dtkaxe03.itm~ ~override~	//Stonefire +5
  SAY NAME2 @2227
  SAY DESC @2228

COPY ~sod2bg2_iu/itm/sourcecap/dtksorcp.itm~ ~override~	//Sourcerer's Cap
  SAY NAME1 @2219
  SAY NAME2 @2229
  SAY UNIDENTIFIED_DESC @2221
  SAY DESC @2230

COPY ~sod2bg2_iu/itm/sourcecap2/dtksrcp2.itm~ ~override~	//Sourcerer's Chapeau
  SAY NAME1 @2219
  SAY NAME2 @2231
  SAY UNIDENTIFIED_DESC @2221
  SAY DESC @2232

COPY ~sod2bg2_iu/itm/necroarm/dtknecro.itm~ ~override~		//Raiment of the Lich
  SAY NAME1 @2239
  SAY NAME2 @2240
  SAY UNIDENTIFIED_DESC @2241
  SAY DESC @2242

COPY ~sod2bg2_iu/itm/necroarm2/dtknecr2.itm~ ~override~		//Raiment of the Demilich
  SAY NAME1 @2249
  SAY NAME2 @2250
  SAY UNIDENTIFIED_DESC @2251
  SAY DESC @2252
  
COPY ~sod2bg2_iu/itm/aquamarine/dtkbowat.itm~ ~override~	//Body of Water
  SAY NAME1 @2075
  SAY NAME2 @2339
  SAY UNIDENTIFIED_DESC @2077
  SAY DESC @2340 
  
COPY ~sod2bg2_iu/itm/voghiln/dtkskald.itm~ ~override~	//Skald's Helm (Voghiln's Helm)
  SAY NAME1 @2720
  SAY NAME2 @2401
  SAY UNIDENTIFIED_DESC @2402
  SAY DESC @2403

COPY ~sod2bg2_iu/itm/cynosure/dtkcynos.itm~ ~override~	//Circlet of the Cynosure
  SAY NAME1 @2404
  SAY NAME2 @2405
  SAY UNIDENTIFIED_DESC @2406
  SAY DESC @2407
  
 ACTION_IF FILE_EXISTS_IN_GAME ~bdhelmca.itm~ BEGIN // check if already present for EET games
COPY_EXISTING ~bdhelmca.itm~ ~override~	//Fixing appearance of existing Circlet of Cynosure if present
		SET location = 49
		SET cycle_speed = 90   
		SET r = 0
		SET b = 252
		SET g = 168
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 51
			SET cycle_speed = 90   
			SET r = 0
			SET b = 252
			SET g = 168
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 57 parameter2 = 51 timing = 2 probability1 = 100 END 
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 58 parameter2 = 49 timing = 2 probability1 = 100 END 
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 21 parameter2 = 53 timing = 2 probability1 = 100 END 
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 79 parameter2 = 48 timing = 2 probability1 = 100 END 
END
  
COPY ~sod2bg2_iu/itm/solaraegis/dtksolag.itm~ ~override~	//Solar Aegis +3
  SAY NAME1 @2706
  SAY NAME2 @2427
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2428
  
 ACTION_IF FILE_EXISTS_IN_GAME ~bdshldca.itm~ BEGIN // check if already present for EET games
COPY_EXISTING ~bdshldca.itm~ ~override~	//Fixing appearance of existing Solar Aegis +3 if present
	SET r = 51
	SET b = 51
	SET g = 51
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 32 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 30 parameter2 = 32 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 3 parameter2 = 37 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 96 parameter2 = 34 timing = 2 probability1 = 100 END 
END
  
COPY ~sod2bg2_iu/itm/aster/dtkaster.itm~ ~override~	//Aster's Edge +3
  SAY NAME1 @2000
  SAY NAME2 @2439
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2440
  
ACTION_IF FILE_EXISTS_IN_GAME ~bdsw1hca.itm~ BEGIN // check if already present for EET games
COPY_EXISTING ~bdsw1hca.itm~ ~override~	//Fixing appearance of existing Aster's Edge +3 if present
	WRITE_ASCII 0x3a dtkaster
	WRITE_ASCII	0x76 dtkaster
	SET r = 102
	SET b = 201
	SET g = 204
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END 
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 20 timing = 2 probability1 = 100 END 
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 6 parameter2 = 16 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 217 parameter2 = 21 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 6 parameter2 = 20 timing = 2 probability1 = 100 END 
END

COPY ~sod2bg2_iu/itm/mailhallowed/dtkhmail.itm~ ~override~	//Mail of the Hallowed Hero +3
  SAY NAME1 @2453
  SAY NAME2 @2451
  SAY UNIDENTIFIED_DESC @2454
  SAY DESC @2452
  
ACTION_IF FILE_EXISTS_IN_GAME ~bdchanca.itm~ BEGIN // check if already present for EET games
	COPY_EXISTING ~bdsw1hca.itm~ ~override~	//Fixing appearance of existing Mail of the Hallowed Hero +3 if present
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 79 parameter2 = 2 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 211 parameter2 = 4 timing = 2 probability1 = 100 END 
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 218 parameter2 = 0 timing = 2 probability1 = 100 END 
END

COPY ~sod2bg2_iu/iwdresource/eff/solemn~ ~override~  //Solemn Duty +3
COPY ~sod2bg2_iu/itm/solemn/dtksolem.itm~ ~override~
  SAY NAME1 @2626
  SAY NAME2 @2627
  SAY UNIDENTIFIED_DESC @2628
  SAY DESC @2629
  WRITE_ASCII 0x58 csw1h44
  
  
COPY ~sod2bg2_iu/itm/demonore/dtkdore.itm~ ~override~  //Infernal Iron Ore
  SAY NAME1 @2630
  SAY NAME2 @2630
  SAY UNIDENTIFIED_DESC @2631
  SAY DESC @2631

COPY ~sod2bg2_iu/itm/demonblood/dtkdebld.itm~ ~override~  //Demon Lord's Blood
  SAY NAME1 @2632
  SAY NAME2 @2632
  SAY UNIDENTIFIED_DESC @2633
  SAY DESC @2633  

COPY ~sod2bg2_iu/itm/demon3/dtkswda3.itm~ ~override~  //Gift of the Demon +3
  SAY NAME1 @2000
  SAY NAME2 @2634
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2635 

COPY ~sod2bg2_iu/itm/demon4/dtkswda4.itm~ ~override~		//Gift of the Demon +4
  SAY NAME1 @2000
  SAY NAME2 @2580
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2582
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14780 parameter1 = RESOLVE_STR_REF(@4058) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14672 parameter1 = RESOLVE_STR_REF(@4059) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 8364 parameter1 = RESOLVE_STR_REF(@4057) END
  
COPY ~sod2bg2_iu/itm/demon5/dtkswda5.itm~ ~override~		//Gift of the Demon +5
  SAY NAME1 @2000
  SAY NAME2 @2636
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2637
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14780 parameter1 = RESOLVE_STR_REF(@4058) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14672 parameter1 = RESOLVE_STR_REF(@4059) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 8364 parameter1 = RESOLVE_STR_REF(@4057) END
	  
COPY ~sod2bg2_iu/itm/demoeye/dtkdeye.itm~ ~override~  // Demogorgon's Eye
  SAY NAME1 @2638
  SAY NAME2 @2638
  SAY UNIDENTIFIED_DESC @2639
  SAY DESC @2639 

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4074) STR_VAR bam_file = dtkdvisp RET icon END
COPY ~sod2bg2_iu/itm/coalese/dtkcoals.itm~ ~override~  // Coalesced Shadow Ioun Stone
  SAY NAME1 @2640
  SAY NAME2 @2641
  SAY UNIDENTIFIED_DESC @2642
  SAY DESC @2643 
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41495 parameter1 = RESOLVE_STR_REF(@4067) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40968 parameter1 = RESOLVE_STR_REF(@4068) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40969 parameter1 = RESOLVE_STR_REF(@4069) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 40979 parameter1 = RESOLVE_STR_REF(@4070) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 41616 parameter1 = RESOLVE_STR_REF(@4071) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1474 parameter1 = RESOLVE_STR_REF(@4024) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 12015 parameter1 = RESOLVE_STR_REF(@4072) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17399 parameter1 = RESOLVE_STR_REF(@4073) END
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 108 parameter2 = icon END
	
COPY ~sod2bg2_iu/itm/darkhilt/dtkdhilt.itm~ ~override~  // Dark Moon Hilt
  SAY NAME1 @2644
  SAY NAME2 @2645
  SAY UNIDENTIFIED_DESC @2646
  SAY DESC @2647

COPY ~sod2bg2_iu/itm/shadowgem/dtkshgem.itm~ ~override~	  //Imbued Shadow Gem
  SAY NAME1 @2650
  SAY NAME2 @2650
  SAY UNIDENTIFIED_DESC @2651
  SAY DESC @2651
	COPY ~sod2bg2_iu/2da/dtkshgem.2da~ ~override~	  //2DA required for spell selection
	
COPY ~sod2bg2_iu/itm/csdragpshd/dtkplt3g.itm~ ~override~	  //Viridescent Shadow Dragon Plate (Shadow Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2656
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2657
  
COPY ~sod2bg2_iu/itm/csdraglshd/dtklea1g.itm~ ~override~	  //Viridescent Shadow Dragonscale (Shadow Scales)
  SAY NAME1 @2007	
  SAY NAME2 @2658
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2659

COPY ~sod2bg2_iu/itm/wateredge/dtkswd00.itm~ ~override~	  //Water's Edge +5
  SAY NAME1 @2672	
  SAY NAME2 @2674
  SAY UNIDENTIFIED_DESC @2673
  SAY DESC @2675
  
COPY ~sod2bg2_iu/itm/suncatcher2/dtkshld4.itm~ ~override~	  //The Suncatcher +3
  SAY NAME1 @2676	
  SAY NAME2 @2677
  SAY UNIDENTIFIED_DESC @2678
  SAY DESC @2679
  
COPY ~sod2bg2_iu/itm/wolfscarf/dtkwscrf.itm~ ~override~	  //Winter Wolf Scarf
  SAY NAME1 @2680	
  SAY NAME2 @2681
  SAY UNIDENTIFIED_DESC @2682
  SAY DESC @2683

COPY ~sod2bg2_iu/itm/wolfhat/dtkwhat.itm~ ~override~	  //Winter Wolf Hat
  SAY NAME1 @2684	
  SAY NAME2 @2685
  SAY UNIDENTIFIED_DESC @2686
  SAY DESC @2687  
  
COPY ~sod2bg2_iu/itm/wolfgloves/dtkwglov.itm~ ~override~	  //Winter Wolf gloves
  SAY NAME1 @2688	
  SAY NAME2 @2689
  SAY UNIDENTIFIED_DESC @2690
  SAY DESC @2691  
  
COPY ~sod2bg2_iu/itm/wolfboots/dtkwboot.itm~ ~override~	  //Winter Wolf Boots
  SAY NAME1 @2692	
  SAY NAME2 @2693
  SAY UNIDENTIFIED_DESC @2694
  SAY DESC @2695

  
COPY ~sod2bg2_iu/itm/dervish2/dtkswd6a.itm~ ~override~ 	//Dervish Crescent of Speed +5
  SAY NAME1 @2672
  SAY NAME2 @2696
  SAY UNIDENTIFIED_DESC @2673
  SAY DESC @2697
  
COPY ~sod2bg2_iu/itm/aster1/dtkaste1.itm~ ~override~	//Aster's Edge +4
  SAY NAME1 @2000
  SAY NAME2 @2698
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2699
  
COPY ~sod2bg2_iu/itm/aster2/dtkaste2.itm~ ~override~	//Aster's Edge +5
  SAY NAME1 @2000
  SAY NAME2 @2700
  SAY UNIDENTIFIED_DESC @2581
  SAY DESC @2701

COPY ~sod2bg2_iu/itm/incanblueioun/dtkioun3.itm~ ~override~	//Incandescent Blue Ioun Stone
  SAY NAME1 @2408
  SAY NAME2 @2702
  SAY UNIDENTIFIED_DESC @2410
  SAY DESC @2703
  
 COPY ~sod2bg2_iu/itm/cynosure2/dtkcyno2.itm~ ~override~	//Wisened Circlet of the Cynosure
  SAY NAME1 @2404
  SAY NAME2 @2704
  SAY UNIDENTIFIED_DESC @2406
  SAY DESC @2705 
  
COPY ~sod2bg2_iu/itm/solaraegis1/dtksola1.itm~ ~override~	//Warded Solar Aegis +3
  SAY NAME1 @2706
  SAY NAME2 @2707
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2709
 
COPY ~sod2bg2_iu/itm/mailhallowed1/dtkhplt.itm~ ~override~	//Platemail of the Hallowed Hero +5
  SAY NAME1 @2420
  SAY NAME2 @2710
  SAY UNIDENTIFIED_DESC @2469
  SAY DESC @2711
  
COPY ~sod2bg2_iu/itm/silkrobe/dtksilk.itm~ ~override~	//Spider Silk Gi
  SAY NAME1 @2712
  SAY NAME2 @2713
  SAY UNIDENTIFIED_DESC @2714
  SAY DESC @2715
  
COPY ~sod2bg2_iu/itm/blazeglory1/dtkbln2.itm~ ~override~	//Blazing Glory +5
  SAY NAME1 @2716
  SAY NAME2 @2717
  SAY UNIDENTIFIED_DESC @2718
  SAY DESC @2719
  
COPY ~sod2bg2_iu/itm/blackdraghelm/dtkdhe1a.itm~ ~override~ //Black Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2724
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2725
	COPY ~sod2bg2_iu/itm/blackdraghelm/dtkdhe1b.itm~ ~override~ //Black Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2724
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2725
		COPY ~sod2bg2_iu/itm/blackdraghelm/dtkdhe1c.itm~ ~override~ //Black Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2724
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2725
		  
COPY ~sod2bg2_iu/itm/greendraghelm/dtkdhe2a.itm~ ~override~ //Green Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2726
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2727
	COPY ~sod2bg2_iu/itm/greendraghelm/dtkdhe2b.itm~ ~override~ //Green Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2726
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2727
		COPY ~sod2bg2_iu/itm/greendraghelm/dtkdhe2c.itm~ ~override~ //Green Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2726
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2727
		  
COPY ~sod2bg2_iu/itm/greendragshld/dtkshld5.itm~ ~override~	//Dragonscale Shield +4 (Green Scales)
  SAY NAME1 @2706
  SAY NAME2 @2728
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2729
  
COPY ~sod2bg2_iu/itm/shaddragplate/dtkplt4.itm~ ~override~	  //Shadow Dragon Plate
  SAY NAME1 @2007	
  SAY NAME2 @2730
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2731
  
COPY ~sod2bg2_iu/itm/shaddragchain/dtklea8.itm~ ~override~	  //Shadow Dragonscale Armor +3 - chain appearance
  SAY NAME1 @2007
  SAY NAME2 @2762
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2763
  
COPY ~sod2bg2_iu/itm/shaddraghelm/dtkdhe3a.itm~ ~override~ //Shadow Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2732
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2733
	COPY ~sod2bg2_iu/itm/shaddraghelm/dtkdhe3b.itm~ ~override~ //Shadow Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2732
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2733
		COPY ~sod2bg2_iu/itm/shaddraghelm/dtkdhe3c.itm~ ~override~ //Shadow Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2732
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2733
		  
COPY ~sod2bg2_iu/itm/shaddragshld/dtksdrgs.itm~ ~override~	//Dragonscale Shield +4 (Shadow Scales)
  SAY NAME1 @2706
  SAY NAME2 @2734
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2735
  
COPY ~sod2bg2_iu/itm/reddraghelm/dtkdhe4a.itm~ ~override~ //Red Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2736
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2737
	COPY ~sod2bg2_iu/itm/reddraghelm/dtkdhe4b.itm~ ~override~ //Red Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2736
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2737
		COPY ~sod2bg2_iu/itm/reddraghelm/dtkdhe4c.itm~ ~override~ //Red Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2736
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2737
		  
COPY ~sod2bg2_iu/itm/reddragchain/dtklea4.itm~ ~override~	  //Red Dragonscale Armor +3 - leather appearance
  SAY NAME1 @2007
  SAY NAME2 @2740
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2741
  
COPY ~sod2bg2_iu/itm/reddragchain/dtklea4a.itm~ ~override~	  //Red Dragonscale Armor +3 - chain appearance
  SAY NAME1 @2007
  SAY NAME2 @2740
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2741
  
  
COPY ~sod2bg2_iu/itm/reddragshld/dtkrdrgs.itm~ ~override~	//Dragonscale Shield +3 (Red Scales)
  SAY NAME1 @2706
  SAY NAME2 @2742
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2743
  
COPY ~sod2bg2_iu/itm/sildragshld/dtksishd.itm~ ~override~	//Dragonscale Shield +3 (Silver Scales)
  SAY NAME1 @2706
  SAY NAME2 @2744
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2745
  
 COPY ~sod2bg2_iu/itm/sildragchain/dtklea5.itm~ ~override~	  //Silver Dragonscale Armor +3 - leather appearance
  SAY NAME1 @2007
  SAY NAME2 @2746
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2747
  
 COPY ~sod2bg2_iu/itm/sildragchain/dtklea5a.itm~ ~override~	  //Silver Dragonscale Armor +3 - chain appearance
  SAY NAME1 @2007
  SAY NAME2 @2746
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2747
  
COPY ~sod2bg2_iu/itm/sildraghelm/dtkdhe5a.itm~ ~override~ //Silver Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2748
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2749
	COPY ~sod2bg2_iu/itm/sildraghelm/dtkdhe5b.itm~ ~override~ //Silver Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2748
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2749
		COPY ~sod2bg2_iu/itm/sildraghelm/dtkdhe5c.itm~ ~override~ //Silver Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2748
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2749
		  
COPY ~sod2bg2_iu/itm/whitedragplate/dtkplt2.itm~ ~override~	  //White Dragon Plate
  SAY NAME1 @2007	
  SAY NAME2 @2750
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2751
  
COPY ~sod2bg2_iu/itm/whitedragchain/dtklea9.itm~ ~override~	//White Dragonscale Armor +6 - leather appearance
  SAY NAME1 @2007
  SAY NAME2 @2764
  SAY UNIDENTIFIED_DESC @2009
  SAY DESC @2765
  
  COPY ~sod2bg2_iu/itm/whitedragshld/dtkwdshd.itm~ ~override~	//Dragonscale Shield +4 (White Scales)
  SAY NAME1 @2706
  SAY NAME2 @2752
  SAY UNIDENTIFIED_DESC @2708
  SAY DESC @2753
  
COPY ~sod2bg2_iu/itm/whitedraghelm/dtkdhe6a.itm~ ~override~ //White Dragon Helm - variant 1
  SAY NAME1 @2720
  SAY NAME2 @2754
  SAY UNIDENTIFIED_DESC @2721
  SAY DESC @2755
	COPY ~sod2bg2_iu/itm/whitedraghelm/dtkdhe6b.itm~ ~override~ //White Dragon Helm - variant 2
	  SAY NAME1 @2720
	  SAY NAME2 @2754
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2755
		COPY ~sod2bg2_iu/itm/whitedraghelm/dtkdhe6c.itm~ ~override~ //White Dragon Helm - variant 3
		  SAY NAME1 @2720
		  SAY NAME2 @2754
		  SAY UNIDENTIFIED_DESC @2722
		  SAY DESC @2755
		  
COPY ~sod2bg2_iu/itm/bluedragchain/dtklea6.itm~ ~override~	  //Blue Dragonscale Armor +6 - leather appearance
  SAY NAME1 @2007	
  SAY NAME2 @2756
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2757
  
COPY ~sod2bg2_iu/itm/bluedragchain/dtklea6a.itm~ ~override~	  //Blue Dragonscale Armor +6 - chain appearance
  SAY NAME1 @2007	
  SAY NAME2 @2756
  SAY UNIDENTIFIED_DESC @2179
  SAY DESC @2757
  
COPY ~sod2bg2_iu/itm/bluedragshld/dtkbldsh.itm~ ~override~	//Dragonscale Shield +4 (Blue Scales)
SAY NAME1 @2706
SAY NAME2 @2758
SAY UNIDENTIFIED_DESC @2708
SAY DESC @2759
  
COPY ~sod2bg2_iu/itm/bluedraghelm/dtkdhe7a.itm~ ~override~ //Blue Dragon Helm - variant 1
SAY NAME1 @2720
SAY NAME2 @2760
SAY UNIDENTIFIED_DESC @2721
SAY DESC @2761
COPY ~sod2bg2_iu/itm/bluedraghelm/dtkdhe7b.itm~ ~override~ //Blue Dragon Helm - variant 2
  SAY NAME1 @2720
  SAY NAME2 @2760
  SAY UNIDENTIFIED_DESC @2722
  SAY DESC @2761
	COPY ~sod2bg2_iu/itm/bluedraghelm/dtkdhe7c.itm~ ~override~ //Blue Dragon Helm - variant 3
	  SAY NAME1 @2720
	  SAY NAME2 @2760
	  SAY UNIDENTIFIED_DESC @2722
	  SAY DESC @2761
	  
COPY ~sod2bg2_iu/itm/dreadhamm1/dtkham3.itm~ ~override~	  //Dread Hammer +3
  SAY NAME1 @2530	
  SAY NAME2 @2773
  SAY UNIDENTIFIED_DESC @2532
  SAY DESC @2774
			  
/////////////////////////////
//Adding Cromwell Dialogues//
/////////////////////////////


// compiled in serial so that COPY_TRANS will get the one before it
COMPILE ~sod2bg2_iu/dialogue/croma1.d~ // Modified Red and Shadow Dragon Scale options for Cromwell
COMPILE ~sod2bg2_iu/dialogue/crom1.d~ // Tongue of Acid +4
COMPILE ~sod2bg2_iu/dialogue/crom2.d~ // The Suncatcher +3
COMPILE ~sod2bg2_iu/dialogue/crom3.d~ // Quicksilver Sabatons
COMPILE ~sod2bg2_iu/dialogue/crom4.d~ // Crown of Lies +1
COMPILE ~sod2bg2_iu/dialogue/crom5.d~ // Horned Helm of Dumathoin
COMPILE ~sod2bg2_iu/dialogue/crom6.d~ // Archer's Eagle Eyes
COMPILE ~sod2bg2_iu/dialogue/crom7.d~ // Belt of the Blademaster
COMPILE ~sod2bg2_iu/dialogue/crom8.d~ // Biter +3
COMPILE ~sod2bg2_iu/dialogue/crom9.d~ // Vampiric Voidsword +5
COMPILE ~sod2bg2_iu/dialogue/crom10.d~ // Vampiric Voidhammer +5
COMPILE ~sod2bg2_iu/dialogue/crom11.d~ // Melodius Bard Hat
COMPILE ~sod2bg2_iu/dialogue/crom12.d~ // Robe of Roaring Flames
COMPILE ~sod2bg2_iu/dialogue/crom13.d~ // Mirrored Buckler of the Fist +2
COMPILE ~sod2bg2_iu/dialogue/crom14.d~ // Sundermaul +5
COMPILE ~sod2bg2_iu/dialogue/crom15.d~ // The Scorched Earth +3
COMPILE ~sod2bg2_iu/dialogue/crom16.d~ // Star-Strewn Boots of Antimagic
COMPILE ~sod2bg2_iu/dialogue/crom17.d~ // Verdant Crimson/Shadow armor
COMPILE ~sod2bg2_iu/dialogue/crom18.d~ // Chromatic Crimson/Carmine Viridian armor
COMPILE ~sod2bg2_iu/dialogue/crom19.d~ // Chromatic Shadow/Umbral Viridian armor
COMPILE ~sod2bg2_iu/dialogue/crom20.d~ // Stalker's Gauntlets of Blinding Strike
COMPILE ~sod2bg2_iu/dialogue/crom21.d~ // The Scorched Earth +5
COMPILE ~sod2bg2_iu/dialogue/crom22.d~ // Cloverleaf +1
COMPILE ~sod2bg2_iu/dialogue/crom23.d~ // Uncursed Staff of Antipode
COMPILE ~sod2bg2_iu/dialogue/crom23a.d~ // Uncursed Staff of Antipode - recharge
COMPILE ~sod2bg2_iu/dialogue/crom24.d~ // Nasty Backwhacker +4
COMPILE ~sod2bg2_iu/dialogue/crom25.d~ // Bow of the Wailing Banshee +4
COMPILE ~sod2bg2_iu/dialogue/crom26.d~ // Adventurer's Nimble Gloves of Guarding
COMPILE ~sod2bg2_iu/dialogue/crom27.d~ // Quiver of Void-Tipped Arrows +3
COMPILE ~sod2bg2_iu/dialogue/crom28.d~ // Bag of Darkness +3
COMPILE ~sod2bg2_iu/dialogue/crom29.d~ // Illusory Cloak of Arcana
COMPILE ~sod2bg2_iu/dialogue/crom30.d~ // Element's Fury +3
COMPILE ~sod2bg2_iu/dialogue/crom31.d~ // Element's Fury +4
COMPILE ~sod2bg2_iu/dialogue/crom32.d~ // Maelstrom Axe +3 or Pike +4
COMPILE ~sod2bg2_iu/dialogue/crom33.d~ // Maelstrom Axe +4
COMPILE ~sod2bg2_iu/dialogue/crom34.d~ // Maelstrom Pike +5
COMPILE ~sod2bg2_iu/dialogue/crom35.d~ // Trollkiller's Ioun Stone
COMPILE ~sod2bg2_iu/dialogue/crom36.d~ // Trollkiller's Vigorous Ioun Stone
COMPILE ~sod2bg2_iu/dialogue/crom37.d~ // Bulwark of Egons +3
COMPILE ~sod2bg2_iu/dialogue/crom38.d~ // Vexation +5
COMPILE ~sod2bg2_iu/dialogue/crom39.d~ // Bulwark of Egons +4
COMPILE ~sod2bg2_iu/dialogue/crom40.d~ // Astral Crossbow +4
COMPILE ~sod2bg2_iu/dialogue/crom41.d~ // Shadowed Spear of the Tempest +4
COMPILE ~sod2bg2_iu/dialogue/crom42.d~ // Shadowed Spear of the Tempest +6
COMPILE ~sod2bg2_iu/dialogue/crom43.d~ // Green Dragonscale Armor +4/Dragonscale Shield +4(Green Scales)/Green Dragon Plate +3/Green Dragon Helm
COMPILE ~sod2bg2_iu/dialogue/crom44.d~ // Silver Dragon Blade +4
COMPILE ~sod2bg2_iu/dialogue/crom45.d~ // Silver Dragon Blade +5
//COMPILE ~sod2bg2_iu/dialogue/crom46.d~ // Deprecated
COMPILE ~sod2bg2_iu/dialogue/crom47.d~ // Tongue of Acid +5
COMPILE ~sod2bg2_iu/dialogue/crom48.d~ // The Night's Embrace +7
COMPILE ~sod2bg2_iu/dialogue/crom49.d~ // Wicked Jester's Bracers
COMPILE ~sod2bg2_iu/dialogue/crom50.d~ // Holy Ring of Purity
COMPILE ~sod2bg2_iu/dialogue/crom51.d~ // Dervish Crescent of Speed +3
COMPILE ~sod2bg2_iu/dialogue/crom52.d~ // Varscona +3
COMPILE ~sod2bg2_iu/dialogue/crom53.d~ // Varscona +4
COMPILE ~sod2bg2_iu/dialogue/crom54.d~ // Stonefire +5
COMPILE ~sod2bg2_iu/dialogue/crom55.d~ // Sourceror's Cap
COMPILE ~sod2bg2_iu/dialogue/crom56.d~ // Sourceror's Cap +1
COMPILE ~sod2bg2_iu/dialogue/crom57.d~ // Raiment of the Lich +4
COMPILE ~sod2bg2_iu/dialogue/crom58.d~ // Raiment of the Lich +5
COMPILE ~sod2bg2_iu/dialogue/crom59.d~ // Trollkiller's Fireball/Thunder Thrust/Hoar of Frost/Corrosion/Ko'Dezza's Multi-Fireball/Ko'Dezza's Slime Golem/Fell Rage/Infernal Bone Shield/Maelstrom/Cataclysm
COMPILE ~sod2bg2_iu/dialogue/crom60.d~ // Water's Edge +5
COMPILE ~sod2bg2_iu/dialogue/crom61.d~ // Dervish Crescent of Speed +5
COMPILE ~sod2bg2_iu/dialogue/crom62.d~ // Aster's Edge +4
COMPILE ~sod2bg2_iu/dialogue/crom63.d~ // Crimson Dawn +3
COMPILE ~sod2bg2_iu/dialogue/crom64.d~ // Severance +3
COMPILE ~sod2bg2_iu/dialogue/crom65.d~ // Crimson Dawn +5
COMPILE ~sod2bg2_iu/dialogue/crom66.d~ // Severance +5
COMPILE ~sod2bg2_iu/dialogue/crom67.d~ // Black Dragon Plate +3/Black Dragonscale +4/Dragonscale Shield +4 (black scales)/Black Dragon Helm
COMPILE ~sod2bg2_iu/dialogue/crom68.d~ // Chromatic Crimson/Carmine Viridian/Scarlet Viridescent Dragonscale
COMPILE ~sod2bg2_iu/dialogue/crom69.d~ // Chromatic Shadow/Umbral Viridian Dragon Plate
COMPILE ~sod2bg2_iu/dialogue/crom70.d~ // Martyr's Morningstar +3
COMPILE ~sod2bg2_iu/dialogue/crom71.d~ // Martyr's Morningstar +5
COMPILE ~sod2bg2_iu/dialogue/crom72.d~ // Heartwood Ring - Original, Fire, Water, Wind, Frost, Earth
COMPILE ~sod2bg2_iu/dialogue/crom73.d~ // Bolt of Frostfire +2
COMPILE ~sod2bg2_iu/dialogue/crom74.d~ // Bolt of Frostfire +2
COMPILE ~sod2bg2_iu/dialogue/crom75.d~ // Remorhaz Shell Helm
COMPILE ~sod2bg2_iu/dialogue/crom76.d~ // Gift of the Demon +3
COMPILE ~sod2bg2_iu/dialogue/crom77.d~ // Gift of the Demon +4
COMPILE ~sod2bg2_iu/dialogue/crom78.d~ // Gift of the Demon +5
COMPILE ~sod2bg2_iu/dialogue/crom79.d~ // Varscona +5
COMPILE ~sod2bg2_iu/dialogue/crom80.d~ // Maelstrom Axe +5
COMPILE ~sod2bg2_iu/dialogue/crom81.d~ // Maelstrom Pike +6
COMPILE ~sod2bg2_iu/dialogue/crom82.d~ // Aster's Edge +5
COMPILE ~sod2bg2_iu/dialogue/crom83.d~ // Wisened Circlet of the Cynosure
COMPILE ~sod2bg2_iu/dialogue/crom84.d~ // Warded Solar Aegis +3
COMPILE ~sod2bg2_iu/dialogue/crom85.d~ // Plate Mail of the Hallowed Hero +5
COMPILE ~sod2bg2_iu/dialogue/crom86.d~ // Spider Silk Gi
COMPILE ~sod2bg2_iu/dialogue/crom87.d~ // Blazing Glory +5
COMPILE ~sod2bg2_iu/dialogue/crom88.d~ // Silver Dragon Scale(Plate)/Silver Dragonscale Armor +3/Dragonscale Shield +3(Silver Scales)/Silver Dragon Helm
COMPILE ~sod2bg2_iu/dialogue/crom89.d~ // White Dragon Plate +2/White Dragon Scale Armor(original)/Dragonscale Shield +4(White Scales)/White Dragon Helm
COMPILE ~sod2bg2_iu/dialogue/crom90.d~ // Blue Dragon Plate/Blue Dragonscale Armor +6/Dragonscale Shield +4(Blue Scales)/Blue Dragon Helm
COMPILE ~sod2bg2_iu/dialogue/crom91.d~ // Dread Hammer +3


EXTEND_BOTTOM ~ar0334.bcs~ ~sod2bg2_iu/scripts/ar0334.baf~		//item generating script for cromwell


/////////////////////////////
//Adding Cespenar Dialogues//
/////////////////////////////


// compiled in serial so that COPY_TRANS will get the one before it
COMPILE ~sod2bg2_iu/dialogue/cespya1.d~ // Dragon Scales - new options
COMPILE ~sod2bg2_iu/dialogue/cespya2.d~ // Heartwood Ring - alternate dialogue with new options for Elementals
COMPILE ~sod2bg2_iu/dialogue/cespy1.d~ // Tongue of Acid +4
COMPILE ~sod2bg2_iu/dialogue/cespy2.d~ // The Suncatcher +3
COMPILE ~sod2bg2_iu/dialogue/cespy3.d~ // Quicksilver Sabatons
COMPILE ~sod2bg2_iu/dialogue/cespy4.d~ // Crown of Lies +1
COMPILE ~sod2bg2_iu/dialogue/cespy5.d~ // Horned Helm of Dumathoin
COMPILE ~sod2bg2_iu/dialogue/cespy6.d~ // Archer's Eagle Eyes
COMPILE ~sod2bg2_iu/dialogue/cespy7.d~ // Belt of the Blademaster
COMPILE ~sod2bg2_iu/dialogue/cespy8.d~ // Biter +3
COMPILE ~sod2bg2_iu/dialogue/cespy9.d~ // Icy Blade of the Void +5
COMPILE ~sod2bg2_iu/dialogue/cespy10.d~ // Icy Hammer of the Void +5
COMPILE ~sod2bg2_iu/dialogue/cespy11.d~ // Melodius Bard Hat
COMPILE ~sod2bg2_iu/dialogue/cespy12.d~ // Robe of Roaring Flames
COMPILE ~sod2bg2_iu/dialogue/cespy13.d~ // Mirrored Buckler of the Fist +2
COMPILE ~sod2bg2_iu/dialogue/cespy14.d~ // Sundermaul +5
COMPILE ~sod2bg2_iu/dialogue/cespy15.d~ // The Scorched Earth +3
COMPILE ~sod2bg2_iu/dialogue/cespy16.d~ // Solar Boots of the Cosmos
COMPILE ~sod2bg2_iu/dialogue/cespy17.d~ // Verdant Crimson/Shadow armor
COMPILE ~sod2bg2_iu/dialogue/cespy18.d~ // Chromatic Crimson/Carmine Viridian armor
COMPILE ~sod2bg2_iu/dialogue/cespy19.d~ // Chromatic Shadow/Umbral Viridian armor
COMPILE ~sod2bg2_iu/dialogue/cespy20.d~ // Stalker's Gauntlets of Blinding Strike
COMPILE ~sod2bg2_iu/dialogue/cespy21.d~ // The Scorched Earth +5
COMPILE ~sod2bg2_iu/dialogue/cespy22.d~ // Cloverleaf +1
COMPILE ~sod2bg2_iu/dialogue/cespy23.d~ // Uncursed Staff of Antipode
COMPILE ~sod2bg2_iu/dialogue/cespy23a.d~ // Uncursed Staff of Antipode - recharge
COMPILE ~sod2bg2_iu/dialogue/cespy24.d~ // Nasty Backwhacker +4
COMPILE ~sod2bg2_iu/dialogue/cespy25.d~ // Bow of the Wailing Banshee +4
COMPILE ~sod2bg2_iu/dialogue/cespy26.d~ // Adventurer's Nimble Gloves of Guarding
COMPILE ~sod2bg2_iu/dialogue/cespy27.d~ // Quiver of Void-Tipped Arrows +3
COMPILE ~sod2bg2_iu/dialogue/cespy28.d~ // Bag of Darkness +3
COMPILE ~sod2bg2_iu/dialogue/cespy29.d~ // Illusory Cloak of Arcana
COMPILE ~sod2bg2_iu/dialogue/cespy30.d~ // Element's Fury +3
COMPILE ~sod2bg2_iu/dialogue/cespy31.d~ // Element's Fury +4
COMPILE ~sod2bg2_iu/dialogue/cespy32.d~ // Maelstrom Axe +3 or Pike +4
COMPILE ~sod2bg2_iu/dialogue/cespy33.d~ // Maelstrom Axe +4
COMPILE ~sod2bg2_iu/dialogue/cespy34.d~ // Maelstrom Pike +5
COMPILE ~sod2bg2_iu/dialogue/cespy35.d~ // Trollkiller's Ioun Stone
COMPILE ~sod2bg2_iu/dialogue/cespy36.d~ // Trollkiller's Ioun Stone +1
COMPILE ~sod2bg2_iu/dialogue/cespy37.d~ // Bulwark of Egons +3
COMPILE ~sod2bg2_iu/dialogue/cespy38.d~ // Vexation +5
COMPILE ~sod2bg2_iu/dialogue/cespy39.d~ // Bulwark of Egons +4
COMPILE ~sod2bg2_iu/dialogue/cespy40.d~ // Astral Crossbow +4
COMPILE ~sod2bg2_iu/dialogue/cespy41.d~ // Shadowed Spear of the Tempest +4
COMPILE ~sod2bg2_iu/dialogue/cespy42.d~ // Shadowed Spear of the Tempest +6
//COMPILE ~sod2bg2_iu/dialogue/cespy43.d~ // deprecated
COMPILE ~sod2bg2_iu/dialogue/cespy44.d~ // Silver Dragon Blade +4
COMPILE ~sod2bg2_iu/dialogue/cespy45.d~ // Silver Dragon Blade +5
//COMPILE ~sod2bg2_iu/dialogue/cespy46.d~ // deprecated
COMPILE ~sod2bg2_iu/dialogue/cespy47.d~ // Tongue of Acid +5
COMPILE ~sod2bg2_iu/dialogue/cespy48.d~ // The Night' Embrace +7
COMPILE ~sod2bg2_iu/dialogue/cespy49.d~ // Wicked Jester's Bracers
COMPILE ~sod2bg2_iu/dialogue/cespy50.d~ // Holy Ring of Purity
COMPILE ~sod2bg2_iu/dialogue/cespy51.d~ // Dervish Crescent of Speed +3
COMPILE ~sod2bg2_iu/dialogue/cespy52.d~ // Varscona +3
COMPILE ~sod2bg2_iu/dialogue/cespy53.d~ // Varscona +4
COMPILE ~sod2bg2_iu/dialogue/cespy54.d~ // Stonefire +5
COMPILE ~sod2bg2_iu/dialogue/cespy55.d~ // Sourceror's Cap
COMPILE ~sod2bg2_iu/dialogue/cespy56.d~ // Sourceror's Cap +1
COMPILE ~sod2bg2_iu/dialogue/cespy57.d~ // Raiment of the Lich +4
COMPILE ~sod2bg2_iu/dialogue/cespy58.d~ // Raiment of the Lich +5
COMPILE ~sod2bg2_iu/dialogue/cespy59.d~ // Trollkiller's Fireball/Thunder Thrust/Hoar of Frost/Corrosion/Ko'Dezza's Multi-Fireball/Ko'Dezza's Slime Golem/Fell Rage/Infernal Bone Shield/Maelstrom/Cataclysm
COMPILE ~sod2bg2_iu/dialogue/cespy60.d~ // Water's Edge +5
COMPILE ~sod2bg2_iu/dialogue/cespy61.d~ // Dervish Crescent of Speed +5
COMPILE ~sod2bg2_iu/dialogue/cespy62.d~ // Aster's Edge +4
COMPILE ~sod2bg2_iu/dialogue/cespy63.d~ // Crimson Dawn +3
COMPILE ~sod2bg2_iu/dialogue/cespy64.d~ // Severance +3
COMPILE ~sod2bg2_iu/dialogue/cespy65.d~ // Crimson Dawn +5
COMPILE ~sod2bg2_iu/dialogue/cespy66.d~ // Severance +5
//COMPILE ~sod2bg2_iu/dialogue/cespy67.d~ // deprecated
COMPILE ~sod2bg2_iu/dialogue/cespy68.d~ // Chromatic Crimson/Scarlet Viridescent/Carmine Viridian Dragonscale
COMPILE ~sod2bg2_iu/dialogue/cespy69.d~ // Chromatic Shadow/Umbral Viridian Dragon Plate
COMPILE ~sod2bg2_iu/dialogue/cespy70.d~ // Martyr's Morningstar +3
COMPILE ~sod2bg2_iu/dialogue/cespy71.d~ // Martyr's Morningstar +5
//COMPILE ~sod2bg2_iu/dialogue/cespy72.d~ // deprecated
COMPILE ~sod2bg2_iu/dialogue/cespy73.d~ // Bolt of Frostfire +2
COMPILE ~sod2bg2_iu/dialogue/cespy74.d~ // Bolt of Frostfire +2
COMPILE ~sod2bg2_iu/dialogue/cespy75.d~ // Remorhaz Shell Helm
COMPILE ~sod2bg2_iu/dialogue/cespy76.d~ // Gift of the Demon +3
COMPILE ~sod2bg2_iu/dialogue/cespy77.d~ // Gift of the Demon +4
COMPILE ~sod2bg2_iu/dialogue/cespy78.d~ // Gift of the Demon +5
COMPILE ~sod2bg2_iu/dialogue/cespy79.d~ // Varscona +5
COMPILE ~sod2bg2_iu/dialogue/cespy80.d~ // Maelstrom Axe +5
COMPILE ~sod2bg2_iu/dialogue/cespy81.d~ // Maelstrom Pike +6
COMPILE ~sod2bg2_iu/dialogue/cespy82.d~ // Aster's Edge +5
COMPILE ~sod2bg2_iu/dialogue/cespy83.d~ // Wisened Circlet of the Cynosure
COMPILE ~sod2bg2_iu/dialogue/cespy84.d~ // Warded Solar Aegis +3
COMPILE ~sod2bg2_iu/dialogue/cespy85.d~ // Plate Mail of the Hallowed Hero +5
COMPILE ~sod2bg2_iu/dialogue/cespy86.d~ // Spider Silk Gi
COMPILE ~sod2bg2_iu/dialogue/cespy87.d~ // Blazing Glory +5
COMPILE ~sod2bg2_iu/dialogue/cespy88.d~ // Dread Hammer +3

////////////adding modified cromwell recipe to cespy tweak due to incompatibility with cdtweaks version with this mod///////////////////


  COPY_EXISTING ~botsmith.dlg~ ~override~
    DECOMPILE_DLG_TO_D
      REPLACE_TEXTUALLY ~OR(2)\([%TAB% %LNL%%MNL%%WNL%]*PartyHasItem("blun14")[%TAB% %LNL%%MNL%%WNL%]*PartyHasItem("blun30c")\)~
                        ~OR(3)\1 PartyHasItem("blun30d")~
    COMPILE_D_TO_DLG
    BUT_ONLY

COMPILE ~sod2bg2_iu/dialogue/crom_cespy0.d~ // Cepsenar can attach FoA heads in any order
COMPILE ~sod2bg2_iu/dialogue/crom_cespy1.d~ // Ankheg Plate Mail
COMPILE ~sod2bg2_iu/dialogue/crom_cespy2.d~ // Crom Faeyr +5
COMPILE ~sod2bg2_iu/dialogue/crom_cespy3.d~ // The Equalizer
COMPILE ~sod2bg2_iu/dialogue/crom_cespy4.d~ // Shortbow of Gesen
COMPILE ~sod2bg2_iu/dialogue/crom_cespy5.d~ // Wave +4
COMPILE ~sod2bg2_iu/dialogue/crom_cespy6.d~ // Silver Sword
COMPILE ~sod2bg2_iu/dialogue/crom_cespy7.d~ // Mace of Disruption +2

EXTEND_BOTTOM ~botsmith.bcs~ ~sod2bg2_iu/scripts/cespy.baf~  //Item generating script for cespy



//////////////////////////////
//Adding items to containers//
//////////////////////////////

EXTEND_BOTTOM ~ar0601.bcs~ ~sod2bg2_iu/scripts/ar0601.baf~	//The Flaming Fists of Lin Mei
EXTEND_BOTTOM ~ar0602.bcs~ ~sod2bg2_iu/scripts/ar0602.baf~	//Keyring, Gift of the Demon +1
EXTEND_BOTTOM ~ar3001.bcs~ ~sod2bg2_iu/scripts/ar3001.baf~	//Breath of Wind
EXTEND_BOTTOM ~ar3017.bcs~ ~sod2bg2_iu/scripts/ar3017.baf~	//Sealed Ancient Scroll
EXTEND_BOTTOM ~ar5201.bcs~ ~sod2bg2_iu/scripts/ar5201.baf~	//Sealed Ancient Scroll
EXTEND_BOTTOM ~ar1106.bcs~ ~sod2bg2_iu/scripts/ar1106.baf~	//Purification Stone
EXTEND_BOTTOM ~ar0400.bcs~ ~sod2bg2_iu/scripts/ar0400.baf~	//Festering Spear +1
EXTEND_BOTTOM ~ar0413.bcs~ ~sod2bg2_iu/scripts/ar0413.baf~	//Random new spell Level 5 or lower
EXTEND_BOTTOM ~ar1400.bcs~ ~sod2bg2_iu/scripts/ar1400.baf~	//Fine Bearskin
EXTEND_BOTTOM ~ar0505.bcs~ ~sod2bg2_iu/scripts/ar0505.baf~	//Sword of Ruin +2
EXTEND_BOTTOM ~ar0405.bcs~ ~sod2bg2_iu/scripts/ar0405.baf~	//Wand of Trap Finding
EXTEND_BOTTOM ~ar0420.bcs~ ~sod2bg2_iu/scripts/ar0420.baf~	//Charged Battle Axe +2/Poisonous Battle Axe +2
EXTEND_BOTTOM ~ar3016.bcs~ ~sod2bg2_iu/scripts/ar3016.baf~	//Remorhaz Shell
EXTEND_BOTTOM ~ar2400.bcs~ ~sod2bg2_iu/scripts/ar2400.baf~	//Solemn Duty +3
EXTEND_BOTTOM ~oh4101.bcs~ ~sod2bg2_iu/scripts/oh4101.baf~	//Dark Moon Hilt
EXTEND_BOTTOM ~ar3021.bcs~ ~sod2bg2_iu/scripts/ar3021.baf~	//Iridescent Blue Ioun Stone
EXTEND_BOTTOM ~ar6107.bcs~ ~sod2bg2_iu/scripts/ar6107.baf~	//Random new spell Level 6 or higher
EXTEND_BOTTOM ~oh6500.bcs~ ~sod2bg2_iu/scripts/oh6500.baf~	//Sealed Ancient Scroll
COMPILE ~sod2bg2_iu/scripts/ar3027.baf~	//Conjure Death Scroll
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg0401.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg0401.bcs~ ~sod2bg2_iu/scripts/bg0401.baf~	//Glimglam's Cloak +1	
		END

ACTION_IF FILE_EXISTS_IN_GAME ~bg0102.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg0102.bcs~ ~sod2bg2_iu/scripts/bg0102.baf~	//Cloak of Scintillating Colors	
		END
		
COMPILE ~sod2bg2_iu/scripts/ar1009.baf~	//Cloak of the Winter Wolf

ACTION_IF FILE_EXISTS_IN_GAME ~bg1504.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg1504.bcs~ ~sod2bg2_iu/scripts/bg1504.baf~	//Gauntlets of Elven Might	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg2300.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg2300.bcs~ ~sod2bg2_iu/scripts/bg2300.baf~	// Kontik's Ring of Wizardry	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg0512.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg0512.bcs~ ~sod2bg2_iu/scripts/bg0512.baf~	// Ring of Dwarven Bone	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg0514.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg0514.bcs~ ~sod2bg2_iu/scripts/bg0514.baf~	// Lyre of Progression	
		END

COMPILE ~sod2bg2_iu/scripts/ar0528.baf~	// Bardic Horn of Valhalla
COPY_EXISTING ~ar0528.are~ ~override~
		WRITE_ASCII 0x94 ar0528

EXTEND_BOTTOM ~ar2000.bcs~ ~sod2bg2_iu/scripts/ar2000.baf~	// Owain's Lullabye

EXTEND_BOTTOM ~ar4500.bcs~ ~sod2bg2_iu/scripts/ar4500.baf~	// Wind of Heaven +4, +5 vs. Elementals

EXTEND_BOTTOM ~ar0205.bcs~ ~sod2bg2_iu/scripts/ar0205.baf~	//20% chance - The Spear of White Ash +3/Bastard Sword of Greater Phasing +3/Misery's Herald +3/Evil Spider Crusher of Doom +3/Darkened Glory +2

COMPILE ~sod2bg2_iu/scripts/ar0414.baf~	//Fel Iron Ore
COPY_EXISTING ~ar0414.are~ ~override~
		WRITE_ASCII 0x94 ar0414
		
EXTEND_BOTTOM ~oh4230.bcs~ ~sod2bg2_iu/scripts/oh4230.baf~	// Imbued Shadow Gem

COPY ~sod2bg2_iu/itm/creitems/dtkdshdm.itm~ ~override~	//melee attack for Shadow Fiend summon
  SAY NAME2 @2652

ACTION_IF FILE_EXISTS_IN_GAME ~bg2606.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg2606.bcs~ ~sod2bg2_iu/scripts/bg2606.baf~	// Winter Wolf Gloves	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg3321.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg3321.bcs~ ~sod2bg2_iu/scripts/bg3321.baf~	// Winter Wolf Hat	
		END


		
/////////////////////////////
//Adding items to creatures//
/////////////////////////////


COPY_EXISTING ~firkra02.cre~ ~override~
  ADD_CRE_ITEM ~bdhelm01~ #0 #0 #0 ~NONE~ ~INV~		//Crown Of Lies
	ADD_CRE_ITEM ~dtkascrl~ #0 #0 #0 ~NONE~ ~INV~		//Ancient Scroll
		ADD_CRE_ITEM ~dtkrnd01~ #0 #0 #0 ~NONE~ ~INV~		// 50/50 Carsomyr +5 or Aster's Edge +3
			REMOVE_CRE_ITEM ~sw2h10~	// Removing Carsomyr +5 from inventory
				ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood

COPY_EXISTING ~idemon01.cre~ ~override~
  REPLACE_CRE_ITEM ~HELM02~ #0 #0 #0 ~NONE~ ~HELMET~		//Helm of Opposition
  
COPY_EXISTING ~shadra01.cre~ ~override~
  ADD_CRE_ITEM ~dtkrnd03~ #0 #0 #0 ~NONE~ ~INV~		// 33.3% chance Tongue of Acid +3/Echo of the Fiend +3/The Guardian Devil
	ADD_CRE_ITEM ~dtkdgbld~ #0 #0 #0 ~NONE~ ~INV~	//Shadow Dragon Blood
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new spell Level 5 or lower

COPY_EXISTING ~dragshad.cre~ ~override~
  ADD_CRE_ITEM ~dtkrnd03~ #0 #0 #0 ~NONE~ ~INV~		// 33.3% chance Tongue of Acid +3/Echo of the Fiend +3/The Guardian Devil
	ADD_CRE_ITEM ~dtkdgbld~ #0 #0 #0 ~NONE~ ~INV~	//Shadow Dragon Blood
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new spell Level 5 or lower
	
COPY_EXISTING ~ohryxtra.cre~ ~override~
  ADD_CRE_ITEM ~dtkdgbld~ #0 #0 #0 ~NONE~ ~INV~	//Shadow Dragon Blood
  	ADD_CRE_ITEM ~dtkascrl~ #0 #0 #0 ~NONE~ ~INV~		//Ancient Scroll
	
COPY_EXISTING ~dragsilv.cre~ ~override~
  ADD_CRE_ITEM ~ohdscale~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Silver Scales
	ADD_CRE_ITEM ~misc8h~ #0 #0 #0 ~NONE~ ~INV~		//Silver Dragon's Blood

COPY_EXISTING ~udsilver.cre~ ~override~
  ADD_CRE_ITEM ~ohdscale~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Silver Scales
	ADD_CRE_ITEM ~misc8h~ #0 #0 #0 ~NONE~ ~INV~		//Silver Dragon's Blood
		ADD_CRE_ITEM ~dtkascrl~ #0 #0 #0 ~NONE~ ~INV~		//Ancient Scroll

COPY_EXISTING ~tdr10a.cre~ ~override~
  ADD_CRE_ITEM ~bdleat05~ #0 #0 #0 ~NONE~ ~ARMOR~		// (Green) Dragonscale Armor 

COPY_EXISTING ~maevar.cre~ ~override~
  REPLACE_CRE_ITEM ~bdleat07~ #0 #0 #0 ~NONE~ ~ARMOR~		//The Night's Embrace +3

COPY_EXISTING ~bheye.cre~ ~override~
  ADD_CRE_ITEM ~bdboot03~ #0 #0 #0 ~NONE~ ~BOOTS~		//Star-Strewn Boots
	ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new spell Level 5 or lower

COPY_EXISTING ~unsee.cre~ ~override~
  ADD_CRE_ITEM ~bdboot03~ #0 #0 #0 ~NONE~ ~BOOTS~		//Star-Strewn Boots
	ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new spell Level 5 or lower

COPY_EXISTING ~uhrang01.cre~ ~override~
  ADD_CRE_ITEM ~bdbrac05~ #0 #0 #0 ~NONE~ ~GLOVES~		//Stalker's Gauntlets
	ADD_CRE_ITEM ~dtkcoals~ #1 #0 #0 ~NONE~ ~HELMET~		//Coalesced Shadow
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new spell Level 5 or lower


COPY_EXISTING ~torgal.cre~ ~override~
  ADD_CRE_ITEM ~bdsper01~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED		//Shadowed Spear +2

COPY_EXISTING ~gorsal.cre~ ~override~
  ADD_CRE_ITEM ~dtkruby~ #0 #0 #0 ~NONE~ ~INV~		//Heart of Flame
    ADD_CRE_ITEM ~scaler~ #0 #0 #0 ~NONE~ ~INV~		//Red Scales
	  ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood
	  

COPY_EXISTING ~gorchr.cre~ ~override~
  ADD_CRE_ITEM ~dtktopaz~ #0 #0 #0 ~NONE~ ~INV~		//Eye of Ichor
	ADD_CRE_ITEM ~dtkascrl~ #0 #0 #0 ~NONE~ ~INV~		//Ancient Scroll
  
COPY_EXISTING ~gorcamb.cre~ ~override~
  ADD_CRE_ITEM ~dtkbowat~ #0 #0 #0 ~NONE~ ~INV~		//Body of Water

COPY_EXISTING ~fsdragon.cre~ ~override~
  ADD_CRE_ITEM ~bdscaleg~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Green Scales
    ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood

COPY_EXISTING ~hdragred.cre~ ~override~
  ADD_CRE_ITEM ~dtkscal1~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Black Scales
    ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood

COPY_EXISTING ~hdragsil.cre~ ~override~
  ADD_CRE_ITEM ~ohdscale~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Silver scales
	ADD_CRE_ITEM ~misc8h~ #0 #0 #0 ~NONE~ ~INV~		//Silver Dragon's Blood
	
COPY_EXISTING ~ohdddolr.cre~ ~override~
	ADD_CRE_ITEM ~misc8h~ #0 #0 #0 ~NONE~ ~INV~		//Silver Dragon's Blood
	
COPY_EXISTING ~ohddixth.cre~ ~override~
	ADD_CRE_ITEM ~misc8h~ #0 #0 #0 ~NONE~ ~INV~		//Silver Dragon's Blood

COPY_EXISTING ~dragblac.cre~ ~override~
  ADD_CRE_ITEM ~dtkscal1~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Black Scales
    ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood
	
COPY_EXISTING ~dragblue.cre~ ~override~
  ADD_CRE_ITEM ~dtkdgbl2~ #0 #0 #0 ~NONE~ ~INV~		//Dragon's Blood

COPY_EXISTING ~haer10.cre~ ~override~
  ADD_CRE_ITEM ~bdbelt01~ #0 #0 #0 ~NONE~ ~BELT~		//Cloverleaf

COPY_EXISTING ~haer11.cre~ ~override~
  ADD_CRE_ITEM ~bdbelt01~ #0 #0 #0 ~NONE~ ~BELT~		//Cloverleaf

COPY_EXISTING ~haer13.cre~ ~override~
  ADD_CRE_ITEM ~bdbelt01~ #0 #0 #0 ~NONE~ ~BELT~		//Cloverleaf

COPY_EXISTING ~haer15.cre~ ~override~
  ADD_CRE_ITEM ~bdbelt01~ #0 #0 #0 ~NONE~ ~BELT~		//Cloverleaf

COPY_EXISTING ~pirsea01.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h21~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Vexation +2

COPY_EXISTING ~sevpat02.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun06~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED		//Uncursed Staff +1

COMPILE	~sod2bg2_iu/scripts/dtkpooky.baf~	//updated script to allow pooky to use the bagpipes
COPY_EXISTING ~sevpat03.cre~ ~override~
  ADD_CRE_ITEM ~bdbrd04~ #2 #0 #0 ~NONE~ ~QITEM1~		//Screaming bagpipes
  WRITE_ASCII 0x258 dtkpooky

COPY_EXISTING ~nalia8.cre~ ~override~
  ADD_CRE_ITEM ~bdioun01~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~	//Trollblood Ioun Stone

COPY_EXISTING ~nalia10.cre~ ~override~
  ADD_CRE_ITEM ~bdioun01~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~	//Trollblood Ioun Stone

COPY_EXISTING ~nalia11.cre~ ~override~
  ADD_CRE_ITEM ~bdioun01~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~	//Trollblood Ioun Stone

COPY_EXISTING ~nalia13.cre~ ~override~
  ADD_CRE_ITEM ~bdioun01~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~	//Trollblood Ioun Stone

COPY_EXISTING ~cohrvale.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun07~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP	//Backwhacker +2

COPY_EXISTING ~mekrat.cre~ ~override~
  ADD_CRE_ITEM ~bdclck06~ #0 #0 #0 ~NONE~ ~CLOAK~	//Cloak of Minor Arcana

COPY_EXISTING ~sppain.cre~ ~override~
  ADD_CRE_ITEM ~dtkrnd02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP	// 50/50 Element's Fury +2/Acid-Eteched Dagger +2

COPY_EXISTING ~keldor9.cre~ ~override~
  ADD_CRE_ITEM ~bdxbow01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP TWOHANDED	//Astral Crossbow +2
  
COPY_EXISTING ~keldor8.cre~ ~override~
  ADD_CRE_ITEM ~bdxbow01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP TWOHANDED	//Astral Crossbow +2
  
COPY_EXISTING ~keldor10.cre~ ~override~
  ADD_CRE_ITEM ~bdxbow01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP TWOHANDED	//Astral Crossbow +2
  
COPY_EXISTING ~keldor12.cre~ ~override~
  ADD_CRE_ITEM ~bdxbow01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP TWOHANDED	//Astral Crossbow +2

COPY_EXISTING ~ohdterp.cre~ ~override~
  REPLACE_CRE_ITEM ~dtksolag~ #0 #0 #0 ~NONE~ ~SHIELD~	//Solar Aegis +3

COPY_EXISTING ~gall.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbow04~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED 	//Bow of the Banshee +2

COPY_EXISTING ~gorbat1.cre~ ~override~
  ADD_CRE_ITEM ~dtkfrost~ #0 #0 #0 ~NONE~ ~INV~	//Soul of Frost

COPY_EXISTING ~ddguard7.cre~ ~override~
  ADD_CRE_ITEM ~bdring10~ #0 #0 #0 ~NONE~ ~INV~	//Ring of Purity

COPY_EXISTING ~ohnlanne.cre~ ~override~
  ADD_CRE_ITEM ~kossuth~ #0 #0 #0 ~NONE~ ~HELMET~	//Kossuth's Blood

COPY_EXISTING ~ohralor.CRE~ ~override~
  ADD_CRE_ITEM ~bdhelm15~ #0 #0 #0 ~NONE~ ~HELMET~	//Headband of Focus

COPY_EXISTING ~ohralor2.CRE~ ~override~
  ADD_CRE_ITEM ~bdhelm15~ #0 #0 #0 ~NONE~ ~HELMET~	//Headband of Focus

COPY_EXISTING ~kaypal01.cre~ ~override~
  REPLACE_CRE_ITEM ~bdhalb01~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP	//Storm Pike +2

COPY_EXISTING ~vaelasa.cre~ ~override~
  ADD_CRE_ITEM ~bdbrd01~ #0 #0 #0 ~NONE~ ~QITEM1~		//Forest Queen's Benediction
  
COPY_EXISTING ~hlrevan.cre~ ~override~
  ADD_CRE_ITEM ~dtkascrl~ #0 #0 #0 ~NONE~ ~INV~		//Ancient Scroll
  
COPY_EXISTING ~ohhdrago.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h01~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Crimson Dawn +2

COPY_EXISTING ~pirmur01.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h22~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Severance +2
  
COPY_EXISTING ~anomen10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Martyr's Morningstar +2

COPY_EXISTING ~anomen6.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Martyr's Morningstar +2
  
COPY_EXISTING ~anomen7.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Martyr's Morningstar +2  

COPY_EXISTING ~anomen8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Martyr's Morningstar +2
  
COPY_EXISTING ~anomen9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdblun04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Martyr's Morningstar +2
  
COPY_EXISTING ~korgan8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdxe1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Chill Axe +2
  
COPY_EXISTING ~korgan9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdxe1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Chill Axe +2
  
COPY_EXISTING ~korgan11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdxe1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Chill Axe +2
  
COPY_EXISTING ~korgan12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdxe1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Chill Axe +2
  
COPY_EXISTING ~rasaad8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbrac01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Bracers of the Shuttered Lid
  
COPY_EXISTING ~rasaad9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbrac01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Bracers of the Shuttered Lid
  
COPY_EXISTING ~rasaad10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbrac01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Bracers of the Shuttered Lid
  
COPY_EXISTING ~rasaad11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbrac01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Bracers of the Shuttered Lid
  
COPY_EXISTING ~rasaad13.cre~ ~override~
  REPLACE_CRE_ITEM ~bdbrac01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Bracers of the Shuttered Lid
  
COPY_EXISTING ~sarevok.cre~ ~override~
  REPLACE_CRE_ITEM ~bdhelm10~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Helm of Unwavering Purpose
  
COPY_EXISTING ~mazzy8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdchan06~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Stalwart Scales +2
  
COPY_EXISTING ~mazzy9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdchan06~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Stalwart Scales +2
  
COPY_EXISTING ~mazzy11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdchan06~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Stalwart Scales +2
  
COPY_EXISTING ~mazzy12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdchan06~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Stalwart Scales +2
  
COPY_EXISTING ~yoshi7.cre~ ~override~
  REPLACE_CRE_ITEM ~bdioun02~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Blood Red Ioun Stone
  
COPY_EXISTING ~yoshi8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdioun02~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Blood Red Ioun Stone
  
COPY_EXISTING ~yoshi10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdioun02~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Blood Red Ioun Stone
  
COPY_EXISTING ~yoshi11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdioun02~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Blood Red Ioun Stone
  
COPY_EXISTING ~yoshi12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdioun02~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~		//Blood Red Ioun Stone
  
COPY_EXISTING ~dorn8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdplat03~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Bloody Bone Plate +2
  
COPY_EXISTING ~dorn9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdplat03~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Bloody Bone Plate +2
  
COPY_EXISTING ~dorn10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdplat03~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Bloody Bone Plate +2
  
COPY_EXISTING ~dorn12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdplat03~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Bloody Bone Plate +2
  
COPY_EXISTING ~neera8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul01~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Whispers
  
COPY_EXISTING ~neera10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul01~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Whispers
  
COPY_EXISTING ~neera11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul01~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Whispers
  
COPY_EXISTING ~neera12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul01~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Whispers
  
COPY_EXISTING ~neera13.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul01~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Whispers
  
COPY_EXISTING ~valyg8.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck03~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Crommus's Capelet
  
COPY_EXISTING ~valyg9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck03~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Crommus's Capelet

COPY_EXISTING ~valyg11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck03~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Crommus's Capelet
  
COPY_EXISTING ~valyg12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck03~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Crommus's Capelet
  
COPY_EXISTING ~cernd10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul03~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Abnormally Awesome Ankheg Summoning
  
COPY_EXISTING ~cernd12.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul03~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Abnormally Awesome Ankheg Summoning
  
COPY_EXISTING ~cernd13.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul03~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Abnormally Awesome Ankheg Summoning
  
COPY_EXISTING ~cernd13b.cre~ ~override~
  REPLACE_CRE_ITEM ~bdamul03~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Amulet of Abnormally Awesome Ankheg Summoning
  
COPY_EXISTING ~aerie6.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe04~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Cleric's Vestments
  REPLACE_CRE_ITEM ~bdslng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ 	//Firefly +2
  
COPY_EXISTING ~aerie7.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe04~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Cleric's Vestments
  REPLACE_CRE_ITEM ~bdslng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ 	//Firefly +2
  
COPY_EXISTING ~aerie9.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe04~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Cleric's Vestments
  REPLACE_CRE_ITEM ~bdslng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ 	//Firefly +2
  
COPY_EXISTING ~aerie10.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe04~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Cleric's Vestments
  REPLACE_CRE_ITEM ~bdslng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ 	//Firefly +2
  
COPY_EXISTING ~aerie11.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe04~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Cleric's Vestments
  REPLACE_CRE_ITEM ~bdslng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ 	//Firefly +2
  
COPY_EXISTING ~palkni04.cre~ ~override~
  REPLACE_CRE_ITEM ~helm13~ #0 #0 #0 ~NONE~ ~HELMET~		//Helm 13 (centurion style)
  REPLACE_CRE_ITEM ~chan05~ #0 #0 #0 ~NONE~ ~ARMOR~		//Splint Mail +1
  REPLACE_CRE_ITEM ~sw1h02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Bastard Sword +1
  ADD_CRE_ITEM ~bdshld02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//The Suncatcher +2
  
COPY_EXISTING ~palkni03.cre~ ~override~		
  REPLACE_CRE_ITEM ~helm09~ #0 #0 #0 ~NONE~ ~HELMET~		//Helm 09 (plume with horns)
  REPLACE_CRE_ITEM ~plat01~ #0 #0 #0 ~NONE~ ~ARMOR~		//Plate Mail
  REPLACE_CRE_ITEM ~sper05~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED		//Spear +2
  
COPY_EXISTING ~palkni02.cre~ ~override~
  REPLACE_CRE_ITEM ~helm12~ #0 #0 #0 ~NONE~ ~HELMET~		//Helm 12 (winged open-face)
  REPLACE_CRE_ITEM ~leat05~ #0 #0 #0 ~NONE~ ~ARMOR~		//Studded Leather +1
  REPLACE_CRE_ITEM ~sw2h02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED		//Two-handed Sword +1
  
COPY_EXISTING ~jan8.cre~ ~override~
  ADD_CRE_ITEM ~bdamul08~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Modron Heart
  
COPY_EXISTING ~jan10.cre~ ~override~
  ADD_CRE_ITEM ~bdamul08~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Modron Heart
  
COPY_EXISTING ~jan11.cre~ ~override~
  ADD_CRE_ITEM ~bdamul08~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Modron Heart
  
COPY_EXISTING ~jan12.cre~ ~override~
  ADD_CRE_ITEM ~bdamul08~ #0 #0 #0 ~IDENTIFIED~ ~AMULET~		//Modron Heart
  
COPY_EXISTING ~lyros.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe01~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Robe of Arcane Aptitude
  
COPY_EXISTING ~xzar.cre~ ~override~
  REPLACE_CRE_ITEM ~bdrobe01~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~		//Robe of Arcane Aptitude
  
COPY_EXISTING ~ppdesh.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Eadro's Blade +1
  
COPY_EXISTING ~ppdesh2.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h03~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON~ EQUIP		//Eadro's Blade +1
  
COPY_EXISTING ~ohdboll.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck02~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Sable Cloak

COPY_EXISTING ~ohdfirej.cre~ ~override~
  REPLACE_CRE_ITEM ~bdclck02~ #0 #0 #0 ~IDENTIFIED~ ~CLOAK~		//Sable Cloak
  
COPY_EXISTING ~c6safa.cre~ ~override~
  REPLACE_CRE_ITEM ~bdsw1h14~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Fractal Blade +3
    REPLACE_CRE_ITEM ~leat08~ #0 #0 #0 ~NONE~ ~ARMOR~ EQUIP		//Shadow Armor +3
	    REPLACE_CRE_ITEM ~shld20~ #0 #0 #0 ~NONE~ ~SHIELD~	//Kiel's Buckler 
		
COPY_EXISTING ~korshag.cre~ ~override~
  REPLACE_CRE_ITEM ~bdhelm05~ #0 #0 #0 ~NONE~ ~HELMET~		//Battle Tankard
  
COPY_EXISTING ~dcleric.cre~ ~override~
  REPLACE_CRE_ITEM ~bdhamm06~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Dread Hammer +2
	WRITE_BYTE 0x72 5
		WRITE_BYTE 0x46 0
			WRITE_BYTE 0x48 0
				WRITE_BYTE 0x53 2
					WRITE_SHORT 0x14 2000

COPY_EXISTING ~obsdem01.cre~ ~override~
  REPLACE_CRE_ITEM ~dtkcynos~ #0 #0 #0 ~NONE~ ~HELMET~		//Circlet of the Cynosure
  
COPY_EXISTING ~kproen01.cre~ ~override~
  REPLACE_CRE_ITEM ~bdplat01~ #0 #0 #0 ~NONE~ ~ARMOR~		//Daeros' Full Plate +1
	REPLACE_CRE_ITEM ~bdsw1h25~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Spell Breaker +2
	
COPY_EXISTING ~sptredd.cre~ ~override~
  ADD_CRE_ITEM ~bdsilk01~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Spider Silk

COPY_EXISTING ~spbene.cre~ ~override~
  ADD_CRE_ITEM ~bdsilk01~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Spider Silk
  
COPY_EXISTING ~spsamar.cre~ ~override~
  ADD_CRE_ITEM ~bdsilk01~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Spider Silk
  
COPY_EXISTING ~spphil.cre~ ~override~
  ADD_CRE_ITEM ~bdsilk01~ #0 #0 #0 ~IDENTIFIED~ ~INV~		//Spider Silk
  
COPY_EXISTING ~resuna.cre~ ~override~
  REPLACE_CRE_ITEM ~bdxbow02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED		//Harold +2
	REPLACE_CRE_ITEM ~leat15~ #0 #0 #0 ~UNDROPPABLE~ ~ARMOR~		//Studded Leather +2
		REPLACE_CRE_ITEM ~bolt02~ #10 #0 #0 ~NONE~ ~QUIVER1~		//Bolt +1
  
COPY_EXISTING ~xappren1.cre~ ~override~
	REPLACE_CRE_ITEM ~wandmis~ #17 #0 #0 ~NONE~ ~QITEM1~		//Pemby's Wand of Many Missiles

ACTION_IF FILE_EXISTS_IN_GAME ~tranzi.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~tranzi.cre~ ~override~
		REPLACE_CRE_ITEM ~wandmis~ #21 #0 #0 ~NONE~ ~QITEM1~		//Pemby's Wand of Many Missiles
		END

COPY_EXISTING ~obshal05.cre~ ~override~
	REPLACE_CRE_ITEM ~wandarm~ #8 #15 #0 ~NONE~ ~QITEM1~		//Wand of Armory
		REPLACE_CRE_ITEM ~clck12~ #0 #0 #0 ~NONE~ ~ARMOR~	//Knave's Robe
			REPLACE_CRE_ITEM ~staf02~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP TWOHANDED	//Staff +1

ACTION_IF FILE_EXISTS_IN_GAME ~daitel.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~daitel.cre~ ~override~
		REPLACE_CRE_ITEM ~wandarm~ #13 #7 #0 ~NONE~ ~QITEM1~		//Wand of Armory
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~mulahe.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~mulahe.cre~ ~override~
		REPLACE_CRE_ITEM ~wandtrp~ #23 #0 #0 ~NONE~ ~QITEM2~		//Wand of Trap Finding
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~rsgamaz.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rsgamaz.cre~ ~override~
		REPLACE_CRE_ITEM ~ohbrac01~ #1 #0 #0 ~NONE~ ~GLOVES~		//The Flaming Fists of Lin Mei
		END
			
ACTION_IF FILE_EXISTS_IN_GAME ~rasaad.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rasaad.cre~ ~override~
		REPLACE_CRE_ITEM ~rsbrac~ #1 #0 #0 ~IDENTIFIED~ ~GLOVES~		//moving Glimmering Bands to Rasaad's starting equip
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~rasaad7.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rasaad7.cre~ ~override~
		REPLACE_CRE_ITEM ~sash~ #0 #0 #0 ~IDENTIFIED~ ~BELT~		//Shimmering Sash
		END

ACTION_IF FILE_EXISTS_IN_GAME ~phoenix.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~phoenix.cre~ ~override~
		REPLACE_CRE_ITEM ~kossuth~ #0 #0 #0 ~NONE~ ~AMULET~		//Kossuth's Blood
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~deathk.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~deathk.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd09~ #0 #0 #0 ~NONE~ ~INV~		//20% chance - The Spear of White Ash +3/Bastard Sword of Greater Phasing +3/Misery's Herald +3/Evil Spider Crusher of Doom +3/Darkened Glory +2
		END

ACTION_IF FILE_EXISTS_IN_GAME ~deathk1.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~deathk1.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd09~ #0 #0 #0 ~NONE~ ~INV~		//20% chance - The Spear of White Ash +3/Bastard Sword of Greater Phasing +3/Misery's Herald +3/Evil Spider Crusher of Doom +3/Darkened Glory +2
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~davaeo.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~davaeo.cre~ ~override~
		REPLACE_CRE_ITEM ~ogi~ #0 #0 #0 ~NONE~ ~ARMOR~		//Ogi-Luc's Great Robe
		REMOVE_CRE_ITEM ~clck17~
		REMOVE_CRE_ITEM ~brac03~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
		
COPY_EXISTING ~jugjer01.cre~ ~override~
	REPLACE_CRE_ITEM ~ogi~ #0 #0 #0 ~NONE~ ~ARMOR~		//Ogi-Luc's Great Robe
	
ACTION_IF FILE_EXISTS_IN_GAME ~riggilo.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~riggilo.cre~ ~override~
		REPLACE_CRE_ITEM ~usltr3a~ #0 #0 #0 ~NONE~ ~ARMOR~		//Shadowed Studded Leather +2
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~fenten.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~fenten.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd05~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Charged Battle Axe +2/Poisonous Battle Axe +2
		END

COPY_EXISTING ~chak.cre~ ~override~
	REPLACE_CRE_ITEM ~ax1h03~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Battle Ax of Mauletar
 
COPY_EXISTING ~renal.cre~ ~override~
	REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox

COPY_EXISTING ~pbhunt05.cre~ ~override~
	REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox 
	
COPY_EXISTING ~illasera.cre~ ~override~
	REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
			ADD_CRE_ITEM ~dtkrnd12~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 6 and above)
			
COPY_EXISTING ~yaga01.cre~ ~override~
	ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
		ADD_CRE_ITEM ~dtkrnd12~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 6 and above)
		
COPY_EXISTING ~sendai.cre~ ~override~
	ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
		ADD_CRE_ITEM ~dtkrnd12~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 6 and above)
		
COPY_EXISTING ~dragblue.cre~ ~override~
	ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
		ADD_CRE_ITEM ~dtkrnd12~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 6 and above)

ACTION_IF FILE_EXISTS_IN_GAME ~drasus.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~drasus.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~lothan.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~lothan.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox
		END
		
COPY_EXISTING ~kalah2.cre~ ~override~
	REPLACE_CRE_ITEM ~bootfor~ #0 #0 #0 ~NONE~ ~BOOTS~		//Boots of the Forgotten Ones
	
COPY_EXISTING ~rngsha04.cre~ ~override~
	REPLACE_CRE_ITEM ~shboots~ #0 #0 #0 ~NONE~ ~BOOTS~		//Shadowed Boots
	
ACTION_IF FILE_EXISTS_IN_GAME ~hakt.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~hakt.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd07~ #0 #0 #0 ~NONE~ ~BOOTS~		//Messenger of Sseth
		END
		
COPY_EXISTING ~slmage1.cre~ ~override~
	REPLACE_CRE_ITEM ~glimglm~ #0 #0 #0 ~NONE~ ~CLOAK~		//Glimglam's Cloak +1
	
COPY_EXISTING ~elgea.cre~ ~override~
	REPLACE_CRE_ITEM ~cloaksc~ #0 #0 #0 ~NONE~ ~CLOAK~		//Cloak of Scintillating Colors
	
ACTION_IF FILE_EXISTS_IN_GAME ~dezkie.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~dezkie.cre~ ~override~
		REPLACE_CRE_ITEM ~ohioun03~ #0 #0 #0 ~NONE~ ~HELMET~		//Clear Ioun Stone
		END	
		
COPY_EXISTING ~ralej.cre~ ~override~
	REPLACE_CRE_ITEM ~ohioun03~ #0 #0 #0 ~NONE~ ~HELMET~		//Clear Ioun Stone
	
ACTION_IF FILE_EXISTS_IN_GAME ~thalan.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~thalan.cre~ ~override~
		REPLACE_CRE_ITEM ~ohioun02~ #0 #0 #0 ~NONE~ ~HELMET~		//Scarlet/Blue Ioun Stone
		END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~tanar.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~tanar.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd08~ #0 #0 #0 ~NONE~ ~INV~		//Lucky Scimitar +3/Doom Halberd +3/Demon's Breath +3/The Love of Black Bess +3/The Salamander's Tongue +3
			ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
		END	

COPY_EXISTING ~gorsta11.cre~ ~override~
	ADD_CRE_ITEM ~band04~ #0 #0 #0 ~NONE~ ~HELMET~		//Circlet of the Archmagi
		REPLACE_CRE_ITEM ~clck16~ #0 #0 #0 ~UNDROPPABLE~ ~ARMOR~		//Robe of the Neutral Archmagi (changed to not drop)

ACTION_IF FILE_EXISTS_IN_GAME ~bdkherr.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdkherr.cre~ ~override~
		REPLACE_CRE_ITEM ~ringed~ #0 #0 #0 ~NONE~ ~LRING~		//Edion's Ring of Wizardry
		END

COPY_EXISTING ~jaga3.cre~ ~override~
	REPLACE_CRE_ITEM ~ringkon~ #0 #0 #0 ~NONE~ ~RRING~		//Kontik's Ring of Wizardry
	
COPY_EXISTING ~tazok.cre~ ~override~
	REPLACE_CRE_ITEM ~dbone~ #0 #0 #0 ~NONE~ ~RRING~		//Ring of Dwarven Bone
	
COPY_EXISTING ~hlshang.cre~ ~override~
	REPLACE_CRE_ITEM ~ringed~ #0 #0 #0 ~NONE~ ~INV~		//Edion's Ring of Wizardry
	
COPY_EXISTING ~trrak02.cre~ ~override~
	REPLACE_CRE_ITEM ~bdsumst~ #0 #12 #0 ~NONE~ ~QITEM1~		//The Summoner's Staff +3
	
COPY_EXISTING ~sevpat01.cre~ ~override~
	REPLACE_CRE_ITEM ~dtkrnd08~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Lucky Scimitar +3/Doom Halberd +3/Demon's Breath +3/The Love of Black Bess +3/The Salamander's Tongue +3

COPY_EXISTING ~udardul.cre~ ~override~
	REPLACE_CRE_ITEM ~band03~ #0 #0 #0 ~NONE~ ~HELMET~		//Eilistraee's Boon +1
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under

COPY_EXISTING ~demlord.cre~ ~override~
	ADD_CRE_ITEM ~dtkdebld~ #1 #0 #0 ~NONE~ ~INV~		//Demon Lord's Blood
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under

COPY_EXISTING ~uddemon.cre~ ~override~
	ADD_CRE_ITEM ~dtkdebld~ #1 #0 #0 ~NONE~ ~INV~		//Demon Lord's Blood

COPY_EXISTING ~gortan1.cre~ ~override~
	ADD_CRE_ITEM ~dtkdebld~ #1 #0 #0 ~NONE~ ~INV~		//Demon Lord's Blood	

COMPILE	~sod2bg2_iu/scripts/dtkdemog.baf~	//Demogorgon's Eye
COPY_EXISTING ~demogor2.cre~ ~override~
	WRITE_ASCII 0x268 dtkdemog

ACTION_IF FILE_EXISTS_IN_GAME ~bdmorent.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdmorent.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~shaldr.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdmorent.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
	
/////////////////////////////////
//Adding items as quest rewards//
/////////////////////////////////
		
COMPILE ~sod2bg2_iu/dialogue/khanz1.d~		//Dervish Crescent +2
COMPILE ~sod2bg2_iu/dialogue/khanz2.d~		//Dervish Crescent +2
COMPILE ~sod2bg2_iu/dialogue/renal1.d~		//Nimblefinger Gloves
COMPILE ~sod2bg2_iu/dialogue/renal2.d~		//Nimblefinger Gloves
COMPILE ~sod2bg2_iu/dialogue/thern1.d~		//Sundermaul +3
COMPILE ~sod2bg2_iu/dialogue/vaela1.d~		//Forest Queen's Benediction
COMPILE ~sod2bg2_iu/dialogue/raelis1.d~		//Skald's Helmet (Voghiln's Helmet)
COMPILE ~sod2bg2_iu/dialogue/bdhigg01.d~		//Reed of Echoes
COMPILE ~sod2bg2_iu/dialogue/garren1.d~		//Helm of Equus
COMPILE ~sod2bg2_iu/dialogue/roger1.d~		//Belt of the Cunning Rogue
COMPILE ~sod2bg2_iu/dialogue/scsain1.d~		//Shield of Egons +2
COMPILE ~sod2bg2_iu/dialogue/trskin04a.d~		//Bracers of Perseverance
COMPILE ~sod2bg2_iu/dialogue/mourner6a.d~		//Flute of the Immaculate Breeze
COPY_EXISTING ~demson.dlg~ ~override~		
	REPLACE_TEXTUALLY ~plat15~ ~dtkrnd04~	//Mail of the Hallowed Hero +3/Pride of the Legion +2
COMPILE ~sod2bg2_iu/dialogue/ohdazoth.d~		//Vexed Armor
COMPILE ~sod2bg2_iu/dialogue/tokcre01.d~		//Boots of Speed/Boots of the Fox

ACTION_IF FILE_EXISTS_IN_GAME ~tamah.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/tamah.d~		//Boots of the Forgotten Ones
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~gandol.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/gandol.d~		//Shadowed Boots
	END

ACTION_IF FILE_EXISTS_IN_GAME ~shandal2.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/shandal2.d~		//Breath of Auril +3
	END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~garan.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/garan1.d~		//Remorhaz - replaces Ankhegs for shell to create helm
	END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~taerom.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/taerom1.d~		//Remorhaz Helmet
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~ulcast.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/ulcast1.d~		//Ulcaster Academy Ring
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~narlen.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/narlen1.d~		//Ring of Shadows
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~landri.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/landri.d~		//Winter Wolf Boots
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~ftown2_.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/ftown2_.d~		//Winter Wolf Scarf
	END
	
COMPILE ~sod2bg2_iu/dialogue/udsola01.d~	//Cloak of the Gargoyle

COMPILE ~sod2bg2_iu/dialogue/helmbyr.d~		//Blazing Glory +3
	COMPILE ~sod2bg2_iu/dialogue/latlara.d~		//Blazing Glory +3
		COMPILE ~sod2bg2_iu/dialogue/talvilon.d~		//Blazing Glory +3
	
//////////////////////////
//Adding items to stores//
//////////////////////////

COPY_EXISTING ~trcar04.sto~ ~override~		//Caravan Merchant
	ADD_STORE_ITEM ~bdbow05~ #0 #0 #0 ~IDENTIFIED~ #1	//Savage Shortbow +2

COPY_EXISTING ~shop04.sto~ ~override~		//Enge's Shop
  ADD_STORE_ITEM ~bdbull02~ #1 #0 #0 ~IDENTIFIED~ #80		//Bullet of Darkness +3
	ADD_STORE_ITEM ~bdarow02~ #1 #0 #0 ~IDENTIFIED~ #80			//Void-Tipped Arrow +3
	    ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Fire +1
			ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Ice +1
			  ADD_STORE_ITEM ~bdbrac02~ #0 #0 #0 ~IDENTIFIED~ #1			//Jester's Bracers
			  	   ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
					   ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
						   ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
							   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
									ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
										ADD_STORE_ITEM ~bdhelm06~ #0 #0 #0 ~IDENTIFIED~ #1			//Peacock Cap
											ADD_STORE_ITEM ~lyre~ #0 #0 #0 ~IDENTIFIED~ #1			//Lyre of Progression
												ADD_STORE_ITEM ~dtkwscrf~ #0 #0 #0 ~IDENTIFIED~ #1			//Winter Wolf Scarf


COPY_EXISTING ~bmthief.sto~ ~override~		//Black Market Thief
  ADD_STORE_ITEM ~bdboot01~ #0 #0 #0 ~IDENTIFIED~ #1		//Soft Feet
  
COPY_EXISTING ~ribald3.sto~ ~override~		//Ribald (restock)
  ADD_STORE_ITEM ~potn33~ #0 #0 #0 ~IDENTIFIED~ #2		//Potion of Magic Blocking
    ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120		//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120		//Bolt of Ice +1
		   ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
			   ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
				   ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~ribald.sto~ ~override~		//Ribald
	ADD_STORE_ITEM ~bdboot12~ #0 #0 #0 ~IDENTIFIED~ #1			//Sidestep Slippers
	  ADD_STORE_ITEM ~potn33~ #0 #0 #0 ~IDENTIFIED~ #2		//Potion of Magic Blocking
		ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120		//Bolt of Fire +1
			ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120		//Bolt of Ice +1
			   ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
				   ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
					   ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
						   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
								ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					   
COPY_EXISTING ~amsmug01.sto~ ~override~		//Amkethran Smugglers
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					   
COPY_EXISTING ~amsmug02.sto~ ~override~		//Amkethran Smugglers 2
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					   
COPY_EXISTING ~arled.sto~ ~override~		//Shadow Thief Fence
	REMOVE_STORE_ITEM ~bow04~	//Longbow +1
		ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
			ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
				ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
					ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
						ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
						   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
								ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
									ADD_STORE_ITEM ~bowmess~ #0 #0 #0 ~IDENTIFIED~ #1			//Messenger of Sseth
										ADD_STORE_ITEM ~helmpat~ #0 #0 #0 ~IDENTIFIED~ #1			//Patriot's Helm
											ADD_STORE_ITEM ~shadows~ #0 #0 #0 ~IDENTIFIED~ #1			//Ring of Shadows

COPY_EXISTING ~bernard5.sto~ ~override~		//Bernard
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
								ADD_STORE_ITEM ~bdsw2h02~ #0 #0 #0 ~IDENTIFIED~ #1		//Sword of Troll Decapitation +1

COPY_EXISTING ~bernard6.sto~ ~override~		//Bernard 2
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~hendak.sto~ ~override~		//Hendak
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~ohbsdwm.sto~ ~override~		//Weapon Merchant
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #40			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #40			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #40			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #40			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #40			//Bullet of Electricity +1
						ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					
COPY_EXISTING ~ohngduke.sto~ ~override~		//Gul Dukeem
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					   
COPY_EXISTING ~ohnsdwm.sto~ ~override~		//Merchant
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #80			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #80			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #80			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #80			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #80			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~trgeni01.sto~ ~override~		//Khan Zahraa
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
								ADD_STORE_ITEM ~bdleat03~ #0 #0 #0 ~IDENTIFIED~ #1			//Racontuer's Regalia
									ADD_STORE_ITEM ~ohbrac02~ #0 #0 #0 ~IDENTIFIED~ #1			//Sarutobi's Stone Breakers

COPY_EXISTING ~trmer04a.sto~ ~override~		//Anvil of the Right
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #120			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #120			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~type3.sto~ ~override~		//Copper Coronet
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~hgkar01.sto~ ~override~		//Karthis al-Hezzar
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160 		//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1

COPY_EXISTING ~sarbar01.sto~ ~override~		//The Tankard Tree
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing	
							ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
					   
COPY_EXISTING ~roger.sto~ ~override~		//Roger the Fence
	ADD_STORE_ITEM ~bdbolt01~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Fire +1
		ADD_STORE_ITEM ~bdbolt02~ #1 #0 #0 ~IDENTIFIED~ #160			//Bolt of Ice +1
			ADD_STORE_ITEM ~bull07~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Fire +1
			    ADD_STORE_ITEM ~bull08~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Ice +1
				    ADD_STORE_ITEM ~bull09~ #1 #0 #0 ~IDENTIFIED~ #160			//Bullet of Electricity +1
					   ADD_STORE_ITEM ~bolt05~ #1 #0 #0 ~IDENTIFIED~ #2				//Bolt of Polymorphing
							 ADD_STORE_ITEM ~bdblun05~ #0 #0 #0 ~IDENTIFIED~ #1				//The Hydra +2
								ADD_STORE_ITEM ~bdarow01~ #1 #0 #0 ~IDENTIFIED~ #5				//Bolt of Antimagic +1
								
COPY_EXISTING ~wmart1.sto~ ~override~		//Joluv
	ADD_STORE_ITEM ~sash~ #0 #0 #0 ~IDENTIFIED~ #1		//Shimmering Sash
		ADD_STORE_ITEM ~amulbro~ #0 #0 #0 ~IDENTIFIED~ #1		//Clasp of Bron's Cloak
			ADD_STORE_ITEM ~usltr3a~ #0 #0 #0 ~IDENTIFIED~ #1		//Shadowed Studded Leather +2
				ADD_STORE_ITEM ~gauntem~ #0 #0 #0 ~IDENTIFIED~ #1		//Gauntlets of Elven Might
					ADD_STORE_ITEM ~ohoiun02~ #0 #0 #0 ~IDENTIFIED~ #1		//Scarlet/Blue Ioun Stone
						ADD_STORE_ITEM ~helmdef~ #0 #0 #0 ~IDENTIFIED~ #1		//Helm of the Trusted Defender
							ADD_STORE_ITEM ~dtkwscrf~ #0 #0 #0 ~IDENTIFIED~ #1		//Winter Wolf Scarf
								ADD_STORE_ITEM ~dtkwboot~ #0 #0 #0 ~IDENTIFIED~ #1		//Winter Wolf Boots
									ADD_STORE_ITEM ~dtkwglov~ #0 #0 #0 ~IDENTIFIED~ #1		//Winter Wolf Gloves
										ADD_STORE_ITEM ~dtkwhat~ #0 #0 #0 ~IDENTIFIED~ #1		//Winter Wolf Hat
		
COPY_EXISTING ~wmart2.sto~ ~override~		//Diedre
	ADD_STORE_ITEM ~bdhelm12~ #0 #0 #0 ~IDENTIFIED~ #1	//Wizzard Hat
	
ACTION_IF FILE_EXISTS_IN_GAME ~taerum.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~taerum.sto~ ~override~		//Taerom Thunderhammer
		ADD_STORE_ITEM ~amulbro~ #0 #0 #0 ~IDENTIFIED~ #1	//Clasp of Bron's Cloak
			ADD_STORE_ITEM ~helmdef~ #0 #0 #0 ~IDENTIFIED~ #1	//Helm of the Trusted Defender
			END
			
ACTION_IF FILE_EXISTS_IN_GAME ~highhedg.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~highhedg.sto~ ~override~		//High Hedge
		ADD_STORE_ITEM ~brac03~ #0 #0 #0 ~IDENTIFIED~ #1	//Bracers to the Death
			ADD_STORE_ITEM ~bardic~ #0 #0 #0 ~IDENTIFIED~ #1	//Bardic Horn of Valhalla
			END
			
ACTION_IF FILE_EXISTS_IN_GAME ~sto4803.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~sto4803.sto~ ~override~		//Nashkel Shop
		ADD_STORE_ITEM ~cdwuff~ #0 #0 #0 ~IDENTIFIED~ #1	//Cloak of the Winter Wolf
			END

COPY_EXISTING ~jayes.sto~ ~override~	//Jayes
	ADD_STORE_ITEM ~auril~ #2 #0 #0 ~IDENTIFIED~ #1		//Breath of Auril

ACTION_IF FILE_EXISTS_IN_GAME ~sto0703.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~band04~ #0 #0 #0 ~IDENTIFIED~ #1	//Circlet of the Archmagi
		END		

ACTION_IF FILE_EXISTS_IN_GAME ~bdnazram.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~bdnazram.sto~ ~override~	//Nazramu
		ADD_STORE_ITEM ~shawm~ #1 #0 #0 ~IDENTIFIED~ #1	//Owain's Lullabye
		END	
		
COPY_EXISTING ~govwau01.sto~ ~override~	//Temple of Waukeen
	ADD_STORE_ITEM ~waukeen~ #0 #0 #0 ~IDENTIFIED~ #1	//Waukeen's Defender +2
	
ACTION_IF FILE_EXISTS_IN_GAME ~ulgoth.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~ulgoth.sto~ ~override~	//Ulgoth's Beard Store and Tavern
		ADD_STORE_ITEM ~bdsumst~ #0 #15 #0 ~IDENTIFIED~ #1	//The Summoner's Staff +3
			REMOVE_STORE_ITEM ~staf08_~ //Aules' Staff +3
		END	

COPY_EXISTING ~ohnscrme.sto~ ~override~		//Scroll Merchant
  ADD_STORE_ITEM ~dtkthrst~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Thunder Thrust
	ADD_STORE_ITEM ~dtkfball~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Trollkiller's Fireball
		ADD_STORE_ITEM ~dtkdebn~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Infernal Bone Shield
			ADD_STORE_ITEM ~dtkferg~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Fell Rage
				ADD_STORE_ITEM ~dtkslig~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Ko'Dezza's Slime Golem
					ADD_STORE_ITEM ~dtkcaus~ #1 #0 #0 ~IDENTIFIED~ #1	//scroll of Ko'Dezza's Caustic Shell
	




///////////////////////////////////
//Adding items to random treasure//
///////////////////////////////////

COPY_EXISTING ~rndtres.2da~ ~override~
	SET_2DA_ENTRY 17 4 2  ~bdarow01~
		SET_2DA_ENTRY 16 4 2  ~bdbolt01*5~
			SET_2DA_ENTRY 16 5 2  ~bdbolt02*5~
				SET_2DA_ENTRY 16 6 2  ~bull07*5~
					SET_2DA_ENTRY 16 7 2  ~bull08*5~
						SET_2DA_ENTRY 16 8 2  ~bull09*5~

COPY - ~sod2bg2_iu/2da/rndtres.2da~ ~sod2bg2_iu/2da/rndtres.2da~
  READ_2DA_ENTRIES_NOW r2en_rndtres 1

COPY_EXISTING ~rndtres.2da~ ~override~
  COUNT_2DA_COLS num_cols
  COUNT_2DA_ROWS num_cols num_rows
  FOR (row = 0; row < r2en_rndtres; row += 1) BEGIN
    READ_2DA_ENTRY_FORMER r2en_rndtres row 0 item
    READ_2DA_ENTRY_FORMER r2en_rndtres row 1 tres1
    READ_2DA_ENTRY_FORMER r2en_rndtres row 2 tres2
    READ_2DA_ENTRY_FORMER r2en_rndtres row 3 tres3
	READ_2DA_ENTRY_FORMER r2en_rndtres row 4 tres4
    READ_2DA_ENTRY_FORMER r2en_rndtres row 5 tres5
    READ_2DA_ENTRY_FORMER r2en_rndtres row 6 tres6
    READ_2DA_ENTRY_FORMER r2en_rndtres row 7 tres7
    READ_2DA_ENTRY_FORMER r2en_rndtres row 8 tres8
    READ_2DA_ENTRY_FORMER r2en_rndtres row 9 tres9
    READ_2DA_ENTRY_FORMER r2en_rndtres row 10 tres10
    READ_2DA_ENTRY_FORMER r2en_rndtres row 11 tres11
    READ_2DA_ENTRY_FORMER r2en_rndtres row 12 tres12
    READ_2DA_ENTRY_FORMER r2en_rndtres row 13 tres13
    READ_2DA_ENTRY_FORMER r2en_rndtres row 14 tres14
    READ_2DA_ENTRY_FORMER r2en_rndtres row 15 tres15
    READ_2DA_ENTRY_FORMER r2en_rndtres row 16 tres16
    READ_2DA_ENTRY_FORMER r2en_rndtres row 17 tres17
    READ_2DA_ENTRY_FORMER r2en_rndtres row 18 tres18
    READ_2DA_ENTRY_FORMER r2en_rndtres row 19 tres19
    READ_2DA_ENTRY_FORMER r2en_rndtres row 20 tres20
	READ_2DA_ENTRY_FORMER r2en_rndtres row 21 tres21
	READ_2DA_ENTRY_FORMER r2en_rndtres row 22 tres22
	READ_2DA_ENTRY_FORMER r2en_rndtres row 23 tres23
	READ_2DA_ENTRY_FORMER r2en_rndtres row 24 tres24
	READ_2DA_ENTRY_FORMER r2en_rndtres row 25 tres25
	READ_2DA_ENTRY_FORMER r2en_rndtres row 26 tres26
	READ_2DA_ENTRY_FORMER r2en_rndtres row 27 tres27
	READ_2DA_ENTRY_FORMER r2en_rndtres row 28 tres28
	READ_2DA_ENTRY_FORMER r2en_rndtres row 29 tres29
	READ_2DA_ENTRY_FORMER r2en_rndtres row 30 tres30
	READ_2DA_ENTRY_FORMER r2en_rndtres row 31 tres31
	READ_2DA_ENTRY_FORMER r2en_rndtres row 32 tres32
	READ_2DA_ENTRY_FORMER r2en_rndtres row 33 tres33
	READ_2DA_ENTRY_FORMER r2en_rndtres row 34 tres34
	READ_2DA_ENTRY_FORMER r2en_rndtres row 35 tres35
	READ_2DA_ENTRY_FORMER r2en_rndtres row 36 tres36
	READ_2DA_ENTRY_FORMER r2en_rndtres row 37 tres37
	READ_2DA_ENTRY_FORMER r2en_rndtres row 38 tres38
	READ_2DA_ENTRY_FORMER r2en_rndtres row 39 tres39
	READ_2DA_ENTRY_FORMER r2en_rndtres row 40 tres40
    INSERT_2DA_ROW num_rows num_cols ~%item%  %tres1%  %tres2%  %tres3%  %tres4%  %tres5%  %tres6%  %tres7%  %tres8%  %tres9%  %tres10%  %tres11%  %tres12%  %tres13%  %tres14%  %tres15%  %tres16%  %tres17%  %tres18%  %tres19%  %tres20%  %tres21%  %tres22%  %tres23%  %tres24%  %tres25%  %tres26%  %tres27%  %tres28%  %tres29%  %tres30%  %tres31%  %tres32%  %tres33%  %tres34%  %tres35%  %tres36%  %tres37%  %tres38%  %tres39%  %tres40%~
    SET num_rows += 1
		PRETTY_PRINT_2DA
  END
  BUT_ONLY					   

//////////////////////////////////////////////////////
//Adding charge item ability to Robe of Vecna       //
//////////////////////////////////////////////////////

COPY_EXISTING ~wa2robe.itm~ ~override/wa2robe.itm~		//Robe of Vecna - adding scroll charge
	  SAY NAME1 @2327	
		SAY UNIDENTIFIED_DESC @2328
			WRITE_BYTE 0x42 ~200~
			PATCH_IF (SOURCE_SIZE < 0x202) BEGIN
				LPF ADD_ITEM_HEADER INT_VAR target = 5 range = 1 charges = 1 required_id = 1 depletion = 3 STR_VAR icon = dtkconds END
					LPF ADD_ITEM_EFFECT INT_VAR header = 1 type = 3 opcode = 122 target = 1 timing = 1 type_flags = 0 STR_VAR resource = dtkcdeat END
						LPF ADD_ITEM_EFFECT INT_VAR header = 1 type = 3 opcode = 215 target = 1 timing = 0 duration = 4 STR_VAR resource = spcontin END
					END

COPY_EXISTING ~wmart2.sto~ ~override~		//Diedre
	REMOVE_STORE_ITEM ~wa2robe~
		ADD_STORE_ITEM ~wa2robe~ #0 #0 #0 ~NONE~ #1
	
////////////////////////////////
//Adding item ability tooltips//
////////////////////////////////

COPY - ~sod2bg2_iu/2da/tooltip.2da~ ~sod2bg2_iu/2da/tooltip.2da~
  READ_2DA_ENTRIES_NOW r2en_tooltip 1

COPY_EXISTING ~tooltip.2da~ ~override~
  COUNT_2DA_COLS num_cols
  COUNT_2DA_ROWS num_cols num_rows
  FOR (row = 0; row < r2en_tooltip; row += 1) BEGIN
    READ_2DA_ENTRY_FORMER r2en_tooltip row 0 item
    READ_2DA_ENTRY_FORMER r2en_tooltip row 1 ability1
    READ_2DA_ENTRY_FORMER r2en_tooltip row 2 ability2
    READ_2DA_ENTRY_FORMER r2en_tooltip row 3 ability3
    LPF RESOLVE_REF STR_VAR ref = EVAL ~%ability1%~ RET ability1 = strref END
    LPF RESOLVE_REF STR_VAR ref = EVAL ~%ability2%~ RET ability2 = strref END
    LPF RESOLVE_REF STR_VAR ref = EVAL ~%ability3%~ RET ability3 = strref END
    INSERT_2DA_ROW num_rows num_cols ~%item%  %ability1%  %ability2%  %ability3%~
    SET num_rows += 1
		PRETTY_PRINT_2DA
  END
  BUT_ONLY
   
//////////////////////////////////////////////////
//Updating Reflection Shield for new projectiles//
//////////////////////////////////////////////////

COPY_EXISTING ~shld24.itm~ ~override~	//Reflection Shield +1
  	SET projectile = EVAL "%dtkdagg1%"
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkaxel%"
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtkaxham%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect








  
  

 
 
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Optional Components						       \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\


////////////////////////////////////////////////
// Remove Corny Jokes from Jester's Bracers/////
////////////////////////////////////////////////

BEGIN @9039
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003
REQUIRE_PREDICATE MOD_IS_INSTALLED ~sod2bg2_iu/setup-sod2bg2_iu.tp2~ ~0~ @9040
PRINT @9001

ACTION_IF FILE_EXISTS_IN_GAME ~bdbrac02.itm~ BEGIN // check if present	
	COPY_EXISTING ~bdbrac02.itm~ ~override~	//Jester's Bracers
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = bdbrac02 END
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~dtkbrac2.itm~ BEGIN // check if present	
	COPY_EXISTING ~dtkbrac2.itm~ ~override~	//Wicked Jester's Bracers
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = bdbrac02 END
	END
	

BEGIN @9041
GROUP @9035
REQUIRE_PREDICATE GAME_IS ~bgee~ @9009
PRINT @9001

ACTION_IF FILE_EXISTS_IN_GAME ~bdbrac02.itm~ BEGIN // check if present	
	COPY_EXISTING ~bdbrac02.itm~ ~override~	//Jester's Bracers
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = bdbrac02 END
	END


//////////////////////////////////////////////////////////////////////////////////////
// Update names and appearanc of existing dragonscale-based items for consistency/////
//////////////////////////////////////////////////////////////////////////////////////

BEGIN @9037
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003
PRINT @9001

ACTION_IF FILE_EXISTS_IN_GAME ~plat18.itm~ BEGIN // check if present	
	COPY_EXISTING ~plat18.itm~ ~override~	//Red Dragon Scale -> Red Dragon Plate +2
		SAY NAME1 @2177
		SAY NAME2 @2766
		SAY UNIDENTIFIED_DESC @2179
		WRITE_BYTE 0x42 130
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 211 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 209 END
			SET location = 0
			SET cycle_speed = 90  
			SET r = 89
			SET b = 0
			SET g = 45
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET r = 255
				SET b = 217
				SET g = 217
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 5 timing = 2 probability1 = 100 END // This adds a solid tint effect in the desired location

		END	
		
ACTION_IF FILE_EXISTS_IN_GAME ~leat19.itm~ BEGIN // check if present	
	COPY_EXISTING ~leat19.itm~ ~override~	//Shadow Dragon Scale -> Shadow Dragonscale Armor +3
		SAY NAME1 @2177
		SAY NAME2 @2772
		SAY UNIDENTIFIED_DESC @2179
		WRITE_BYTE 0x42 130
		WRITE_SHORT 0x60 3
		LPF DELETE_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 2 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 190 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 235 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 199 END
			SET location = 0
			SET cycle_speed = 90  
			SET r = 21
			SET b = 128
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET r = 201
				SET b = 230
				SET g = 195
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 4 timing = 2 probability1 = 100 END // This adds a solid tint effect in the desired location

		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~ohdarmor.itm~ BEGIN // check if present	
	COPY_EXISTING ~ohdarmor.itm~ ~override~	//Silver Dragon Scale -> Silver Dragon Plate +3
		SAY NAME1 @2177
		SAY NAME2 @2767
		SAY UNIDENTIFIED_DESC @2179
		WRITE_BYTE 0x42 130
		WRITE_ASCII 0x3a dtksildp
		WRITE_SHORT 0x60 3
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 255 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 209 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 5 END
			SET location = 0
			SET cycle_speed = 90  
			SET r = 64
			SET b = 64
			SET g = 64
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET r = 242
				SET b = 242
				SET g = 242
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 5 timing = 2 probability1 = 100 END // This adds a solid tint effect in the desired location

		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~chan20.itm~ BEGIN // check if present	
	COPY_EXISTING ~chan20.itm~ ~override~	//White Dragon Scale -> White Dragonscale Armor +6
		SAY NAME1 @2177
		SAY NAME2 @2764
		SAY UNIDENTIFIED_DESC @2179
		WRITE_BYTE 0x42 130
		WRITE_SHORT 0x60 6
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 255 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 5 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 200 END
			SET location = 0
			SET cycle_speed = 90  
			SET r = 64
			SET b = 64
			SET g = 64

		END

ACTION_IF FILE_EXISTS_IN_GAME ~plat20.itm~ BEGIN // check if present	
	COPY_EXISTING ~plat20.itm~ ~override~	//Blue Dragon Plate -> Blue Dragon Plate +2
		SAY NAME1 @2177
		SAY NAME2 @2771
		SAY UNIDENTIFIED_DESC @2179
		WRITE_BYTE 0x42 130
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 82 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 96 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 199 END
			SET location = 0
			SET cycle_speed = 90  
			SET r = 0
			SET b = 64
			SET g = 51
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET r = 217
				SET b = 255
				SET g = 243
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 5 timing = 2 probability1 = 100 END // This adds a solid tint effect in the desired location

		END	
		
ACTION_IF FILE_EXISTS_IN_GAME ~helm21.itm~ BEGIN // check if present	
	COPY_EXISTING ~helm21.itm~ ~override~	//Dragon Helm -> Chromatic Dragon Helm
		SAY NAME2 @2770
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 52 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 195 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 49 parameter1 = 210 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF DELETE_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 50 END

		END	

ACTION_IF FILE_EXISTS_IN_GAME ~shld21.itm~ BEGIN // check if present
COPY_EXISTING ~shld21.itm~ ~override~	  //Dragon Scale Shield +2 -> Chromatic Dragonscale Shield +2
SAY NAME2 @2769
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 37 parameter1 = 210 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 33 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 32 parameter1 = 210 END  // changing color index - parameter 2 = location parameter 1 = color index number
		SET cycle_speed = 144
		SET location = 33
		SET r = 41
		SET b = 0
		SET g = 22
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..

END
/////////////////////////////////////////
// Force all import-able items from SoD//
/////////////////////////////////////////

BEGIN @9004
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003 //SoD Global Variables with Voidsword +3
SUBCOMPONENT @9002

EXTEND_BOTTOM ~baldur.bcs~ ~sod2bg2_iu/scripts/baldur.baf~	


BEGIN @9005
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003 //SoD Global Variables with Voidhammer +3
SUBCOMPONENT @9002

EXTEND_BOTTOM ~baldur.bcs~ ~sod2bg2_iu/scripts/baldur1.baf~	

BEGIN @9036
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003 //SoD Global Variables with random Voidsword +3/Voidhammer +3
SUBCOMPONENT @9002

EXTEND_BOTTOM ~baldur.bcs~ ~sod2bg2_iu/scripts/baldur2.baf~	
EXTEND_BOTTOM ~ar0808.bcs~ ~sod2bg2_iu/scripts/ar0808.baf~

///////////////////////////////////////////////////////////////
// Equip Cromwell with new items more relevant to his skills //
///////////////////////////////////////////////////////////////

BEGIN @9007
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ @9003
PRINT @9001


COPY ~sod2bg2_iu/itm/cromrobe/dtkfrgrb.itm~ ~override~
  SAY NAME2 @2233
  SAY DESC @2234

COPY ~sod2bg2_iu/itm/remohelm/dtkremoh.itm~ ~override~
  SAY NAME2 @2235
  SAY DESC @2236

COPY ~sod2bg2_iu/itm/cromhammer/dtkfrghm.itm~ ~override~
  SAY NAME2 @2237
  SAY DESC @2238

COPY_EXISTING ~wsmith01.cre~ ~override~
  REPLACE_CRE_ITEM ~dtkfrghm~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON~ EQUIP		//The Forger +3

COPY_EXISTING ~wsmith01.cre~ ~override~
  REPLACE_CRE_ITEM ~dtkfrgrb~ #0 #0 #0 ~UNDROPPABLE~ ~ARMOR~		//Forgemaster's Robes

COPY_EXISTING ~wsmith01.cre~ ~override~
  REPLACE_CRE_ITEM ~dtkremoh~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~		//Cromwell's Remorhaz Helm



/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
///// Allow choice of items imported from BG1          \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\

////////////////////////////////////////////
/////////////Weapon/////////////////////////
////////////////////////////////////////////


BEGIN @9011
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~sw1h06~	//Varscona +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 

BEGIN @9012
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~sw1h24~	//The Burning Earth +1
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9013
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~hamm03~	//Ashideena +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9014
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~ax1h07~	//Bala's Axe, Wizard Slayer
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9015
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~halb03~	//Suryris's Blade +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
BEGIN @9016
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~dagg04~	//The Grave Binder +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9017
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~staf07~	//Staff Spear +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9018
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~staf06~	//Staff Mace +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9019
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~slng03~	//Sling +3
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9020
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~blun11~	//Krotan's Skullcrusher +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9021
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~blun09~	//Kiel's Morningstar +3
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9022
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9010
PRINT @9001


COPY_EXISTING ~import02.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~sw2h99~	//Cursed Berserking Sword +3
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~
	SET_2DA_ENTRY 6 1 2  ~*~
	SET_2DA_ENTRY 7 1 2  ~*~
	SET_2DA_ENTRY 8 1 2  ~*~
	SET_2DA_ENTRY 9 1 2  ~*~
	SET_2DA_ENTRY 10 1 2  ~*~
	SET_2DA_ENTRY 11 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
 
////////////////////////////////////////////
/////////////Armor//////////////////////////
////////////////////////////////////////////


BEGIN @9025
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9024
PRINT @9001


COPY_EXISTING ~import01.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~chan03~	//Mail of the Dead +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~

 PRETTY_PRINT_2DA
 

BEGIN @9026
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9024
PRINT @9001


COPY_EXISTING ~import01.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~leat03~	//Protector of the Second +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~

 PRETTY_PRINT_2DA
 

BEGIN @9027
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9024
PRINT @9001


COPY_EXISTING ~import01.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~plat02~	//Fallorain's Plate +1
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9028
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9024
PRINT @9001


COPY_EXISTING ~import01.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~leat06~	//Armor of Missile Attraction +2
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9029
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9024
PRINT @9001


COPY_EXISTING ~import01.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~chan07~	//Chain Mail +3
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~
	SET_2DA_ENTRY 5 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
////////////////////////////////////////////
/////////////Item///////////////////////////
////////////////////////////////////////////


BEGIN @9031
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9030
PRINT @9001


COPY_EXISTING ~import03.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~helm07~	//Helm of Balduran
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9032
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9030
PRINT @9001


COPY_EXISTING ~import03.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~misc72~	//The Claw of Kazgoroth
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9033
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9030
PRINT @9001


COPY_EXISTING ~import03.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~misc73~	//The Horn of Kazgoroth
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~

 PRETTY_PRINT_2DA
 
 
BEGIN @9034
GROUP @9035
REQUIRE_PREDICATE NOT GAME_IS ~bgee bg1 iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @9003
SUBCOMPONENT @9030
PRINT @9001


COPY_EXISTING ~import03.2da~ ~override~
	SET_2DA_ENTRY 1 0 1  ~rin25~	//Koveras's Ring of Protection
	SET_2DA_ENTRY 1 1 2  ~*~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 3 1 2  ~*~
	SET_2DA_ENTRY 4 1 2  ~*~

 PRETTY_PRINT_2DA
  
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Add IWD:EE Items and new spells to BG1/SoD       \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\

BEGIN @9008
REQUIRE_PREDICATE GAME_IS ~bgee~ @9009
PRINT @9001

INCLUDE ~sod2bg2_iu/lib/functions.tpa~		//adding functions
INCLUDE ~sod2bg2_iu/lib/classspelltool.tpa~		//adding functions

////////////////////
//Adding Resources//
////////////////////
ACTION_IF GAME_IS ~bg2ee~ BEGIN
COPY ~sod2bg2_iu/sodresource/bam~ ~override~
COPY ~sod2bg2_iu/sodresource/eff~ ~override~
COPY ~sod2bg2_iu/sodresource/wav~ ~override~
COPY ~sod2bg2_iu/sodresource/vvc~ ~override~
END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~mdrda1.bam~ BEGIN //Checks for bams required for drowned dead
	COPY ~sod2bg2_iu/anim/drowned/bam~ ~override~
	END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~drown01.wav~ BEGIN //Checks for wavs required for drowned dead
	COPY ~sod2bg2_iu/anim/drowned/wav~ ~override~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgica1.bam~ BEGIN //Checks for bams required for ice golem
		COPY ~sod2bg2_iu/anim/icegolem/bam~ ~override~
		END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~icegol01.wav~ BEGIN //Checks for wavs required for ice golem
		COPY ~sod2bg2_iu/anim/icegolem/wav~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~melwa1.bam~ BEGIN //Checks for bams required for iwd water elemental
			COPY ~sod2bg2_iu/anim/waterele/bam~ ~override~
			END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~watere01.wav~ BEGIN //Checks for wavs required for iwd water elemental
			COPY ~sod2bg2_iu/anim/waterele/wav~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~weird01.wav~ BEGIN //Checks for wavs required for bg water elemental
				COPY ~sod2bg2_iu/anim/watweird/wav~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~mzo2a1.bam~ BEGIN //Checks for bams required for iwd yellow zombie
					COPY ~sod2bg2_iu/anim/zombie/yellow/bam~ ~override~
					END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~zomwor01.wav~ BEGIN //Checks for wavs required for iwd yellow zombie
					COPY ~sod2bg2_iu/anim/zombie/yellow/wav~ ~override~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwilg1.bam~ BEGIN //Checks for bams required for will-o-wisp
						COPY ~sod2bg2_iu/anim/willowisp/bam~ ~override~
						END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~wisp03a.wav~ BEGIN //Checks for wavs required for will-o-wisp
						COPY ~sod2bg2_iu/anim/willowisp/wav~ ~override~
						END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~mdtra1.bam~ BEGIN //Checks for bams required for dark treant
							COPY ~sod2bg2_iu/anim/treant/bam~ ~override~
							END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~tree0a1.wav~ BEGIN //Checks for wavs required for dark treant
							COPY ~sod2bg2_iu/anim/treant/wav~ ~override~
							END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwiga1.bam~ BEGIN //Checks for bams required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/wight_gray/bam~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~wight01.wav~ BEGIN //Checks for wavs required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/wight_gray/wav~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_sm01.wav~ BEGIN //Checks for shared wavs required for iwd wight_gray
								COPY ~sod2bg2_iu/anim/shared/wav~ ~override~
								END

COPY ~sod2bg2_iu/bam~ ~override~
COPY ~sod2bg2_iu/eff~ ~override~
COPY ~sod2bg2_iu/vvc~ ~override~
COPY ~sod2bg2_iu/wav~ ~override~
COPY ~sod2bg2_iu/vef~ ~override~
COPY ~sod2bg2_iu/itm/randomtreasure~ ~override~


///////////////////////
// Adding Projectiles//
///////////////////////

ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpfir.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshrod.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshout.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdagg1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksnow.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwave.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkaxel.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwhirl.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwind.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicel.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicely.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkicelx.pro~
	COPY_EXISTING ~dtkicely.pro~ ~override~
	WRITE_SHORT 0x21a ~%dtkicelx%~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdrain.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkjest.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkchaos.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkexalt.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkpenc3.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmagsp.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkaxham.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkbiter.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkthrs1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkthrs2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfball.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkhoar1.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkhoar2.pro~
	COPY_EXISTING ~dtkhoar1.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkhoar2%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkffblt.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcorro.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdarkn.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfaeri.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshblt.pro~	//Shining Bolt - dont mix up with Shadow Bolt projectiles
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkgshd.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkgshd2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksbltx.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdflam.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkedis.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfblx.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcquag.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcqug2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcata.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcata2.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmael.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkmael2.pro~
	COPY_EXISTING ~dtkmael.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkmael2%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksuns.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkholo.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkcrus.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkantix.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkantiy.pro~
	COPY_EXISTING ~dtkantix.pro~ ~override~
	WRITE_SHORT 0x214 ~%dtkantiy%~ -1
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkfwhi.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkscor.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtksilbr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkwdbre.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkblubr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkshabr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvenbr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkblabr.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdevd.pro~
ADD_PROJECTILE ~sod2bg2_iu/pro/dtkkfrz.pro~


//////////////////////////
//Adding Creatures  //////
//////////////////////////
COPY ~sod2bg2_iu/cre/dtkbrsk1.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk2.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld1.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrsk3.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk4.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld2.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrsk5.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrsk6.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkdbld3.cre~ ~override~
   SAY NAME1 @7001
   SAY NAME2 @7001
COPY ~sod2bg2_iu/cre/dtkbrska.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskb.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskc.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskd.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrske.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskf.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskg.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskh.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrski.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskj.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskk.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
COPY ~sod2bg2_iu/cre/dtkbrskl.cre~ ~override~
   SAY NAME1 @7000
   SAY NAME2 @7000
   
COPY ~sod2bg2_iu/cre/dtkgbear.cre~ ~override~
   SAY NAME1 @7004
   SAY NAME2 @7004

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdankhsu.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bdankhsu.cre~ ~override~
   SAY NAME1 @7002
   SAY NAME2 @7002
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddanc01.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bddanc01.cre~ ~override~
   SAY NAME1 @7003
   SAY NAME2 @7003
END

COPY_EXISTING ~bddanc01.cre~ ~override~
	WRITE_BYTE 0x270 4
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bddanc02.cre~ BEGIN // check if exists for EET games
COPY ~sod2bg2_iu/cre/bddanc02.cre~ ~override~
   SAY NAME1 @7003
   SAY NAME2 @7003
END

COPY_EXISTING ~bddanc02.cre~ ~override~		//sets summoned creature to ally for dancing lights to function as intended
	WRITE_BYTE 0x270 4
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~remorha.cre~ BEGIN // check if exists
COPY ~sod2bg2_iu/iwdresource/bam/remorhaz~ ~override~	//BAM files required for Remorhaz animation
COPY ~sod2bg2_iu/iwdresource/wav/remorhaz~ ~override~	//WAV files required for Remorhaz sounds
COPY ~sod2bg2_iu/iwdresource/itm/remorha.itm~ ~override~	//Attack item for Remorhaz
COPY ~sod2bg2_iu/iwdresource/cre/remorha.cre~ ~override~	//Remorhaz
   SAY NAME1 @7006
   SAY NAME2 @7006
   WRITE_ASCII 0x248 gpshout
   WRITE_ASCII 0x268 wtasight
   LPF ADD_CRE_EFFECT INT_VAR opcode = 101 target = 1 parameter2 = 40 timing = 1 probability1 = 100 END
		COPY ~sod2bg2_iu/iwdresource/cre/remorha.cre~ ~override/dtkremor.cre~	//Remorhaz
		   SAY NAME1 @7006
		   SAY NAME2 @7006
		   WRITE_ASCII 0x248 gpshout
		   WRITE_ASCII 0x268 wtasight
		   LPF ADD_CRE_EFFECT INT_VAR opcode = 101 target = 1 parameter2 = 40 timing = 1 probability1 = 100 END
		   REMOVE_CRE_ITEM ~cdrem~	//removes shell from inventory
END

COMPILE ~sod2bg2_iu/scripts/dtkduer1.baf~
COPY ~sod2bg2_iu/cre/dtkduer1.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer1
   
COMPILE ~sod2bg2_iu/scripts/dtkduer2.baf~
COPY ~sod2bg2_iu/cre/dtkduer2.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer2
   
COMPILE ~sod2bg2_iu/scripts/dtkduer3.baf~
COPY ~sod2bg2_iu/cre/dtkduer3.cre~ ~override~	//Duergar Slave
   SAY NAME1 @7008
   SAY NAME2 @7008
   WRITE_ASCII 0x248 dtkduer3
   
COMPILE ~sod2bg2_iu/scripts/dtktanar.baf~
COPY ~sod2bg2_iu/cre/dtktanar.cre~ ~override~	//Tanar'ri Slaver
   SAY NAME1 @7009
   SAY NAME2 @7009
   WRITE_ASCII 0x248 dtktanar

COMPILE ~sod2bg2_iu/scripts/dtkdshm.baf~   
COPY ~sod2bg2_iu/cre/dtkdshm.cre~ ~override~	//Shadow Fiend
   SAY NAME1 @7010
   SAY NAME2 @7010
   WRITE_ASCII 0x248 dtkdshm

COPY ~sod2bg2_iu/2da/dtkslig.2da~ ~override~   
COPY ~sod2bg2_iu/cre/dtkslig.cre~ ~override~	//Slime Golem
   SAY NAME1 @7011
   SAY NAME2 @7011

COPY ~sod2bg2_iu/cre/dtktren1.cre~ ~override~	//9HD Dark Treant
   SAY NAME1 @7012
   SAY NAME2 @7012
	   COPY ~sod2bg2_iu/cre/dtktren2.cre~ ~override~	//10HD Dark Treant
	   SAY NAME1 @7012
	   SAY NAME2 @7012
			COPY ~sod2bg2_iu/cre/dtktren3.cre~ ~override~	//11HD Dark Treant
			SAY NAME1 @7012
			SAY NAME2 @7012

COPY ~sod2bg2_iu/spl/dtkputz.spl~ ~override~	//Putrid Zombie Spell			
COPY ~sod2bg2_iu/cre/dtkputz1.cre~ ~override~	//Putrid Zombie
   SAY NAME1 @7013
   SAY NAME2 @7013
		COPY ~sod2bg2_iu/cre/dtkputz2.cre~ ~override~	//Putrid Zombie
		SAY NAME1 @7013
		SAY NAME2 @7013
			COPY ~sod2bg2_iu/cre/dtkputz3.cre~ ~override~	//Putrid Zombie
		    SAY NAME1 @7013
		    SAY NAME2 @7013

COMPILE ~sod2bg2_iu/scripts/dtkchar1.baf~			
COPY ~sod2bg2_iu/cre/dtkchar1.cre~ ~override~	//7HD Charged Wight
   SAY NAME1 @7014
   SAY NAME2 @7014
   WRITE_ASCII 0x268 dtkchar1
		COPY ~sod2bg2_iu/cre/dtkchar2.cre~ ~override~	//9HD Charged Wight
		SAY NAME1 @7014
		SAY NAME2 @7014
		WRITE_ASCII 0x268 dtkchar1
			COPY ~sod2bg2_iu/cre/dtkchar3.cre~ ~override~	//11HD Charged Wight
		    SAY NAME1 @7014
		    SAY NAME2 @7014
			WRITE_ASCII 0x268 dtkchar1
			
COPY ~sod2bg2_iu/itm/creitems/dtkshdel.itm~ ~override~		//Shadow Elemental attack
SAY NAME1 @5065
SAY NAME2 @5065
COPY ~sod2bg2_iu/cre/dtkshdel.cre~ ~override~		//Shadow Elemental - Berserk
   SAY NAME1 @7015
   SAY NAME2 @7015
	   COPY ~sod2bg2_iu/cre/dtkelsh1.cre~ ~override~		//Shadow Elemental - 12HD
	   SAY NAME1 @7015
	   SAY NAME2 @7015
		   COPY ~sod2bg2_iu/cre/dtkelsh2.cre~ ~override~		//Shadow Elemental - 16HD
		   SAY NAME1 @7015
		   SAY NAME2 @7015
			   COPY ~sod2bg2_iu/cre/dtkelsh3.cre~ ~override~		//Shadow Elemental - 24HD
			   SAY NAME1 @7015
			   SAY NAME2 @7015
			   

/////////////////////////////////////////////////////
//////////Adding items for creatures/////////////////
/////////////////////////////////////////////////////


COPY ~sod2bg2_iu/itm/creitems/dtkskla1.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2244
COPY ~sod2bg2_iu/itm/creitems/dtkskla2.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2245
COPY ~sod2bg2_iu/itm/creitems/dtkskla3.itm~ ~override~	//throwing axe for skeleton summon
  SAY NAME2 @2246
  
COPY ~sod2bg2_iu/itm/creitems/dtkskls3.itm~ ~override~	//shield for skeleton summon
  SAY NAME2 @2243
  
COPY ~sod2bg2_iu/itm/creitems/dtksklh1.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh2.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh3.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh4.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh5.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh6.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh7.itm~ ~override~	//helmet for skeleton summon
COPY ~sod2bg2_iu/itm/creitems/dtksklh8.itm~ ~override~	//helmet for skeleton summon

ACTION_IF NOT FILE_EXISTS_IN_GAME ~shld17a.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/shld17a.itm~ ~override~	//buckler +1 for skeleton summon
	SAY NAME1 @2775
	SAY NAME2 @2776
	SAY UNIDENTIFIED_DESC @2777
	SAY DESC @2778
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~shld28a.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/shld28a.itm~ ~override~	//small shield +2 for skeleton summon
	SAY NAME1 @2779
	SAY NAME2 @2780
	SAY UNIDENTIFIED_DESC @2781
	SAY DESC @2782
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~dagg24.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/dagg24.itm~ ~override~	//dagger +3 for skeleton summon
	SAY NAME1 @2783
	SAY NAME2 @2784
	SAY UNIDENTIFIED_DESC @2785
	SAY DESC @2786
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~sw1h73.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/sw1h73.itm~ ~override~	//long sword +3 for skeleton summon
	SAY NAME1 @2000
	SAY NAME2 @2787
	SAY UNIDENTIFIED_DESC @2581
	SAY DESC @2788
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~xbow18.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/xbow18.itm~ ~override~	//light crossbow +3 for skeleton summon
	SAY NAME1 @2789
	SAY NAME2 @2790
	SAY UNIDENTIFIED_DESC @2791
	SAY DESC @2792
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bolt09.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/bolt09.itm~ ~override~	//bolt +3 for skeleton summon
	SAY NAME1 @2793
	SAY NAME2 @2794
	SAY UNIDENTIFIED_DESC @2795
	SAY DESC @2796
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~blun32.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/blun32.itm~ ~override~	//flail +3 for skeleton summon
	SAY NAME1 @2550
	SAY NAME2 @2797
	SAY UNIDENTIFIED_DESC @2552
	SAY DESC @2798
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~hamm12.itm~ BEGIN // check if already present to prevent conflicts
	COPY ~sod2bg2_iu/itm/creitems/hamm12.itm~ ~override~	//war hammer +3 for skeleton summon
	SAY NAME1 @2530
	SAY NAME2 @2799
	SAY UNIDENTIFIED_DESC @2532
	SAY DESC @2800
	END
	

COPY ~sod2bg2_iu/itm/creitems/dtkdrsw1.itm~ ~override~	//attack for drowned-in-blood summon
	SAY NAME1 @5051
	SAY NAME2 @5051

COPY ~sod2bg2_iu/itm/creitems/dtkslig1.itm~ ~override~	//attack for slime golem
	SAY NAME1 @5051
	SAY NAME2 @5051

COPY ~sod2bg2_iu/itm/creitems/dtktren1.itm~ ~override~	//ring for dark treant
COPY ~sod2bg2_iu/itm/creitems/dtktren2.itm~ ~override~	//attack for dark treant
	SAY NAME1 @5051
	SAY NAME2 @5051
	
COPY ~sod2bg2_iu/itm/creitems/dtkputzw.itm~ ~override~	//attack for putrid zombie
	SAY NAME1 @5051
	SAY NAME2 @5051
	
COPY ~sod2bg2_iu/itm/creitems/dtkcharw.itm~ ~override~	//attack for charged wight
	SAY NAME1 @5051
	SAY NAME2 @5051			   
			   
			   
//////////////////////////
//////////////////////////
//Adding SoD Spells //////
//////////////////////////
//////////////////////////

///////////////////////////////////////////////
//////////////////Dancing Lights///////////////
///////////////////////////////////////////////

		
ACTION_IF GAME_IS ~bgee~ BEGIN	// modifies existing scroll for BGEE
  ADD_SPELL ~sod2bg2_iu/spl/dtkdance.spl~ 2 2 WIZARD_DANCING_LIGHTS		//adding first as different level to remove existing - this fixes spell for sorc spell progression
  ADD_SPELL ~sod2bg2_iu/spl/dtkdance.spl~ 2 1 WIZARD_DANCING_LIGHTS		//adding second time - removes previous and restores correct level and allows sorc to learn
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3019  // Spell Name
	SAY NAME2 @3019
	SAY UNIDENTIFIED_DESC @3020  // Spell description
	SAY DESC @3020
	WRITE_ASCII 0x3a dtkdancc
	    LPF ALTER_SPELL_HEADER INT_VAR header = 0 STR_VAR icon = dtkdancb END
			COPY_EXISTING ~bdscrl1a.itm~ ~override~
				WRITE_ASCII 0x3a dtkdanca
				LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 STR_VAR icon = dtkdanca END
				LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 STR_VAR resource = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 147 STR_VAR resource = EVAL ~%current_spell_res%~ END
				END

ACTION_IF GAME_IS ~bgee~ BEGIN	// placing scrolls for BGEE
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl1a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
				END
			


///////////////////////////////////////////////////////
/////////////////Darkness 15' Radius///////////////////
///////////////////////////////////////////////////////


ACTION_IF GAME_IS ~bgee~ BEGIN //Modifies existing for BGEE
  ADD_SPELL ~sod2bg2_iu/spl/dtkdarkn.spl~ 2 3 WIZARD_DARKNESS_15_FOOT	//adding first as different level to remove existing - this fixes spell for sorc spell progression
  ADD_SPELL ~sod2bg2_iu/spl/dtkdarkn.spl~ 2 2 WIZARD_DARKNESS_15_FOOT	//adding second time - removes previous and restores correct level and allows sorc to learn
    LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3021 // Spell Name
	SAY NAME2 @3021
	SAY UNIDENTIFIED_DESC @3022  // Spell description
	SAY DESC @3022
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
      COPY ~sod2bg2_iu/spl/dtkdarkn.spl~ ~override~		//second copy for item use, prevents problems, allows variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdarkn%" END
		SAY NAME1 @3021 // Spell Name
		SAY NAME2 @3021
		SAY UNIDENTIFIED_DESC @3022  // Spell description
		SAY DESC @3022
		LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = dtkdarkn END
			COPY_EXISTING ~bdscrl2a.itm~ ~override~
				WRITE_ASCII 0x3a dtkdarka
				LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 STR_VAR icon = dtkdarka END
				LPF ALTER_ITEM_HEADER INT_VAR header = 2 STR_VAR icon = dtkdarka END
				LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 STR_VAR resource = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 147 STR_VAR resource = EVAL ~%current_spell_res%~ END
				END	
		
ACTION_IF GAME_IS ~bgee~ BEGIN	// placing scrolls for BGEE
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl2a.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			END


//////////////////////////////////////////////////////			
/////////////////Faerie Fire//////////////////////////
//////////////////////////////////////////////////////
		
ACTION_IF GAME_IS ~bgee~ BEGIN //Modifies existing scroll and spell for BGEE

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@5066) STR_VAR bam_file = dtkfaerp RET icon END
	ADD_SPELL ~sod2bg2_iu/spl/dtkfaeri.spl~ 1 2 CLERIC_FAERIE_FIRE		//adding to different level to clear spell.ids reference - fixes priest spell table so they can use
	ADD_SPELL ~sod2bg2_iu/spl/dtkfaeri.spl~ 1 1 CLERIC_FAERIE_FIRE		//adding second time to restore correct level 
	LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkfaeri%" STR_VAR icon = dtkfaerb END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3023 // Spell Name
		SAY NAME2 @3023
		SAY UNIDENTIFIED_DESC @3024  // Spell description
		SAY DESC @3024
		WRITE_ASCII 0x3a dtkfaerc
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3023) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 206 STR_VAR resource = EVAL ~%current_spell_res%~ END
						LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
							COPY_EXISTING ~bdscrl1b.itm~ ~override~
								WRITE_ASCII 0x3a dtkfaera
								LPF ALTER_ITEM_HEADER INT_VAR header = 1 target = 4 range = 30 STR_VAR icon = dtkfaera END
								LPF ALTER_EFFECT INT_VAR match_opcode = 146 opcode = 148 target = 1 STR_VAR resource = EVAL ~%current_spell_res%~ END
								END	

ACTION_IF GAME_IS ~bgee~ BEGIN	// placing scrolls for BGEE
	COPY_EXISTING ~highhedg.sto~ ~override~	//High Hedge
	ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
		COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			COPY_EXISTING ~bdsorcsc.sto~ ~override~	//Sorcerous Sundries - SoD
			ADD_STORE_ITEM ~bdscrl1b.itm~ #0 #0 #0 ~IDENTIFIED~ #2			
			END
			
			
//////////////////////////		
//////////////////////////
//Adding New Spells //////
//////////////////////////
//////////////////////////

////////////////////////////////////////////
/////////////Grasping Shadows///////////////
////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_GRASPING_SHADOWS~) BEGIN

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3044) STR_VAR bam_file = dtkgshdp RET icon END	//grasping shadows
	ADD_SPELL ~sod2bg2_iu/spl/dtkgshd.spl~ 1 4 CLERIC_GRASPING_SHADOWS
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3044 // Spell Name
		SAY NAME2 @3044
		SAY UNIDENTIFIED_DESC @3045  // Spell description
		SAY DESC @3045
			COPY ~sod2bg2_iu/spl/dtkgshd2.spl~ ~override~	//second portion for visual effect
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd2%" END	
			SAY NAME1 @3044 // Spell Name
			SAY NAME2 @3044
			SAY UNIDENTIFIED_DESC @3045  // Spell description
			SAY DESC @3045
				COPY ~sod2bg2_iu/spl/dtkgshd.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3044 // Spell Name
				SAY NAME2 @3044
				SAY UNIDENTIFIED_DESC @3045  // Spell description
				SAY DESC @3045
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkgshd%" END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 102 parameter2 = icon END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@3044) END

END


///////////////////////////////////////////////////////////
/////////////////Caustic Quagmire//////////////////////////
///////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CAUSTIC_QUAGMIRE~) BEGIN

	LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3042) STR_VAR bam_file = dtkcqugp RET icon END
	ADD_SPELL ~sod2bg2_iu/spl/dtkcquag.spl~ 1 4 CLERIC_CAUSTIC_QUAGMIRE
	LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcquag%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3042 // Spell Name
		SAY NAME2 @3042
		SAY UNIDENTIFIED_DESC @3043  // Spell description
		SAY DESC @3043
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			COPY ~sod2bg2_iu/spl/dtkcqugx.spl~ ~override~
			SAY NAME1 @3042 // Spell Name
			SAY NAME2 @3042
			SAY UNIDENTIFIED_DESC @3043  // Spell description
			SAY DESC @3043
				COPY ~sod2bg2_iu/spl/dtkcqugy.spl~ ~override~
				SAY NAME1 @3042 // Spell Name
				SAY NAME2 @3042
				SAY UNIDENTIFIED_DESC @3043  // Spell description
				SAY DESC @3043
					COPY ~sod2bg2_iu/spl/dtkcqugz.spl~ ~override~
					LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcqug2%" END
					SAY NAME1 @3042 // Spell Name
					SAY NAME2 @3042
					SAY UNIDENTIFIED_DESC @3043  // Spell description
					SAY DESC @3043
						COPY ~sod2bg2_iu/spl/dtkcquag.spl~ ~override~		//second copy for item use, avoid conflicts and allows for variations
						LPF ALTER_SPELL_HEADER INT_VAR target = 4 projectile = EVAL "%dtkcquag%" END
						SAY NAME1 @3042 // Spell Name
						SAY NAME2 @3042
						SAY UNIDENTIFIED_DESC @3043  // Spell description
						SAY DESC @3043
						LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
	END

////////////////////////////////////////////
////////////Conjure Death///////////////////
////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CONJURE_DEATH~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcdea1.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtkcdea2.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtkcdea3.2da~ ~override~

  ADD_SPELL ~sod2bg2_iu/spl/dtkcdeat.spl~ 2 6 WIZARD_CONJURE_DEATH
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3002  // Spell Name
	SAY NAME2 @3002
	SAY UNIDENTIFIED_DESC @3003  // Spell description
	SAY DESC @3003
    END

COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcdeat.itm~
    SAY NAME2 @3002
    SAY DESC @3003
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 35 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

////////////////////////////////////////////		
/////////////Thunder Thrust/////////////////
////////////////////////////////////////////
		
ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_THUNDER_THRUST~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkthrst.spl~ 2 5 WIZARD_THUNDER_THRUST
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3005  // Spell Name
	SAY NAME2 @3005
	SAY UNIDENTIFIED_DESC @3006  // Spell description
	SAY DESC @3006
		COPY ~sod2bg2_iu/spl/dtkthrst.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3005  // Spell Name
			SAY NAME2 @3005
			SAY UNIDENTIFIED_DESC @3006  // Spell description
			SAY DESC @3006
    END
	
COPY ~sod2bg2_iu/spl/dtktrstx.spl~ ~override~	//Component needed for Thunder Thrust
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkthrs1%" END
COPY ~sod2bg2_iu/spl/dtktrsty.spl~ ~override~	//Component needed for Thunder Thrust
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkthrs2%" END
  
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkthrst.itm~
    SAY NAME2 @3005
    SAY DESC @3006
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 80 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 END

////////////////////////////////////////////////////
//////////////Trollkiller's Fireball////////////////
////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_TROLLKILLERS_FIREBALL~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkfball.spl~ 2 4 WIZARD_TROLLKILLERS_FIREBALL
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkfball%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3008  // Spell Name
	SAY NAME2 @3008
	SAY UNIDENTIFIED_DESC @3009  // Spell description
	SAY DESC @3009
    END
	
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4027) STR_VAR bam_file = dtkshrdd RET icon END
COPY ~sod2bg2_iu/spl/dtkfbal2.spl~ ~override~	//Trollkiller's Fireball - static charge
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4027) END
  
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkfball.itm~
    SAY NAME2 @3008
    SAY DESC @3009
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 40 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

////////////////////////////////////////
////////////Hoar of Frost///////////////
////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_HOAR_OF_FROST~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4001) STR_VAR bam_file = dtkfroze RET icon END
  ADD_SPELL ~sod2bg2_iu/spl/dtkhoarf.spl~ 1 7 CLERIC_HOAR_OF_FROST
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkhoar1%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3010  // Spell Name
	SAY NAME2 @3010
	SAY UNIDENTIFIED_DESC @3011  // Spell description
	SAY DESC @3011
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
		COPY ~sod2bg2_iu/spl/dtkhoarf.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkhoar1%" END
			SAY NAME1 @3010  // Spell Name
			SAY NAME2 @3010
			SAY UNIDENTIFIED_DESC @3011  // Spell description
			SAY DESC @3011
			LPF ALTER_EFFECT INT_VAR match_opcode = 12 match_parameter1 = 14 parameter1 = 0 dicenumber = 8 dicesize = 5 END
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
				
//////////////////////////different spell below to take advantage of pre-loaded new portrait icon that is shared so we dont have to add it twice
				COPY ~sod2bg2_iu/spl/dtkicel.spl~ ~override~
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkicel%" END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 205 parameter2 = icon END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4001) END
    END
	
  COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkhoarf.itm~
    SAY NAME2 @3010
    SAY DESC @3011
    LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 12 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END


///////////////////////////////////
////////Penetrating Cold///////////
///////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_PENETRATING_COLD~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkpenc.spl~ 1 7 CLERIC_PENETRATING_COLD
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3050  // Spell Name
	SAY NAME2 @3050
	SAY UNIDENTIFIED_DESC @3051  // Spell description
	SAY DESC @3051
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1266 parameter1 = RESOLVE_STR_REF(@4001) END
		  COPY ~sod2bg2_iu/spl/dtkpenc2.spl~ ~override~		
		  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc2%" END
			SAY NAME1 @3050  // Spell Name
			SAY NAME2 @3050
			SAY UNIDENTIFIED_DESC @3051  // Spell description
			SAY DESC @3051
				  COPY ~sod2bg2_iu/spl/dtkpenc3.spl~ ~override~	
				  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc3%" END
					SAY NAME1 @3050  // Spell Name
					SAY NAME2 @3050
					SAY UNIDENTIFIED_DESC @3051  // Spell description
					SAY DESC @3051

		COPY ~sod2bg2_iu/spl/dtkpenc.spl~ ~override~		//second copy for item use, prevents issues, allows for variances
		  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpenc%" END
		  	SAY NAME1 @3050  // Spell Name
			SAY NAME2 @3050
			SAY UNIDENTIFIED_DESC @3051  // Spell description
			SAY DESC @3051
				LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1266 parameter1 = RESOLVE_STR_REF(@4001) END
			
END


////////////////////////////
////////Corrosion///////////
////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CORROSION~) BEGIN
  LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4023) STR_VAR bam_file = dtkcorrp RET icon END
  ADD_SPELL ~sod2bg2_iu/spl/dtkcorro.spl~ 2 7 WIZARD_CORROSION
  LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcorro%" END
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3012  // Spell Name
	SAY NAME2 @3012
	SAY UNIDENTIFIED_DESC @3013  // Spell description
	SAY DESC @3013
    END
	
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcorro.itm~
    SAY NAME2 @3012
    SAY DESC @3013
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 10000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END

//////////////////////////////////////////////////////////////////
////////////////////////Infernal Bone Shield//////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_INFERNAL_BONE_SHIELD~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3029) STR_VAR bam_file = dtkdebnp RET icon END 
ADD_SPELL ~sod2bg2_iu/spl/dtkdebn.spl~ 2 4 WIZARD_INFERNAL_BONE_SHIELD	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3029
	SAY NAME2 @3029
	SAY UNIDENTIFIED_DESC @3030
	SAY DESC @3030
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
	END
		COPY ~sod2bg2_iu/spl/dtkdebnx.spl~ ~override~	
		SAY NAME1 @3029
		SAY NAME2 @3029
		SAY UNIDENTIFIED_DESC @3030
		SAY DESC @3030
			COPY ~sod2bg2_iu/spl/dtkdebn.spl~ ~override~	//second copy for item use, prevents issues
			SAY NAME1 @3029
			SAY NAME2 @3029
			SAY UNIDENTIFIED_DESC @3030
			SAY DESC @3030
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdebn.itm~
				SAY NAME2 @3029
				SAY DESC @3030
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 5 range = 40 price = 1700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 1 END

///////////////////////////////////////////////////////			
////////////////////////Fell Rage//////////////////////
///////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FELL_RAGE~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@3031) STR_VAR bam_file = dtkfergp RET icon END 
ADD_SPELL ~sod2bg2_iu/spl/dtkferg.spl~ 2 5 WIZARD_FELL_RAGE
	SPRINT current_spell_res "%DEST_RES%"	
  	SAY NAME1 @3031
	SAY NAME2 @3031
	SAY UNIDENTIFIED_DESC @3032
	SAY DESC @3032
		LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35544 parameter1 = RESOLVE_STR_REF(@4057) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 17392 parameter1 = RESOLVE_STR_REF(@4058) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37801 parameter1 = RESOLVE_STR_REF(@4059) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = RESOLVE_STR_REF(@4060) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = RESOLVE_STR_REF(@4061) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = RESOLVE_STR_REF(@4056) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = RESOLVE_STR_REF(@4018) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14043 parameter1 = RESOLVE_STR_REF(@4062) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 1280 parameter1 = RESOLVE_STR_REF(@4017) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37603 parameter1 = RESOLVE_STR_REF(@4063) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37604 parameter1 = RESOLVE_STR_REF(@4064) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 14102 parameter1 = RESOLVE_STR_REF(@4065) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = RESOLVE_STR_REF(@4066) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = RESOLVE_STR_REF(@4065) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 STR_VAR resource = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 33 STR_VAR resource = EVAL ~%current_spell_res%~ END
		END
			COPY ~sod2bg2_iu/spl/dtkferg.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3031
			SAY NAME2 @3031
			SAY UNIDENTIFIED_DESC @3032
			SAY DESC @3032
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
			LPF DELETE_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 END
				COPY ~sod2bg2_iu/spl/dtkferg.spl~ ~override/dtkferg2.spl~	//third copy for item use, prevents issues, allows for variances
				SAY NAME1 @3031
				SAY NAME2 @3031
				SAY UNIDENTIFIED_DESC @3032
				SAY DESC @3032
				LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				LPF DELETE_EFFECT INT_VAR match_opcode = 324 match_parameter2 = 50 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 3 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 328 match_parameter2 = 35 END
					COPY ~sod2bg2_iu/spl/dtkfergx.spl~ ~override~	//spell component required for melee hit effect
					SAY NAME1 @3031
					SAY NAME2 @3031
					SAY UNIDENTIFIED_DESC @3032
					SAY DESC @3032
						COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkferg.itm~
						SAY NAME2 @3031
						SAY DESC @3032
						LPF dtk_scroll INT_VAR opcode = 148 unusable0 = BIT2 + BIT7 +BIT9 + BIT10 + BIT11 + BIT12 +BIT14 + BIT17 + BIT20 + BIT21 + BIT22 + BIT29 + BIT30 unusable2 = BIT6 target_hdr = 1 range = 40 price = 1900 STR_VAR spell = EVAL ~%current_spell_res%~ END
						LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 2 END

///////////////////////////////////////////////////////////
//////////////////////Shadow Bolt\\\\\\\\\\\\\\\\\\\\\\\\\\
///////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SHADOW_BOLT~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtksblt.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtksblt2.pro~

  // ADD_PROJECTILE won't add multiple versions of the same projectile, but it's needed for this spell's special projectile chain - do it manually
  OUTER_FOR (index = (dtksblt2) ; index < (dtksblt2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtksblt2~
  
  END

  ADD_SPELL ~sod2bg2_iu/spl/dtksblt.spl~ 1 5 CLERIC_SHADOW_BOLT
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3033
	SAY NAME2 @3033
	SAY UNIDENTIFIED_DESC @3034
	SAY DESC @3034
		LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtksblt + 0) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtksblt + 1) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtksblt + 2) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtksblt + 3) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtksblt + 4) END
		LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtksblt + 4) END
			COPY ~sod2bg2_iu/spl/dtksblt.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3033
				SAY NAME2 @3033
				SAY UNIDENTIFIED_DESC @3034
				SAY DESC @3034
					LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtksblt + 0) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtksblt + 1) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtksblt + 2) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtksblt + 3) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtksblt + 4) END
					LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtksblt + 4) END
						COPY ~sod2bg2_iu/spl/dtksblt2.spl~ ~override~	//second spell component for area effect
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksbltx%" END
						SAY NAME1 @3033
						SAY NAME2 @3033
						SAY UNIDENTIFIED_DESC @3034
						SAY DESC @3034
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1100 parameter1 = RESOLVE_STR_REF(@4024) END
						LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 1110 parameter1 = RESOLVE_STR_REF(@4067) END

						
  COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtksblt.itm~
    SAY NAME2 @3033
    SAY DESC @3034
    LPF dtk_scroll INT_VAR opcode = 146 target_hdr = 1 range = 100 price = 1500 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 18 END
	
						
END



/////////////////////////////////////////////////////////////////////////
//////////////////////Ko'Dezza's Multi-Fireball\\\\\\\\\\\\\\\\\\\\\\\\\\
/////////////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_MULTI_FIREBALL~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfbl.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkdfbl2.pro~
  
  OUTER_FOR (index = (dtkdfbl2) ; index < (dtkdfbl2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtkdfbl2~
  
  END


  ADD_SPELL ~sod2bg2_iu/spl/dtkdfbl.spl~ 2 7 WIZARD_MULTI_FIREBALL
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3040
	SAY NAME2 @3040
	SAY UNIDENTIFIED_DESC @3041
	SAY DESC @3041
			LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkdfbl + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkdfbl + 1) END	//14
			LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkdfbl + 1) END	//15
			LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkdfbl + 1) END	//16
			LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkdfbl + 1) END	//17
			LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkdfbl + 2) END	//18
			LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkdfbl + 2) END	//19
			LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkdfbl + 2) END	//20
			LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkdfbl + 2) END	//21
			LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkdfbl + 3) END	//22
			LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkdfbl + 3) END	//23
			LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkdfbl + 3) END	//24
				COPY ~sod2bg2_iu/spl/dtkdfbl.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3040
					SAY NAME2 @3040
					SAY UNIDENTIFIED_DESC @3041
					SAY DESC @3041
						LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkdfbl + 0) END
						LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkdfbl + 1) END	//14
						LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkdfbl + 1) END	//15
						LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkdfbl + 1) END	//16
						LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkdfbl + 1) END	//17
						LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkdfbl + 2) END	//18
						LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkdfbl + 2) END	//19
						LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkdfbl + 2) END	//20
						LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkdfbl + 2) END	//21
						LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkdfbl + 3) END	//22
						LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkdfbl + 3) END	//23
						LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkdfbl + 3) END	//24
							COPY ~sod2bg2_iu/spl/dtkdfbl2.spl~ ~override~	//second spell component for area effect - required due to inability to have multiple area effect projectiles
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdfblx%" END
							SAY NAME1 @3040
							SAY NAME2 @3040
							SAY UNIDENTIFIED_DESC @3041
							SAY DESC @3041

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkdfbl.itm~
    SAY NAME2 @3040
    SAY DESC @3041
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 40 price = 12000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 14 END
		
END


//////////////////////////////////////////////////////////////////
//////////////////////Ko'Dezza's Slime Golem//////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_SLIME_GOLEM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkslig.spl~ 2 5 WIZARD_SLIME_GOLEM	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3046
	SAY NAME2 @3046
	SAY UNIDENTIFIED_DESC @3047
	SAY DESC @3047
		COPY ~sod2bg2_iu/spl/dtkslig.spl~ ~override~	//second copy for item use, prevents issues
		SAY NAME1 @3046
		SAY NAME2 @3046
		SAY UNIDENTIFIED_DESC @3047
		SAY DESC @3047
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkslig.itm~
				SAY NAME2 @3046
				SAY DESC @3047
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 100 price = 7700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


//////////////////////////////////////////////////////////////////
/////////////////////////////Cataclysm////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CATACLYSM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkcata.spl~ 2 8 WIZARD_CATACLYSM
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3048
	SAY NAME2 @3048
	SAY UNIDENTIFIED_DESC @3049
	SAY DESC @3049
		COPY ~sod2bg2_iu/spl/dtkcata.spl~ ~override~	//second copy for item use, prevents issues
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata%" END
		SAY NAME1 @3048
		SAY NAME2 @3048
		SAY UNIDENTIFIED_DESC @3049
		SAY DESC @3049
			COPY ~sod2bg2_iu/spl/dtkcata2.spl~ ~override~	//second spell component for visual effect
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcata2%" END
			SAY NAME1 @3048
			SAY NAME2 @3048
			SAY UNIDENTIFIED_DESC @3049
			SAY DESC @3049
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcata.itm~
				SAY NAME2 @3048
				SAY DESC @3049
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT0 target_hdr = 4 range = 100 price = 7700 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


//////////////////////////////////////////////////////////////////
/////////////////////////////Maelstrom////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_MAELSTROM~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkmael.spl~ 2 8 WIZARD_MAELSTROM
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkmael%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3052
	SAY NAME2 @3052
	SAY UNIDENTIFIED_DESC @3053
	SAY DESC @3053
	COPY ~sod2bg2_iu/spl/dtkmael2.spl~ ~override~	//secondary component 
		SAY NAME1 @3052
		SAY NAME2 @3052
		SAY UNIDENTIFIED_DESC @3053
		SAY DESC @3053
			COPY ~sod2bg2_iu/spl/dtkmael.spl~ ~override~	
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkmael%" END
			SAY NAME1 @3052
			SAY NAME2 @3052
			SAY UNIDENTIFIED_DESC @3053
			SAY DESC @3053
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkmael.itm~
				SAY NAME2 @3052
				SAY DESC @3053
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 100 price = 8900 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

///////////////////////////////////
////////Shar's Embrace/////////////
///////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SHAR_EMBRACE~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkeshr.spl~ 1 6 CLERIC_SHAR_EMBRACE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3056  // Spell Name
	SAY NAME2 @3056
	SAY UNIDENTIFIED_DESC @3057  // Spell description
	SAY DESC @3057
		COPY ~sod2bg2_iu/spl/dtkeshr2.spl~ ~override~		//secondary component
		SAY NAME1 @3056  // Spell Name
		SAY NAME2 @3056
		SAY UNIDENTIFIED_DESC @3057  // Spell description
		SAY DESC @3057
			COPY ~sod2bg2_iu/spl/dtkeshr3.spl~ ~override~		//tertiary component
			SAY NAME1 @3056  // Spell Name
			SAY NAME2 @3056
			SAY UNIDENTIFIED_DESC @3057  // Spell description
			SAY DESC @3057
				COPY ~sod2bg2_iu/spl/dtkeshr.spl~ ~override~		//secondary copy for item use, prevent's issues allows for variances
				SAY NAME1 @3056  // Spell Name
				SAY NAME2 @3056
				SAY UNIDENTIFIED_DESC @3057  // Spell description
				SAY DESC @3057
		
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Holocaust////////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_HOLOCAUST~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkholo.spl~ 2 8 WIZARD_HOLOCAUST
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkholo%" END	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3058
	SAY NAME2 @3058
	SAY UNIDENTIFIED_DESC @3059
	SAY DESC @3059
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 321 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkholo.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkholo%" END
		SAY NAME1 @3058
		SAY NAME2 @3058
		SAY UNIDENTIFIED_DESC @3059
		SAY DESC @3059
			COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkholo.itm~
			SAY NAME2 @3058
			SAY DESC @3059
			LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT1 target_hdr = 4 range = 100 price = 8666 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Ent Summoning////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_ENT_SUMMON~) BEGIN

COPY ~sod2bg2_iu/2da/dtktren1.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtktren2.2da~ ~override~
COPY ~sod2bg2_iu/2da/dtktren3.2da~ ~override~

ADD_SPELL ~sod2bg2_iu/spl/dtktren.spl~ 1 5 CLERIC_ENT_SUMMON
	  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3060
	SAY NAME2 @3060
	SAY UNIDENTIFIED_DESC @3061
	SAY DESC @3061
		COPY ~sod2bg2_iu/spl/dtktren.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		SAY NAME1 @3060
		SAY NAME2 @3060
		SAY UNIDENTIFIED_DESC @3061
		SAY DESC @3061
			COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtktren.itm~
			SAY NAME2 @3060
			SAY DESC @3061
			LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 2500 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END

//////////////////////////////////////////////////////////////////
/////////////////////////////Crushing Earth///////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CRUSHING_EARTH~) BEGIN

ADD_SPELL ~sod2bg2_iu/spl/dtkcrus.spl~ 1 6 CLERIC_CRUSHING_EARTH
LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcrus%" END
	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3062
	SAY NAME2 @3062
	SAY UNIDENTIFIED_DESC @3063
	SAY DESC @3063
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkcrus1.spl~ ~override~	//secondary component
		SAY NAME1 @3062
		SAY NAME2 @3062
		SAY UNIDENTIFIED_DESC @3063
		SAY DESC @3063
			COPY ~sod2bg2_iu/spl/dtkcrus2.spl~ ~override~	//tertiary component
			SAY NAME1 @3062
			SAY NAME2 @3062
			SAY UNIDENTIFIED_DESC @3063
			SAY DESC @3063
				COPY ~sod2bg2_iu/spl/dtkcrus.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkcrus%" END
				SAY NAME1 @3062
				SAY NAME2 @3062
				SAY UNIDENTIFIED_DESC @3063
				SAY DESC @3063
					COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkcrus.itm~
					SAY NAME2 @3062
					SAY DESC @3063
					LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 3500 STR_VAR spell = EVAL ~%current_spell_res%~ END
					LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
		END
		

//////////////////////////////////////////////////////////////////
///////////////////Ko'Dezza's Caustic Shell///////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_CAUSTIC_SHELL~) BEGIN

LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@5031) STR_VAR bam_file = dtkcausp RET icon END
ADD_SPELL ~sod2bg2_iu/spl/dtkcaus.spl~ 2 3 WIZARD_CAUSTIC_SHELL	
  	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3064
	SAY NAME2 @3064
	SAY UNIDENTIFIED_DESC @3065
	SAY DESC @3065
	LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
		COPY ~sod2bg2_iu/spl/dtkcaus2.spl~ ~override~	//secondary component
		SAY NAME1 @3064
		SAY NAME2 @3064
		SAY UNIDENTIFIED_DESC @3065
		SAY DESC @3065
			COPY ~sod2bg2_iu/spl/dtkcaus.spl~ ~override~	//second copy for item use, prevents issues
			SAY NAME1 @3064
			SAY NAME2 @3064
			SAY UNIDENTIFIED_DESC @3065
			SAY DESC @3065
			LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
				COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkcaus.itm~
				SAY NAME2 @3064
				SAY DESC @3065
				LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 5 range = 40 price = 1337 STR_VAR spell = EVAL ~%current_spell_res%~ END
				LPF ALTER_EFFECT INT_VAR match_opcode = 148 opcode = 146 target = 1 END		
				
END

//////////////////////////////////////////////////////////////////
/////////////////////////Antipode/////////////////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_ANTIPODE~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkanti1.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkanti2.pro~
  

  ADD_SPELL ~sod2bg2_iu/spl/dtkanti.spl~ 2 6 WIZARD_ANTIPODE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3066
	SAY NAME2 @3066
	SAY UNIDENTIFIED_DESC @3067
	SAY DESC @3067
	LPF ALTER_SPELL_HEADER INT_VAR projectile = (dtkanti1 + 1) END
				COPY ~sod2bg2_iu/spl/dtkanti.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3066
					SAY NAME2 @3066
					SAY UNIDENTIFIED_DESC @3067
					SAY DESC @3067
					LPF ALTER_SPELL_HEADER INT_VAR projectile = (dtkanti1 + 1) END
							COPY ~sod2bg2_iu/spl/dtkanti2.spl~ ~override~	//second spell component for area effect - required due to inability to have multiple area effect projectiles
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkantix%" END
							SAY NAME1 @3066
							SAY NAME2 @3066
							SAY UNIDENTIFIED_DESC @3067
							SAY DESC @3067

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkanti.itm~
    SAY NAME2 @3066
    SAY DESC @3067
    LPF dtk_scroll INT_VAR opcode = 146 unusable1 = BIT1 target_hdr = 1 range = 40 price = 12000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 target = 2 parameter1 = 16 END
		
END


//////////////////////////////////////////////////////////////////
/////////////////////////Flame Vortice////////////////////////////
//////////////////////////////////////////////////////////////////		


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FLAME_VORTICE~) BEGIN

  ADD_SPELL ~sod2bg2_iu/spl/dtkfwhi.spl~ 2 6 WIZARD_FLAME_VORTICE
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3068
	SAY NAME2 @3068
	SAY UNIDENTIFIED_DESC @3069
	SAY DESC @3069
	LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkfwhi END
	LPF ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
	LPF ALTER_EFFECT INT_VAR match_opcode = 206 STR_VAR resource = EVAL ~%current_spell_res%~ END
				COPY ~sod2bg2_iu/spl/dtkfwhi.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
					SAY NAME1 @3068
					SAY NAME2 @3068
					SAY UNIDENTIFIED_DESC @3069
					SAY DESC @3069
					LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkfwhi END

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkfwhi.itm~
    SAY NAME2 @3068
    SAY DESC @3069
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 6000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 parameter1 = 16 END
		
END


/////////////////////////////////////////////////////////////////////////
//////////////////////Sundering Vitriol\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
/////////////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_SUNDERING_VITRIOL~) BEGIN

  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvit.pro~
  ADD_PROJECTILE ~sod2bg2_iu/pro/dtkvit2.pro~
  
  OUTER_FOR (index = (dtkvit2) ; index < (dtkvit2 + 10) ; ++index) BEGIN
  
    APPEND ~projectl.ids~ ~%index% dtkvit2~
  
  END


  ADD_SPELL ~sod2bg2_iu/spl/dtkvit.spl~ 1 2 CLERIC_SUNDERING_VITRIOL
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3070
	SAY NAME2 @3070
	SAY UNIDENTIFIED_DESC @3071
	SAY DESC @3071
			LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkvit + 0) END
			LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkvit + 1) END	//6
			LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkvit + 1) END	//7
			LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkvit + 1) END	//8
			LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkvit + 1) END	//9
			LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkvit + 2) END	//10
			LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkvit + 2) END	//11
			LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkvit + 2) END	//12
			LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkvit + 2) END	//13
			LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkvit + 3) END	//14
			LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkvit + 3) END	//15
			LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkvit + 3) END	//16
			LPF ALTER_SPELL_HEADER INT_VAR header = 15 projectile = (dtkvit + 4) END	//17
			LPF ALTER_SPELL_HEADER INT_VAR header = 16 projectile = (dtkvit + 4) END	//18
			LPF ALTER_SPELL_HEADER INT_VAR header = 17 projectile = (dtkvit + 4) END	//19
			LPF ALTER_SPELL_HEADER INT_VAR header = 18 projectile = (dtkvit + 5) END	//20
			LPF ALTER_SPELL_HEADER INT_VAR header = 19 projectile = (dtkvit + 5) END	//21
			LPF ALTER_SPELL_HEADER INT_VAR header = 20 projectile = (dtkvit + 5) END	//22
			LPF ALTER_SPELL_HEADER INT_VAR header = 21 projectile = (dtkvit + 6) END	//23
			LPF ALTER_SPELL_HEADER INT_VAR header = 22 projectile = (dtkvit + 6) END	//24
			LPF ALTER_SPELL_HEADER INT_VAR header = 23 projectile = (dtkvit + 6) END	//25
				LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
					COPY ~sod2bg2_iu/spl/dtkvit.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
						SAY NAME1 @3070
						SAY NAME2 @3070
						SAY UNIDENTIFIED_DESC @3071
						SAY DESC @3071
							LPF ALTER_SPELL_HEADER INT_VAR header =  1 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  2 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  3 projectile = (dtkvit + 0) END
							LPF ALTER_SPELL_HEADER INT_VAR header =  4 projectile = (dtkvit + 1) END	//6
							LPF ALTER_SPELL_HEADER INT_VAR header =  5 projectile = (dtkvit + 1) END	//7
							LPF ALTER_SPELL_HEADER INT_VAR header =  6 projectile = (dtkvit + 1) END	//8
							LPF ALTER_SPELL_HEADER INT_VAR header =  7 projectile = (dtkvit + 1) END	//9
							LPF ALTER_SPELL_HEADER INT_VAR header =  8 projectile = (dtkvit + 2) END	//10
							LPF ALTER_SPELL_HEADER INT_VAR header =  9 projectile = (dtkvit + 2) END	//11
							LPF ALTER_SPELL_HEADER INT_VAR header = 10 projectile = (dtkvit + 2) END	//12
							LPF ALTER_SPELL_HEADER INT_VAR header = 11 projectile = (dtkvit + 2) END	//13
							LPF ALTER_SPELL_HEADER INT_VAR header = 12 projectile = (dtkvit + 3) END	//14
							LPF ALTER_SPELL_HEADER INT_VAR header = 13 projectile = (dtkvit + 3) END	//15
							LPF ALTER_SPELL_HEADER INT_VAR header = 14 projectile = (dtkvit + 3) END	//16
							LPF ALTER_SPELL_HEADER INT_VAR header = 15 projectile = (dtkvit + 4) END	//17
							LPF ALTER_SPELL_HEADER INT_VAR header = 16 projectile = (dtkvit + 4) END	//18
							LPF ALTER_SPELL_HEADER INT_VAR header = 17 projectile = (dtkvit + 4) END	//19
							LPF ALTER_SPELL_HEADER INT_VAR header = 18 projectile = (dtkvit + 5) END	//20
							LPF ALTER_SPELL_HEADER INT_VAR header = 19 projectile = (dtkvit + 5) END	//21
							LPF ALTER_SPELL_HEADER INT_VAR header = 20 projectile = (dtkvit + 5) END	//22
							LPF ALTER_SPELL_HEADER INT_VAR header = 21 projectile = (dtkvit + 6) END	//23
							LPF ALTER_SPELL_HEADER INT_VAR header = 22 projectile = (dtkvit + 6) END	//24
							LPF ALTER_SPELL_HEADER INT_VAR header = 23 projectile = (dtkvit + 6) END	//25
	
END


////////////////////////////////////////////////////////////////
///////////////////////Devouring Darkness///////////////////////
////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_DEVOURING_DARKNESS~) BEGIN   //remarked out as this spell is intended to be exclusive to Viconia

	ADD_SPELL ~sod2bg2_iu/spl/dtkdevd.spl~ 1 7 CLERIC_DEVOURING_DARKNESS
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdevd%" END
		SPRINT current_spell_res "%DEST_RES%"
		SAY NAME1 @3072 // Spell Name
		SAY NAME2 @3072
		SAY UNIDENTIFIED_DESC @3073  // Spell description
		SAY DESC @3073
			LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 30 parameter1 = RESOLVE_STR_REF(@4065) END
			LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 0 parameter1 = RESOLVE_STR_REF(@4068) END
				COPY ~sod2bg2_iu/spl/dtkdevd.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
				SAY NAME1 @3072
				SAY NAME2 @3072
				SAY UNIDENTIFIED_DESC @3073
				SAY DESC @3073
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkdevd%" END
					LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 30 parameter1 = RESOLVE_STR_REF(@4065) END
					LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_duration = 0 parameter1 = RESOLVE_STR_REF(@4068) END	

		END 
		


////////////////////////////////////////////////////////////////
////////////////Ko'Dezza's Frozen Death/////////////////////////
////////////////////////////////////////////////////////////////


ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_FROZEN_DEATH~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcosh.2da~ ~override~

  ADD_SPELL ~sod2bg2_iu/spl/dtkkfrz.spl~ 2 9 WIZARD_FROZEN_DEATH
    SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3074
	SAY NAME2 @3074
	SAY UNIDENTIFIED_DESC @3075
	SAY DESC @3075
	LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkkfrz END
	LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%current_spell_res%~ END
		COPY ~sod2bg2_iu/spl/dtkkfrz.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
			SAY NAME1 @3074
			SAY NAME2 @3074
			SAY UNIDENTIFIED_DESC @3075
			SAY DESC @3075
			LPF ALTER_SPELL_HEADER INT_VAR projectile = dtkkfrz END

		
  COPY ~sod2bg2_iu/itm/scrolls/blank.itm~ ~override/dtkkfrz.itm~
    SAY NAME2 @3074
    SAY DESC @3075
    LPF dtk_scroll INT_VAR opcode = 148 unusable1 = BIT2 target_hdr = 4 range = 40 price = 25000 STR_VAR spell = EVAL ~%current_spell_res%~ END
		LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 parameter1 = 16 END
		
END


//////////////////////////////////////////////////////////////////
//////////////////Conjure Shadow Elemental////////////////////////
//////////////////////////////////////////////////////////////////

ACTION_IF !FILE_CONTAINS_EVALUATED(~spell.ids~ ~CLERIC_CONJURE_SHADOW_ELEMENTAL~) BEGIN

COPY ~sod2bg2_iu/2da/dtkcosh.2da~ ~override~


ADD_SPELL ~sod2bg2_iu/spl/dtkcosh.spl~ 1 6 CLERIC_CONJURE_SHADOW_ELEMENTAL
	SPRINT current_spell_res "%DEST_RES%"
	SAY NAME1 @3076
	SAY NAME2 @3076
	SAY UNIDENTIFIED_DESC @3077
	SAY DESC @3077
		COPY ~sod2bg2_iu/spl/dtkcosh.spl~ ~override~	//second copy for item use, prevents issues, allows for variances
		SAY NAME1 @3076
		SAY NAME2 @3076
		SAY UNIDENTIFIED_DESC @3077
		SAY DESC @3077
			COPY ~sod2bg2_iu/itm/scrolls/blankpr.itm~ ~override/dtkcosh.itm~
			SAY NAME2 @3076
			SAY DESC @3077
			LPF dtk_scroll INT_VAR opcode = 148 target_hdr = 4 range = 100 price = 3500 STR_VAR spell = EVAL ~%current_spell_res%~ END
			LPF ALTER_EFFECT INT_VAR match_opcode = 148 target = 1 END
END


		
////////////////////////////////
//Adding New Spell Scoll  //////
////////////////////////////////
  
COPY ~sod2bg2_iu/itm/scrolls/dtkascrl.itm~ ~override~ 
  SAY NAME1 @3004
  SAY NAME2 @3004
  SAY UNIDENTIFIED_DESC @3007
  SAY DESC @3007			


////////////////////////////////////////
//creating new random treasure entries//
////////////////////////////////////////


COPY - ~sod2bg2_iu/2da/rndtres.2da~ ~sod2bg2_iu/2da/rndtres.2da~
  READ_2DA_ENTRIES_NOW r2en_rndtres 1

COPY_EXISTING ~rndtres.2da~ ~override~
  COUNT_2DA_COLS num_cols
  COUNT_2DA_ROWS num_cols num_rows
  FOR (row = 0; row < r2en_rndtres; row += 1) BEGIN
    READ_2DA_ENTRY_FORMER r2en_rndtres row 0 item
    READ_2DA_ENTRY_FORMER r2en_rndtres row 1 tres1
    READ_2DA_ENTRY_FORMER r2en_rndtres row 2 tres2
    READ_2DA_ENTRY_FORMER r2en_rndtres row 3 tres3
	READ_2DA_ENTRY_FORMER r2en_rndtres row 4 tres4
    READ_2DA_ENTRY_FORMER r2en_rndtres row 5 tres5
    READ_2DA_ENTRY_FORMER r2en_rndtres row 6 tres6
    READ_2DA_ENTRY_FORMER r2en_rndtres row 7 tres7
    READ_2DA_ENTRY_FORMER r2en_rndtres row 8 tres8
    READ_2DA_ENTRY_FORMER r2en_rndtres row 9 tres9
    READ_2DA_ENTRY_FORMER r2en_rndtres row 10 tres10
    READ_2DA_ENTRY_FORMER r2en_rndtres row 11 tres11
    READ_2DA_ENTRY_FORMER r2en_rndtres row 12 tres12
    READ_2DA_ENTRY_FORMER r2en_rndtres row 13 tres13
    READ_2DA_ENTRY_FORMER r2en_rndtres row 14 tres14
    READ_2DA_ENTRY_FORMER r2en_rndtres row 15 tres15
    READ_2DA_ENTRY_FORMER r2en_rndtres row 16 tres16
    READ_2DA_ENTRY_FORMER r2en_rndtres row 17 tres17
    READ_2DA_ENTRY_FORMER r2en_rndtres row 18 tres18
    READ_2DA_ENTRY_FORMER r2en_rndtres row 19 tres19
    READ_2DA_ENTRY_FORMER r2en_rndtres row 20 tres20
	READ_2DA_ENTRY_FORMER r2en_rndtres row 21 tres21
	READ_2DA_ENTRY_FORMER r2en_rndtres row 22 tres22
	READ_2DA_ENTRY_FORMER r2en_rndtres row 23 tres23
	READ_2DA_ENTRY_FORMER r2en_rndtres row 24 tres24
	READ_2DA_ENTRY_FORMER r2en_rndtres row 25 tres25
	READ_2DA_ENTRY_FORMER r2en_rndtres row 26 tres26
	READ_2DA_ENTRY_FORMER r2en_rndtres row 27 tres27
	READ_2DA_ENTRY_FORMER r2en_rndtres row 28 tres28
	READ_2DA_ENTRY_FORMER r2en_rndtres row 29 tres29
	READ_2DA_ENTRY_FORMER r2en_rndtres row 30 tres30
	READ_2DA_ENTRY_FORMER r2en_rndtres row 31 tres31
	READ_2DA_ENTRY_FORMER r2en_rndtres row 32 tres32
	READ_2DA_ENTRY_FORMER r2en_rndtres row 33 tres33
	READ_2DA_ENTRY_FORMER r2en_rndtres row 34 tres34
	READ_2DA_ENTRY_FORMER r2en_rndtres row 35 tres35
	READ_2DA_ENTRY_FORMER r2en_rndtres row 36 tres36
	READ_2DA_ENTRY_FORMER r2en_rndtres row 37 tres37
	READ_2DA_ENTRY_FORMER r2en_rndtres row 38 tres38
	READ_2DA_ENTRY_FORMER r2en_rndtres row 39 tres39
	READ_2DA_ENTRY_FORMER r2en_rndtres row 40 tres40
    INSERT_2DA_ROW num_rows num_cols ~%item%  %tres1%  %tres2%  %tres3%  %tres4%  %tres5%  %tres6%  %tres7%  %tres8%  %tres9%  %tres10%  %tres11%  %tres12%  %tres13%  %tres14%  %tres15%  %tres16%  %tres17%  %tres18%  %tres19%  %tres20%  %tres21%  %tres22%  %tres23%  %tres24%  %tres25%  %tres26%  %tres27%  %tres28%  %tres29%  %tres30%  %tres31%  %tres32%  %tres33%  %tres34%  %tres35%  %tres36%  %tres37%  %tres38%  %tres39%  %tres40%~
    SET num_rows += 1
		PRETTY_PRINT_2DA
  END
  BUT_ONLY					   



////////////////////////////////////////////////////////////////////////
////////////////Adding new spells and IWD items/////////////////////////
////////////////////////////////////////////////////////////////////////


/////////////////////////////
//Adding IWD items///////////
/////////////////////////////

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandmis.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandmis.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandmis.itm~ ~override~	//Pemby's Wand of Many Missiles
  SAY NAME1 @2455	
  SAY NAME2 @2456
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2458
  WRITE_ASCII 0x58 dtkcwan1
  WRITE_BYTE 0x94 50
  LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
  END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandarm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandarm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandarm.itm~ ~override~	//Wand of Armory
  SAY NAME1 @2455	
  SAY NAME2 @2459
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2460
  WRITE_ASCII 0x58 dtkcwan2
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~wandtrp.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwandtrp.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/wav/#eff_p03.wav~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/wandtrp.itm~ ~override~	//Wand of Trap Detection
  SAY NAME1 @2455	
  SAY NAME2 @2461
  SAY UNIDENTIFIED_DESC @2457
  SAY DESC @2462
  WRITE_ASCII 0x58 dtkcwan3
  WRITE_BYTE 0x94 50
  LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~sash.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/isash.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/sash.itm~ ~override~	//Shimmering Sash
  SAY NAME1 @2463	
  SAY NAME2 @2464
  SAY UNIDENTIFIED_DESC @2465
  SAY DESC @2466
  WRITE_ASCII 0x58 dtkcsash
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~vexed3.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ivexed.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/seeall.itm~ ~override~
COPY_EXISTING ~bl3-12m4.itm~ ~override~
	WRITE_ASCII 0x76 imisc72
COPY ~sod2bg2_iu/iwdresource/cre/vexing3.cre~ ~override~	//Chalimandren
	SAY NAME1 @7005
	SAY NAME2 @7005
		COMPILE ~sod2bg2_iu/iwdresource/baf/bavex3.baf~ // Script for Chalimandren
COPY ~sod2bg2_iu/iwdresource/itm/vexed3.itm~ ~override~	//Vexed Armor
  SAY NAME1 @2467	
  SAY NAME2 @2468
  SAY UNIDENTIFIED_DESC @2469
  SAY DESC @2470
  WRITE_ASCII 0x58 dtkcvexd
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohbrac01.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/eff/ohbrac01.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohbrac01.itm~ ~override~	//The Flaming Fists of Lin Mei
  SAY NAME1 @2471	
  SAY NAME2 @2472
  SAY UNIDENTIFIED_DESC @2473
  SAY DESC @2474
  WRITE_ASCII 0x58 pbrac26
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohbrac02.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/spl/ohbrac02.spl~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohbrac02.itm~ ~override~	//Sarutobi's Stone Breakers
  SAY NAME1 @2471	
  SAY NAME2 @2475
  SAY UNIDENTIFIED_DESC @2473
  SAY DESC @2476
  WRITE_ASCII 0x58 pbrac22
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~amulbro.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iamulbro.bam~ ~override~
COPY ~sod2bg2_iu/sodresource/bam/bdcamul4.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/amulbro.itm~ ~override~	//Clasp of Bron's Cloak
  SAY NAME1 @2477	
  SAY NAME2 @2478
  SAY UNIDENTIFIED_DESC @2479
  SAY DESC @2480
  WRITE_ASCII 0x58 bdcamul4
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~kossuth.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ikoss.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/kossuth.itm~ ~override~	//Kossuth's Blood
  SAY NAME1 @2477	
  SAY NAME2 @2481
  SAY UNIDENTIFIED_DESC @2479
  SAY DESC @2482
  WRITE_ASCII 0x58 1cband06
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ogi.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iogi.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ogi.itm~ ~override~	//Ogi-Luc's Great Robe
  SAY NAME1 @2483	
  SAY NAME2 @2484
  SAY UNIDENTIFIED_DESC @2485
  SAY DESC @2486
  WRITE_ASCII 0x58 cclck12
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~usltr3a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/usltr3a.itm~ ~override~	//Shadowed Studded Leather +2
  SAY NAME1 @2487	
  SAY NAME2 @2488
  SAY UNIDENTIFIED_DESC @2489
  SAY DESC @2490
  WRITE_ASCII 0x3a ileat15
  WRITE_ASCII 0x58 cleat15
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 22 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 114 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 27 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u1hax3a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/u1hax3a.itm~ ~override~	//Poisonous Battle Axe +2
  SAY NAME1 @2491	
  SAY NAME2 @2492
  SAY UNIDENTIFIED_DESC @2493
  SAY DESC @2494
  WRITE_ASCII 0x58 cax1h01
  WRITE_LONG 0x98 (BIT0)
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4013) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u1hax2a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/u1hax2a.itm~ ~override~	//Charged Battle Axe +2
  SAY NAME1 @2491	
  SAY NAME2 @2495
  SAY UNIDENTIFIED_DESC @2493
  SAY DESC @2496
  WRITE_ASCII 0x58 cax1h01
  WRITE_LONG 0x98 (BIT0)
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4017) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bootfox.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibootfox.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bootfox.itm~ ~override~	//Boots of the Fox
  SAY NAME1 @2011	
  SAY NAME2 @2497
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2499
  WRITE_ASCII 0x58 cboot06
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bootfor.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibootfor.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bootfor.itm~ ~override~	//Boots of the Forgotten Ones
  SAY NAME1 @2011	
  SAY NAME2 @2500
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2501
  WRITE_ASCII 0x58 cboot04
  WRITE_LONG 0x1e (BIT6 + BIT11 + BIT13 + BIT16 + BIT17 + BIT18 + BIT19 + BIT22 + BIT29)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~shboots.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/shboots.itm~ ~override~	//Shadowed Boots
  SAY NAME1 @2011	
  SAY NAME2 @2502
  SAY UNIDENTIFIED_DESC @2498
  SAY DESC @2503
  WRITE_ASCII 0x58 cboot05
  WRITE_LONG 0x1e (BIT6 + BIT7 + BIT8 + BIT11 + BIT12 + BIT13 + BIT14 + BIT15 + BIT18 + BIT20)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bowmess.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibowmess.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bowmess.itm~ ~override~	//Messenger of Sseth
  SAY NAME1 @2504	
  SAY NAME2 @2505
  SAY UNIDENTIFIED_DESC @2506
  SAY DESC @2507
  WRITE_ASCII 0x58 cbow17
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~glimglm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iglimglm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/glimglm.itm~ ~override~	//Glimglam's Cloak +1
  SAY NAME1 @2508	
  SAY NAME2 @2509
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2511
  WRITE_ASCII 0x58 ohhcclk
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cloaksc.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/icloaksc.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cloaksc.itm~ ~override~	//Cloak of Scintillating Colors
  SAY NAME1 @2508	
  SAY NAME2 @2512
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2513
  WRITE_ASCII 0x58 ohrcclk3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdwuff.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdwuff.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdwuff.itm~ ~override~	//Cloak of the Winter Wolf
  SAY NAME1 @2508	
  SAY NAME2 @2514
  SAY UNIDENTIFIED_DESC @2510
  SAY DESC @2515
  WRITE_ASCII 0x58 dtkcwuff
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~auril.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iauril.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/auril.itm~ ~override~	//Breath of Auril +3
  SAY NAME1 @2516	
  SAY NAME2 @2517
  SAY UNIDENTIFIED_DESC @2518
  SAY DESC @2519
  WRITE_ASCII 0x58 cdagg17
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~gauntem.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/igauntem.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/gauntem.itm~ ~override~	//Gauntlets of Elven Might
  SAY NAME1 @2520	
  SAY NAME2 @2521
  SAY UNIDENTIFIED_DESC @2522
  SAY DESC @2523
  WRITE_ASCII 0x58 cbrac18
  WRITE_LONG 0x1e (BIT18)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohioun03.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ohioun03.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohioun03.itm~ ~override~	//Clear Ioun Stone
  SAY NAME1 @2524	
  SAY NAME2 @2525
  SAY UNIDENTIFIED_DESC @2526
  SAY DESC @2527
  WRITE_ASCII 0x58 chelm20
  WRITE_SHORT 0x1c 72
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ohioun02.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ohioun02.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ohioun02.itm~ ~override~	//Scarlet/Blue Ioun Stone
  SAY NAME1 @2524	
  SAY NAME2 @2528
  SAY UNIDENTIFIED_DESC @2526
  SAY DESC @2529
  WRITE_ASCII 0x58 phelm23
  WRITE_SHORT 0x1c 72
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~u2ham5a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/imaul.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/u2ham5a.itm~ ~override~	//Demon's Breath +3
  SAY NAME1 @2530	
  SAY NAME2 @2531
  SAY UNIDENTIFIED_DESC @2532
  SAY DESC @2533
  WRITE_ASCII 0x58 chamm09
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~uhalb4a.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ihalb02.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/uhalb4a.itm~ ~override~	//Doom Halberd +3
  SAY NAME1 @2534	
  SAY NAME2 @2535
  SAY UNIDENTIFIED_DESC @2536
  SAY DESC @2537
  WRITE_ASCII 0x58 chalb03
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~whtash.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/iwhtash.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/whtash.itm~ ~override~	//The Spear of White Ash +3
  SAY NAME1 @2538	
  SAY NAME2 @2539
  SAY UNIDENTIFIED_DESC @2540
  SAY DESC @2541
  WRITE_ASCII 0x58 csper03
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ubswd4b.itm~ BEGIN // check if already present to prevent conflicts
LAF dtk_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@4044) STR_VAR bam_file = dtkphase RET icon END
COPY ~sod2bg2_iu/iwdresource/eff/phased.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/ubswd4b.itm~ ~override~	//Bastard Sword of Greater Phasing +3
  SAY NAME1 @2542	
  SAY NAME2 @2543
  SAY UNIDENTIFIED_DESC @2544
  SAY DESC @2545
  WRITE_ASCII 0x58 csw1h03
  WRITE_LONG 0x98 (BIT0)
    LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4044) END
	  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = icon END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~tongue.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/itongue.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/tongue.itm~ ~override~	//The Salamander's Tongue +3
  SAY NAME1 @2546
  SAY NAME2 @2547
  SAY UNIDENTIFIED_DESC @2548
  SAY DESC @2549
  WRITE_ASCII 0x58 cdagg13
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzm5mh.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/izzm5mh.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzm5mhh.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzm5mhd.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/zzm5mh.itm~ ~override~	//Misery's Herald +3
  SAY NAME1 @2550
  SAY NAME2 @2551
  SAY UNIDENTIFIED_DESC @2552
  SAY DESC @2553
  WRITE_ASCII 0x58 cblun03
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bess.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ibess.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/bess.itm~ ~override~	//The Love of Black Bess +3
  SAY NAME1 @2554
  SAY NAME2 @2555
  SAY UNIDENTIFIED_DESC @2556
  SAY DESC @2557
  WRITE_ASCII 0x58 cblun04
  WRITE_LONG 0x98 (BIT0)
END

ACTION_IF NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 bgee iwd2 pst pstee~ BEGIN	//sw1h45 exists as a different item in EET and BG2, this is used instead of file name check to counter it
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~idpro237.pro~ BEGIN // check if already present
	ADD_PROJECTILE ~sod2bg2_iu/iwdresource/pro/idpro237.pro~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~curseh.vvc~ BEGIN // check if already present
		COPY ~sod2bg2_iu/iwdresource/vvc/curseh.vvc~ ~override~
		COPY ~sod2bg2_iu/iwdresource/bam/area1x.bam~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_p99.wav~ BEGIN // check if already present
			COPY ~sod2bg2_iu/iwdresource/wav/#eff_p99.wav~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~#bless.vvc~ BEGIN // check if already present
				COPY ~sod2bg2_iu/iwdresource/vvc/#bless.vvc~ ~override~
				COPY ~sod2bg2_iu/iwdresource/bam/curseh.bam~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_p32.wav~ BEGIN // check if already present
					COPY ~sod2bg2_iu/iwdresource/wav/#eff_p32.wav~ ~override~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~#eff_e04.wav~ BEGIN // check if already present
						COPY ~sod2bg2_iu/iwdresource/wav/#eff_e04.wav~ ~override~
						END
							COPY ~sod2bg2_iu/iwdresource/spl/sppr112.spl~ ~override/dtkdglor.spl~	//Darkend Glory +2
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%idpro237%" STR_VAR icon = dtkcursb END
							SAY NAME1 @3027 // Spell Name
							SAY NAME2 @3027
							SAY UNIDENTIFIED_DESC @3028  // Spell description
							SAY DESC @3028
							WRITE_ASCII 0x3a dtkcursc
							LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4045) END
								COPY ~sod2bg2_iu/iwdresource/itm/sw1h45.itm~ ~override/dtkdglor.itm~	//Darkened Glory +2 - file name changed to avoid conflicts
								  SAY NAME1 @2558
								  SAY NAME2 @2559
								  SAY UNIDENTIFIED_DESC @2560
								  SAY DESC @2561
								  WRITE_ASCII 0x58 csw1h49
								  WRITE_ASCII 0x3a dtkdglor
								  WRITE_ASCII 0x76 dtkdglor
								  WRITE_LONG 0x98 (BIT0)
								  LPF ALTER_EFFECT INT_VAR match_opcode = 341 STR_VAR resource = dtkdglor END									
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~lucky.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ilucky.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/lucky.itm~ ~override/dtklucky.itm~	//The Lucky Scimitar +2 / Changed to +3
  SAY NAME1 @2562
  SAY NAME2 @2563
  SAY UNIDENTIFIED_DESC @2564
  SAY DESC @2565
  WRITE_ASCII 0x58 csw1h15
  WRITE_LONG 0x98 (BIT0)
  WRITE_LONG 0x60 3
  WRITE_BYTE 0x86 3
  WRITE_BYTE 0x8c 3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzs6sc.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/izzs6sc.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzs6sch.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/eff/zzs6scd.eff~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/zzs6sc.itm~ ~override/dtkespid.itm~	//Evil Spider Crusher of Doom +2 / Changed to +3
  SAY NAME1 @2566
  SAY NAME2 @2567
  SAY UNIDENTIFIED_DESC @2568
  SAY DESC @2569
  WRITE_ASCII 0x58 cblun15
  WRITE_LONG 0x98 (BIT0)
  WRITE_LONG 0x60 3
  WRITE_BYTE 0x86 3
  WRITE_BYTE 0x8c 3
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~helmdef.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/itm/helmdef.itm~ ~override~	//Helm of the Trusted Defender
  SAY NAME1 @2570	
  SAY NAME2 @2571
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2573
  WRITE_ASCII 0x58 chelm07
  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = RESOLVE_STR_REF(@4056) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = RESOLVE_STR_REF(@4018) END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdrem.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdrem.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/bam/cdremg.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdrem.itm~ ~override~	//Remorhaz Shell
  SAY NAME1 @2574	
  SAY NAME2 @2574
  SAY UNIDENTIFIED_DESC @2575
  SAY DESC @2575
  WRITE_ASCII 0x58 cmisc12
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~cdrelm.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/cdrelm.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override~	//Remorhaz Shell Helm
  SAY NAME1 @2570	
  SAY NAME2 @2576
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2577
  WRITE_ASCII 0x58 chelm01
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
	  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh1.itm~	//Remorhaz Shell Helm - cirlet variant
	  WRITE_ASCII 0x22 JB
	  WRITE_LONG 0x1e 0
	  SAY NAME1 @2404	
	  SAY NAME2 @2578
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2579
	  WRITE_ASCII 0x58 cmiscaa
	  WRITE_ASCII 0x3a dtkremh1
	  WRITE_SHORT 0x4c 5
	  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 parameter2 = 52 END
		  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh2.itm~	//Remorhaz Shell Helm - dragon-horned variant1
		  WRITE_ASCII 0x22 H1
		  SAY NAME1 @2570	
		  SAY NAME2 @2576
		  SAY UNIDENTIFIED_DESC @2572
		  SAY DESC @2577
		  WRITE_ASCII 0x58 chelm02
		  WRITE_ASCII 0x3a dtkremh2
		  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
		  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
		  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 50 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
		  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
			  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh3.itm~	//Remorhaz Shell Helm - dragon-winged variant
			  WRITE_ASCII 0x22 J2
			  SAY NAME1 @2570	
			  SAY NAME2 @2576
			  SAY UNIDENTIFIED_DESC @2572
			  SAY DESC @2577
			  WRITE_ASCII 0x58 chelm05c
			  WRITE_ASCII 0x3a dtkremh3
			  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
			  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
				  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh4.itm~	//Remorhaz Shell Helm - curled-horn variant
				  WRITE_ASCII 0x22 H3
				  SAY NAME1 @2570	
				  SAY NAME2 @2576
				  SAY UNIDENTIFIED_DESC @2572
				  SAY DESC @2577
				  WRITE_ASCII 0x58 chelm04
				  WRITE_ASCII 0x3a dtkremh4
				  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
				  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
				  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
					  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh5.itm~	//Remorhaz Shell Helm - horned-plume variant
					  WRITE_ASCII 0x22 J9
					  SAY NAME1 @2570	
					  SAY NAME2 @2576
					  SAY UNIDENTIFIED_DESC @2572
					  SAY DESC @2577
					  WRITE_ASCII 0x58 chelm06
					  WRITE_ASCII 0x3a dtkremh5
					  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
					  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
					  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 104 timing = 2 target = 1 probability1 = 100 END
						  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh6.itm~	//Remorhaz Shell Helm - winged-plume variant
						  WRITE_ASCII 0x22 JA
						  SAY NAME1 @2570	
						  SAY NAME2 @2576
						  SAY UNIDENTIFIED_DESC @2572
						  SAY DESC @2577
						  WRITE_ASCII 0x58 chelm05b
						  WRITE_ASCII 0x3a dtkremh6
						  LPF DELETE_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 END
						  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 104 timing = 2 target = 1 probability1 = 100 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 49 parameter1 = 98 timing = 2 target = 1 probability1 = 100 END
							  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh7.itm~	//Remorhaz Shell Helm - centurion-plume variant
							  WRITE_ASCII 0x22 H5
							  SAY NAME1 @2570	
							  SAY NAME2 @2576
							  SAY UNIDENTIFIED_DESC @2572
							  SAY DESC @2577
							  WRITE_ASCII 0x58 chelm05
							  WRITE_ASCII 0x3a dtkremh7
							  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
							  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
							  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 98 timing = 2 target = 1 probability1 = 100 END
								  COPY ~sod2bg2_iu/iwdresource/itm/cdrelm.itm~ ~override/dtkremh8.itm~	//Remorhaz Shell Helm - plain-horned variant
								  WRITE_ASCII 0x22 J6
								  SAY NAME1 @2570	
								  SAY NAME2 @2576
								  SAY UNIDENTIFIED_DESC @2572
								  SAY DESC @2577
								  WRITE_ASCII 0x58 dtkremhm
								  WRITE_ASCII 0x3a dtkremh8
								  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 186 END
								  LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 98 END
								  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 52 parameter1 = 186 timing = 2 target = 1 probability1 = 100 END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~helmpat.itm~ BEGIN // check if already present to prevent conflicts
COPY ~sod2bg2_iu/iwdresource/bam/ihelmpat.bam~ ~override~
COPY ~sod2bg2_iu/iwdresource/itm/helmpat.itm~ ~override~	//Patriot Helm
  SAY NAME1 @2570	
  SAY NAME2 @2583
  SAY UNIDENTIFIED_DESC @2572
  SAY DESC @2584
  WRITE_ASCII 0x58 chelm05
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~band04.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/itm/circletmagi/band04.itm~ ~override~	//Circlet of the Archmagi
	  SAY NAME1 @2404	
	  SAY NAME2 @2585
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2586
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~band03.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/itm/eilisboon/band03.itm~ ~override~	//Eilistraee's Boon +1
	  SAY NAME1 @2404	
	  SAY NAME2 @2587
	  SAY UNIDENTIFIED_DESC @2406
	  SAY DESC @2588
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~ulring.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iulring.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ulring.itm~ ~override~	//Ulcaster Academy Ring
	  SAY NAME1 @2589	
	  SAY NAME2 @2593
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2594
	  WRITE_LONG 0x1e (BIT7 + BIT9 + BIT10 + BIT11 + BIT12 + BIT14 + BIT17 + BIT20 + BIT21 + BIT22 + BIT29 + BIT30)
	  WRITE_ASCII 0x58 cring10
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~dbone.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/idbone.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/dbone.itm~ ~override~	//Ring of Dwarven Bone
	  SAY NAME1 @2589	
	  SAY NAME2 @2595
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2596
	  WRITE_ASCII 0x58 cring29
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~ringed.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iringed.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ringed.itm~ ~override~	//Edion's Ring of Wizardry
	  SAY NAME1 @2589	
	  SAY NAME2 @2597
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2598
	  WRITE_ASCII 0x58 cring38
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END	//Prevents multiple rings of wizardry
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
	END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~ringkon.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iringkon.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/ringkon.itm~ ~override~	//Kontik's Ring of Wizardry
	  SAY NAME1 @2589	
	  SAY NAME2 @2590
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2592
	  WRITE_ASCII 0x58 cring35
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END	//Prevents multiple rings of wizardry
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
	  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
	END
		ACTION_IF FILE_EXISTS_IN_GAME ~bdring08.itm~ BEGIN // check if already present for EET games
			COPY_EXISTING ~bdring08.itm~ ~override~	//Prevents multiple rings of wizardry
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08 END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ohringwi END
			  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
				END
					ACTION_IF FILE_EXISTS_IN_GAME ~ring08.itm~ BEGIN // check if already present for EET games
						COPY_EXISTING ~ring08.itm~ ~override~	//Prevents multiple rings of wizardry
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
						  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
							END
								ACTION_IF FILE_EXISTS_IN_GAME ~ohringwi.itm~ BEGIN // check if already present for EET games
									COPY_EXISTING ~ohringwi.itm~ ~override~	//Prevents multiple rings of wizardry
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringkon END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = bdring08 END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ring08_ END
									  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 180 target = 1 timing = 2 resist_dispel = 2 probability1 = 100 parameter1 = RESOLVE_STR_REF(@5045) parameter2 = 0 STR_VAR resource = ringed END
										END
			
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~shadows.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ishadows.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/shadows.itm~ ~override~	//Ring of Shadows
	  SAY NAME1 @2589	
	  SAY NAME2 @2599
	  SAY UNIDENTIFIED_DESC @2591
	  SAY DESC @2600
	  WRITE_ASCII 0x58 cring27
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~lyre.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ilyre.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/lyre.itm~ ~override~	//Lyre of Progression
	  SAY NAME1 @2601	
	  SAY NAME2 @2602
	  SAY UNIDENTIFIED_DESC @2603
	  SAY DESC @2604
	  WRITE_ASCII 0x58 cmisc3o
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bardic.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ibardic.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/wav/#valhala.wav~ ~override~
	COMPILE ~sod2bg2_iu/iwdresource/baf/gnbzkwar.baf~
	COPY ~sod2bg2_iu/iwdresource/cre/berserk.cre~ ~override~
	SAY NAME1 @7007
	SAY NAME2 @7007
	COPY ~sod2bg2_iu/iwdresource/itm/bardic.itm~ ~override~	//Bardic Horn of Valhalla
	  SAY NAME1 @2605	
	  SAY NAME2 @2606
	  SAY UNIDENTIFIED_DESC @2607
	  SAY DESC @2608
	  WRITE_ASCII 0x58 cmisc73
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~shawm.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ishawm.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/wav/#owain.wav~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/shawm.itm~ ~override~	//Owain's Lullabye
	  SAY NAME1 @2609	
	  SAY NAME2 @2610
	  SAY UNIDENTIFIED_DESC @2611
	  SAY DESC @2612
	  WRITE_ASCII 0x58 dtkshawm
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~waukeen.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iwaukeen.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/waukeen.itm~ ~override~	//Waukeen's Defender +2
	  SAY NAME1 @2613	
	  SAY NAME2 @2614
	  SAY UNIDENTIFIED_DESC @2615
	  SAY DESC @2616
	  WRITE_ASCII 0x58 cshld28
	END
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bdsumst.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/ibdsumst.bam~ ~override~
	COPY ~sod2bg2_iu/2da/dtksumst.2da~ ~override~
	COPY ~sod2bg2_iu/spl/dtksums1.spl~ ~override~
		SAY NAME1 @5046
		SAY NAME2 @5046
	COPY ~sod2bg2_iu/spl/dtksums2.spl~ ~override~
		SAY NAME1 @5048
		SAY NAME2 @5048
	COPY ~sod2bg2_iu/spl/dtksums3.spl~ ~override~
		SAY NAME1 @5047
		SAY NAME2 @5048
	COPY ~sod2bg2_iu/iwdresource/itm/bdsumst.itm~ ~override~	//The Summoner's Staff +3
	  SAY NAME1 @2617	
	  SAY NAME2 @2618
	  SAY UNIDENTIFIED_DESC @2619
	  SAY DESC @2620
	  WRITE_ASCII 0x58 cstaf17
	  LPF ALTER_EFFECT INT_VAR opcode = 214 STR_VAR resource = dtksumst END
		  COPY ~sod2bg2_iu/iwdresource/itm/bdsumstx.itm~ ~override~	//The Summoner's Staff +3 (used up)
		  SAY NAME1 @2617	
		  SAY NAME2 @2618
		  SAY UNIDENTIFIED_DESC @2619
		  SAY DESC @2621
		  WRITE_ASCII 0x58 cstaf17
	END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~zzd5woh.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/izzd5woh.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/eff/zzd5wohh.eff~ ~override~
	COPY ~sod2bg2_iu/iwdresource/eff/zzd5wohd.eff~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/zzd5woh.itm~ ~override~	//Wind of Heaven +4, +5 vs. Elementals
	  SAY NAME1 @2622	
	  SAY NAME2 @2623
	  SAY UNIDENTIFIED_DESC @2624
	  SAY DESC @2625
	  WRITE_ASCII 0x58 csw1h20
	END	
	
ACTION_IF NOT FILE_EXISTS_IN_GAME ~waukeen.itm~ BEGIN // check if already present for EET games
	COPY ~sod2bg2_iu/iwdresource/bam/iwaukeen.bam~ ~override~
	COPY ~sod2bg2_iu/iwdresource/itm/waukeen.itm~ ~override~	//Waukeen's Defender +2
	  SAY NAME1 @2613	
	  SAY NAME2 @2614
	  SAY UNIDENTIFIED_DESC @2615
	  SAY DESC @2616
	  WRITE_ASCII 0x58 cshld28
	END

COPY ~sod2bg2_iu/itm/wolfscarf/dtkwscrf.itm~ ~override~	  //Winter Wolf Scarf
  SAY NAME1 @2680	
  SAY NAME2 @2681
  SAY UNIDENTIFIED_DESC @2682
  SAY DESC @2683

COPY ~sod2bg2_iu/itm/wolfhat/dtkwhat.itm~ ~override~	  //Winter Wolf Hat
  SAY NAME1 @2684	
  SAY NAME2 @2685
  SAY UNIDENTIFIED_DESC @2686
  SAY DESC @2687  
  
COPY ~sod2bg2_iu/itm/wolfgloves/dtkwglov.itm~ ~override~	  //Winter Wolf gloves
  SAY NAME1 @2688	
  SAY NAME2 @2689
  SAY UNIDENTIFIED_DESC @2690
  SAY DESC @2691  
  
COPY ~sod2bg2_iu/itm/wolfboots/dtkwboot.itm~ ~override~	  //Winter Wolf Boots
  SAY NAME1 @2692	
  SAY NAME2 @2693
  SAY UNIDENTIFIED_DESC @2694
  SAY DESC @2695


////////////////////////////////////////////////////////////////////////
/////////////////////Adding Items to Containers/////////////////////////
////////////////////////////////////////////////////////////////////////


ACTION_IF FILE_EXISTS_IN_GAME ~ar0401.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar0401.bcs~ ~sod2bg2_iu/scripts/bg0401.baf~	//Glimglam's Cloak +1	
		END

ACTION_IF FILE_EXISTS_IN_GAME ~ar0102.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar0102.bcs~ ~sod2bg2_iu/scripts/bg0102.baf~	//Cloak of Scintillating Colors	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~ar1504.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar1504.bcs~ ~sod2bg2_iu/scripts/bg1504.baf~	//Gauntlets of Elven Might	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~ar2300.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar2300.bcs~ ~sod2bg2_iu/scripts/bg2300.baf~	// Kontik's Ring of Wizardry	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~bg0512.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~bg0512.bcs~ ~sod2bg2_iu/scripts/bg0512.baf~	// Ring of Dwarven Bone	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~ar0514.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar0514.bcs~ ~sod2bg2_iu/scripts/bg0514.baf~	// Lyre of Progression	
		END

ACTION_IF FILE_EXISTS_IN_GAME ~ar2606.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar2606.bcs~ ~sod2bg2_iu/scripts/bg2606.baf~	// Winter Wolf Gloves	
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~ar3321.bcs~ BEGIN // check if present for EET games
	EXTEND_BOTTOM ~ar3321.bcs~ ~sod2bg2_iu/scripts/bg3321.baf~	// Winter Wolf Hat	
		END


///////////////////////////////////////////////////
/////////Adding Items to Creatures/////////////////
///////////////////////////////////////////////////


ACTION_IF FILE_EXISTS_IN_GAME ~tranzi.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~tranzi.cre~ ~override~
		REPLACE_CRE_ITEM ~wandmis~ #21 #0 #0 ~NONE~ ~QITEM1~		//Pemby's Wand of Many Missiles
		END

ACTION_IF FILE_EXISTS_IN_GAME ~daitel.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~daitel.cre~ ~override~
		REPLACE_CRE_ITEM ~wandarm~ #13 #7 #0 ~NONE~ ~QITEM1~		//Wand of Armory
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~mulahe.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~mulahe.cre~ ~override~
		REPLACE_CRE_ITEM ~wandtrp~ #23 #0 #0 ~NONE~ ~QITEM2~		//Wand of Trap Finding
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~rsgamaz.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rsgamaz.cre~ ~override~
		REPLACE_CRE_ITEM ~ohbrac01~ #1 #0 #0 ~NONE~ ~GLOVES~		//The Flaming Fists of Lin Mei
		END
			
ACTION_IF FILE_EXISTS_IN_GAME ~rasaad.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rasaad.cre~ ~override~
		REPLACE_CRE_ITEM ~rsbrac~ #1 #0 #0 ~IDENTIFIED~ ~GLOVES~		//moving Glimmering Bands to Rasaad's starting equip
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~rasaad7.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~rasaad7.cre~ ~override~
		REPLACE_CRE_ITEM ~sash~ #0 #0 #0 ~IDENTIFIED~ ~BELT~		//Shimmering Sash
		END

ACTION_IF FILE_EXISTS_IN_GAME ~phoenix.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~phoenix.cre~ ~override~
		REPLACE_CRE_ITEM ~kossuth~ #0 #0 #0 ~NONE~ ~AMULET~		//Kossuth's Blood
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~deathk.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~deathk.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd09~ #0 #0 #0 ~NONE~ ~INV~		//20% chance - The Spear of White Ash +3/Bastard Sword of Greater Phasing +3/Misery's Herald +3/Evil Spider Crusher of Doom +3/Darkened Glory +2
		END

ACTION_IF FILE_EXISTS_IN_GAME ~deathk1.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~deathk1.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd09~ #0 #0 #0 ~NONE~ ~INV~		//20% chance - The Spear of White Ash +3/Bastard Sword of Greater Phasing +3/Misery's Herald +3/Evil Spider Crusher of Doom +3/Darkened Glory +2
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~davaeo.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~davaeo.cre~ ~override~
		REPLACE_CRE_ITEM ~ogi~ #0 #0 #0 ~NONE~ ~ARMOR~		//Ogi-Luc's Great Robe
		REMOVE_CRE_ITEM ~clck17~
		REMOVE_CRE_ITEM ~brac03~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
	
ACTION_IF FILE_EXISTS_IN_GAME ~riggilo.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~riggilo.cre~ ~override~
		REPLACE_CRE_ITEM ~usltr3a~ #0 #0 #0 ~NONE~ ~ARMOR~		//Shadowed Studded Leather +2
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~fenten.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~fenten.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd05~ #0 #0 #0 ~NONE~ ~WEAPON~ EQUIP		//Charged Battle Axe +2/Poisonous Battle Axe +2
		END

ACTION_IF FILE_EXISTS_IN_GAME ~drasus.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~drasus.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~lothan.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~lothan.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd06~ #0 #0 #0 ~NONE~ ~BOOTS~		//Paws of the Cheetah/Boots of the Fox
		END
	
ACTION_IF FILE_EXISTS_IN_GAME ~hakt.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~hakt.cre~ ~override~
		REPLACE_CRE_ITEM ~dtkrnd07~ #0 #0 #0 ~NONE~ ~BOOTS~		//Messenger of Sseth
		END
	
ACTION_IF FILE_EXISTS_IN_GAME ~dezkie.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~dezkie.cre~ ~override~
		REPLACE_CRE_ITEM ~ohioun03~ #0 #0 #0 ~NONE~ ~HELMET~		//Clear Ioun Stone
		END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~thalan.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~thalan.cre~ ~override~
		REPLACE_CRE_ITEM ~ohioun02~ #0 #0 #0 ~NONE~ ~HELMET~		//Scarlet/Blue Ioun Stone
		END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~tanar.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~tanar.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd08~ #0 #0 #0 ~NONE~ ~INV~		//Lucky Scimitar +3/Doom Halberd +3/Demon's Breath +3/The Love of Black Bess +3/The Salamander's Tongue +3
			ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~	//Random new spell scroll (level 5 and under)
		END	

ACTION_IF FILE_EXISTS_IN_GAME ~bdkherr.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdkherr.cre~ ~override~
		REPLACE_CRE_ITEM ~ringed~ #0 #0 #0 ~NONE~ ~LRING~		//Edion's Ring of Wizardry
		END

ACTION_IF FILE_EXISTS_IN_GAME ~bdmorent.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdmorent.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
		
ACTION_IF FILE_EXISTS_IN_GAME ~shaldr.cre~ BEGIN // check if present for EET games
	COPY_EXISTING ~bdmorent.cre~ ~override~
		ADD_CRE_ITEM ~dtkrnd13~ #0 #0 #0 ~NONE~ ~INV~		//Random new mage spell scroll lv 5 or under
		END
		
//////////////////////////////////////////////////////
///////////Adding Items as Quest Rewards//////////////
//////////////////////////////////////////////////////

ACTION_IF FILE_EXISTS_IN_GAME ~tamah.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/tamah.d~		//Boots of the Forgotten Ones
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~gandol.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/gandol.d~		//Shadowed Boots
	END

ACTION_IF FILE_EXISTS_IN_GAME ~shandal2.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/shandal2.d~		//Breath of Auril +3
	END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~garan.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/garan1.d~		//Remorhaz - replaces Ankhegs for shell to create helm
	END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~taerom.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/taerom1.d~		//Remorhaz Helmet
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~ulcast.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/ulcast1.d~		//Ulcaster Academy Ring
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~narlen.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/narlen1.d~		//Ring of Shadows
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~landri.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/landri.d~		//Winter Wolf Boots
	END
	
ACTION_IF FILE_EXISTS_IN_GAME ~ftown2_.dlg~ BEGIN // check if present for EET games
	COMPILE ~sod2bg2_iu/dialogue/ftown2_.d~		//Winter Wolf Scarf
	END
	
	


//////////////////////////////////////////////////////
//////Adding Items to Stores//////////////////////////
//////////////////////////////////////////////////////

ACTION_IF FILE_EXISTS_IN_GAME ~taerum.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~taerum.sto~ ~override~		//Taerom Thunderhammer
		ADD_STORE_ITEM ~amulbro~ #0 #0 #0 ~IDENTIFIED~ #1	//Clasp of Bron's Cloak
			ADD_STORE_ITEM ~helmdef~ #0 #0 #0 ~IDENTIFIED~ #1	//Helm of the Trusted Defender
			END
			
ACTION_IF FILE_EXISTS_IN_GAME ~highhedg.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~highhedg.sto~ ~override~		//High Hedge
		ADD_STORE_ITEM ~brac03~ #0 #0 #0 ~IDENTIFIED~ #1	//Bracers to the Death
			ADD_STORE_ITEM ~bardic~ #0 #0 #0 ~IDENTIFIED~ #1	//Bardic Horn of Valhalla
			END
			
ACTION_IF FILE_EXISTS_IN_GAME ~sto4803.sto~ BEGIN // check if present for EET games
	COPY_EXISTING ~sto4803.sto~ ~override~		//Nashkel Shop
		ADD_STORE_ITEM ~cdwuff~ #0 #0 #0 ~IDENTIFIED~ #1	//Cloak of the Winter Wolf
			END

ACTION_IF FILE_EXISTS_IN_GAME ~sto0703.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~sto0703.sto~ ~override~	//Sorcerous Sundries
		ADD_STORE_ITEM ~band04~ #0 #0 #0 ~IDENTIFIED~ #1	//Circlet of the Archmagi
		END		

ACTION_IF FILE_EXISTS_IN_GAME ~bdnazram.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~bdnazram.sto~ ~override~	//Nazramu
		ADD_STORE_ITEM ~shawm~ #1 #0 #0 ~IDENTIFIED~ #1	//Owain's Lullabye
		END	
	
ACTION_IF FILE_EXISTS_IN_GAME ~ulgoth.sto~ BEGIN // check if present for EET games	
	COPY_EXISTING ~ulgoth.sto~ ~override~	//Ulgoth's Beard Store and Tavern
		ADD_STORE_ITEM ~bdsumst~ #0 #15 #0 ~IDENTIFIED~ #1	//The Summoner's Staff +3
			REMOVE_STORE_ITEM ~staf08_~ //Aules' Staff +3
		END	


//////////////////////////////////////////////////
//Adding SoD ammunition types to random treasure//
//////////////////////////////////////////////////

COPY_EXISTING ~rndtres.2da~ ~override~
	SET_2DA_ENTRY 17 4 2  ~bdarow01~
		SET_2DA_ENTRY 16 4 2  ~bdbolt01*5~
			SET_2DA_ENTRY 16 5 2  ~bdbolt02*5~
				SET_2DA_ENTRY 16 6 2  ~bull07*5~
					SET_2DA_ENTRY 16 7 2  ~bull08*5~
						SET_2DA_ENTRY 16 8 2  ~bull09*5~
